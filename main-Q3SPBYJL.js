var Il=Object.create;var Ir=Object.defineProperty,Ml=Object.defineProperties,xl=Object.getOwnPropertyDescriptor,Tl=Object.getOwnPropertyDescriptors,Al=Object.getOwnPropertyNames,Ls=Object.getOwnPropertySymbols,Rl=Object.getPrototypeOf,Fs=Object.prototype.hasOwnProperty,kl=Object.prototype.propertyIsEnumerable;var Ps=(e,t,n)=>t in e?Ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_e=(e,t)=>{for(var n in t||={})Fs.call(t,n)&&Ps(e,n,t[n]);if(Ls)for(var n of Ls(t))kl.call(t,n)&&Ps(e,n,t[n]);return e},Me=(e,t)=>Ml(e,Tl(t));var Bs=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Nl=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Al(t))!Fs.call(e,o)&&o!==n&&Ir(e,o,{get:()=>t[o],enumerable:!(i=xl(t,o))||i.enumerable});return e};var Hs=(e,t,n)=>(n=e!=null?Il(Rl(e)):{},Nl(t||!e||!e.__esModule?Ir(n,"default",{value:e,enumerable:!0}):n,e));var _l=Bs((yr,Ns)=>{"use strict";(function(e,t){if(typeof yr=="object"&&typeof Ns=="object")Ns.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var n=t();for(var i in n)(typeof yr=="object"?yr:e)[i]=n[i]}})(self,()=>(()=>{"use strict";var e={4567:function(o,r,s){var a=this&&this.__decorate||function(h,g,_,S){var w,m=arguments.length,D=m<3?g:S===null?S=Object.getOwnPropertyDescriptor(g,_):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(h,g,_,S);else for(var I=h.length-1;I>=0;I--)(w=h[I])&&(D=(m<3?w(D):m>3?w(g,_,D):w(g,_))||D);return m>3&&D&&Object.defineProperty(g,_,D),D},f=this&&this.__param||function(h,g){return function(_,S){g(_,S,h)}};Object.defineProperty(r,"__esModule",{value:!0}),r.AccessibilityManager=void 0;let l=s(9042),p=s(6114),y=s(9924),C=s(844),v=s(5596),c=s(4725),d=s(3656),u=r.AccessibilityManager=class extends C.Disposable{constructor(h,g){super(),this._terminal=h,this._renderService=g,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let _=0;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);if(this._topBoundaryFocusListener=_=>this._handleBoundaryFocus(_,0),this._bottomBoundaryFocusListener=_=>this._handleBoundaryFocus(_,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new y.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(_=>this._handleResize(_.rows))),this.register(this._terminal.onRender(_=>this._refreshRows(_.start,_.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(_=>this._handleChar(_))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(_=>this._handleTab(_))),this.register(this._terminal.onKey(_=>this._handleKey(_.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new v.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,d.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,C.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(h){for(let g=0;g<h;g++)this._handleChar(" ")}_handleChar(h){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==h&&(this._charsToAnnounce+=h):this._charsToAnnounce+=h,h===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=l.tooMuchOutput)),p.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,p.isMac&&this._liveRegion.remove()}_handleKey(h){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(h)||this._charsToConsume.push(h)}_refreshRows(h,g){this._liveRegionDebouncer.refresh(h,g,this._terminal.rows)}_renderRows(h,g){let _=this._terminal.buffer,S=_.lines.length.toString();for(let w=h;w<=g;w++){let m=_.translateBufferLineToString(_.ydisp+w,!0),D=(_.ydisp+w+1).toString(),I=this._rowElements[w];I&&(m.length===0?I.innerText="\xA0":I.textContent=m,I.setAttribute("aria-posinset",D),I.setAttribute("aria-setsize",S))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(h,g){let _=h.target,S=this._rowElements[g===0?1:this._rowElements.length-2];if(_.getAttribute("aria-posinset")===(g===0?"1":`${this._terminal.buffer.lines.length}`)||h.relatedTarget!==S)return;let w,m;if(g===0?(w=_,m=this._rowElements.pop(),this._rowContainer.removeChild(m)):(w=this._rowElements.shift(),m=_,this._rowContainer.removeChild(w)),w.removeEventListener("focus",this._topBoundaryFocusListener),m.removeEventListener("focus",this._bottomBoundaryFocusListener),g===0){let D=this._createAccessibilityTreeNode();this._rowElements.unshift(D),this._rowContainer.insertAdjacentElement("afterbegin",D)}else{let D=this._createAccessibilityTreeNode();this._rowElements.push(D),this._rowContainer.appendChild(D)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(g===0?-1:1),this._rowElements[g===0?1:this._rowElements.length-2].focus(),h.preventDefault(),h.stopImmediatePropagation()}_handleResize(h){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let g=this._rowContainer.children.length;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);for(;this._rowElements.length>h;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let h=document.createElement("div");return h.setAttribute("role","listitem"),h.tabIndex=-1,this._refreshRowDimensions(h),h}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let h=0;h<this._terminal.rows;h++)this._refreshRowDimensions(this._rowElements[h])}}_refreshRowDimensions(h){h.style.height=`${this._renderService.dimensions.css.cell.height}px`}};r.AccessibilityManager=u=a([f(1,c.IRenderService)],u)},3614:(o,r)=>{function s(p){return p.replace(/\r?\n/g,"\r")}function a(p,y){return y?"\x1B[200~"+p+"\x1B[201~":p}function f(p,y,C,v){p=a(p=s(p),C.decPrivateModes.bracketedPasteMode&&v.rawOptions.ignoreBracketedPasteMode!==!0),C.triggerDataEvent(p,!0),y.value=""}function l(p,y,C){let v=C.getBoundingClientRect(),c=p.clientX-v.left-10,d=p.clientY-v.top-10;y.style.width="20px",y.style.height="20px",y.style.left=`${c}px`,y.style.top=`${d}px`,y.style.zIndex="1000",y.focus()}Object.defineProperty(r,"__esModule",{value:!0}),r.rightClickHandler=r.moveTextAreaUnderMouseCursor=r.paste=r.handlePasteEvent=r.copyHandler=r.bracketTextForPaste=r.prepareTextForTerminal=void 0,r.prepareTextForTerminal=s,r.bracketTextForPaste=a,r.copyHandler=function(p,y){p.clipboardData&&p.clipboardData.setData("text/plain",y.selectionText),p.preventDefault()},r.handlePasteEvent=function(p,y,C,v){p.stopPropagation(),p.clipboardData&&f(p.clipboardData.getData("text/plain"),y,C,v)},r.paste=f,r.moveTextAreaUnderMouseCursor=l,r.rightClickHandler=function(p,y,C,v,c){l(p,y,C),c&&v.rightClickSelect(p),y.value=v.selectionText,y.select()}},7239:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorContrastCache=void 0;let a=s(1505);r.ColorContrastCache=class{constructor(){this._color=new a.TwoKeyMap,this._css=new a.TwoKeyMap}setCss(f,l,p){this._css.set(f,l,p)}getCss(f,l){return this._css.get(f,l)}setColor(f,l,p){this._color.set(f,l,p)}getColor(f,l){return this._color.get(f,l)}clear(){this._color.clear(),this._css.clear()}}},3656:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(s,a,f,l){s.addEventListener(a,f,l);let p=!1;return{dispose:()=>{p||(p=!0,s.removeEventListener(a,f,l))}}}},6465:function(o,r,s){var a=this&&this.__decorate||function(c,d,u,h){var g,_=arguments.length,S=_<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,d,u,h);else for(var w=c.length-1;w>=0;w--)(g=c[w])&&(S=(_<3?g(S):_>3?g(d,u,S):g(d,u))||S);return _>3&&S&&Object.defineProperty(d,u,S),S},f=this&&this.__param||function(c,d){return function(u,h){d(u,h,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Linkifier2=void 0;let l=s(3656),p=s(8460),y=s(844),C=s(2585),v=r.Linkifier2=class extends y.Disposable{get currentLink(){return this._currentLink}constructor(c){super(),this._bufferService=c,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new p.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new p.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,y.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,y.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(c){return this._linkProviders.push(c),{dispose:()=>{let d=this._linkProviders.indexOf(c);d!==-1&&this._linkProviders.splice(d,1)}}}attachToDom(c,d,u){this._element=c,this._mouseService=d,this._renderService=u,this.register((0,l.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,l.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,l.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){if(this._lastMouseEvent=c,!this._element||!this._mouseService)return;let d=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!d)return;this._isMouseOut=!1;let u=c.composedPath();for(let h=0;h<u.length;h++){let g=u[h];if(g.classList.contains("xterm"))break;if(g.classList.contains("xterm-hover"))return}this._lastBufferCell&&d.x===this._lastBufferCell.x&&d.y===this._lastBufferCell.y||(this._handleHover(d),this._lastBufferCell=d)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,d){var u,h;this._activeProviderReplies&&d||((u=this._activeProviderReplies)===null||u===void 0||u.forEach(_=>{_?.forEach(S=>{S.link.dispose&&S.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let g=!1;for(let[_,S]of this._linkProviders.entries())d?!((h=this._activeProviderReplies)===null||h===void 0)&&h.get(_)&&(g=this._checkLinkProviderResult(_,c,g)):S.provideLinks(c.y,w=>{var m,D;if(this._isMouseOut)return;let I=w?.map(R=>({link:R}));(m=this._activeProviderReplies)===null||m===void 0||m.set(_,I),g=this._checkLinkProviderResult(_,c,g),((D=this._activeProviderReplies)===null||D===void 0?void 0:D.size)===this._linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,d){let u=new Set;for(let h=0;h<d.size;h++){let g=d.get(h);if(g)for(let _=0;_<g.length;_++){let S=g[_],w=S.link.range.start.y<c?0:S.link.range.start.x,m=S.link.range.end.y>c?this._bufferService.cols:S.link.range.end.x;for(let D=w;D<=m;D++){if(u.has(D)){g.splice(_--,1);break}u.add(D)}}}}_checkLinkProviderResult(c,d,u){var h;if(!this._activeProviderReplies)return u;let g=this._activeProviderReplies.get(c),_=!1;for(let S=0;S<c;S++)this._activeProviderReplies.has(S)&&!this._activeProviderReplies.get(S)||(_=!0);if(!_&&g){let S=g.find(w=>this._linkAtPosition(w.link,d));S&&(u=!0,this._handleNewLink(S))}if(this._activeProviderReplies.size===this._linkProviders.length&&!u)for(let S=0;S<this._activeProviderReplies.size;S++){let w=(h=this._activeProviderReplies.get(S))===null||h===void 0?void 0:h.find(m=>this._linkAtPosition(m.link,d));if(w){u=!0,this._handleNewLink(w);break}}return u}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._element||!this._mouseService||!this._currentLink)return;let d=this._positionFromMouseEvent(c,this._element,this._mouseService);d&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,d)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,d){this._element&&this._currentLink&&this._lastMouseEvent&&(!c||!d||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=d)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,y.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let d=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);d&&this._linkAtPosition(c.link,d)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var u,h;return(h=(u=this._currentLink)===null||u===void 0?void 0:u.state)===null||h===void 0?void 0:h.decorations.pointerCursor},set:u=>{var h,g;!((h=this._currentLink)===null||h===void 0)&&h.state&&this._currentLink.state.decorations.pointerCursor!==u&&(this._currentLink.state.decorations.pointerCursor=u,this._currentLink.state.isHovered&&((g=this._element)===null||g===void 0||g.classList.toggle("xterm-cursor-pointer",u)))}},underline:{get:()=>{var u,h;return(h=(u=this._currentLink)===null||u===void 0?void 0:u.state)===null||h===void 0?void 0:h.decorations.underline},set:u=>{var h,g,_;!((h=this._currentLink)===null||h===void 0)&&h.state&&((_=(g=this._currentLink)===null||g===void 0?void 0:g.state)===null||_===void 0?void 0:_.decorations.underline)!==u&&(this._currentLink.state.decorations.underline=u,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,u))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(u=>{if(!this._currentLink)return;let h=u.start===0?0:u.start+1+this._bufferService.buffer.ydisp,g=this._bufferService.buffer.ydisp+1+u.end;if(this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=g&&(this._clearCurrentLink(h,g),this._lastMouseEvent&&this._element)){let _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._askForLink(_,!1)}})))}_linkHover(c,d,u){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),d.hover&&d.hover(u,d.text)}_fireUnderlineEvent(c,d){let u=c.range,h=this._bufferService.buffer.ydisp,g=this._createLinkUnderlineEvent(u.start.x-1,u.start.y-h-1,u.end.x,u.end.y-h-1,void 0);(d?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(g)}_linkLeave(c,d,u){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(d,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),d.leave&&d.leave(u,d.text)}_linkAtPosition(c,d){let u=c.range.start.y*this._bufferService.cols+c.range.start.x,h=c.range.end.y*this._bufferService.cols+c.range.end.x,g=d.y*this._bufferService.cols+d.x;return u<=g&&g<=h}_positionFromMouseEvent(c,d,u){let h=u.getCoords(c,d,this._bufferService.cols,this._bufferService.rows);if(h)return{x:h[0],y:h[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,d,u,h,g){return{x1:c,y1:d,x2:u,y2:h,cols:this._bufferService.cols,fg:g}}};r.Linkifier2=v=a([f(0,C.IBufferService)],v)},9042:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tooMuchOutput=r.promptLabel=void 0,r.promptLabel="Terminal input",r.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(o,r,s){var a=this&&this.__decorate||function(v,c,d,u){var h,g=arguments.length,_=g<3?c:u===null?u=Object.getOwnPropertyDescriptor(c,d):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(v,c,d,u);else for(var S=v.length-1;S>=0;S--)(h=v[S])&&(_=(g<3?h(_):g>3?h(c,d,_):h(c,d))||_);return g>3&&_&&Object.defineProperty(c,d,_),_},f=this&&this.__param||function(v,c){return function(d,u){c(d,u,v)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkProvider=void 0;let l=s(511),p=s(2585),y=r.OscLinkProvider=class{constructor(v,c,d){this._bufferService=v,this._optionsService=c,this._oscLinkService=d}provideLinks(v,c){var d;let u=this._bufferService.buffer.lines.get(v-1);if(!u)return void c(void 0);let h=[],g=this._optionsService.rawOptions.linkHandler,_=new l.CellData,S=u.getTrimmedLength(),w=-1,m=-1,D=!1;for(let I=0;I<S;I++)if(m!==-1||u.hasContent(I)){if(u.loadCell(I,_),_.hasExtendedAttrs()&&_.extended.urlId){if(m===-1){m=I,w=_.extended.urlId;continue}D=_.extended.urlId!==w}else m!==-1&&(D=!0);if(D||m!==-1&&I===S-1){let R=(d=this._oscLinkService.getLinkData(w))===null||d===void 0?void 0:d.uri;if(R){let M={start:{x:m+1,y:v},end:{x:I+(D||I!==S-1?0:1),y:v}},A=!1;if(!g?.allowNonHttpProtocols)try{let O=new URL(R);["http:","https:"].includes(O.protocol)||(A=!0)}catch{A=!0}A||h.push({text:R,range:M,activate:(O,F)=>g?g.activate(O,F,M):C(0,F),hover:(O,F)=>{var H;return(H=g?.hover)===null||H===void 0?void 0:H.call(g,O,F,M)},leave:(O,F)=>{var H;return(H=g?.leave)===null||H===void 0?void 0:H.call(g,O,F,M)}})}D=!1,_.hasExtendedAttrs()&&_.extended.urlId?(m=I,w=_.extended.urlId):(m=-1,w=-1)}}c(h)}};function C(v,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){let d=window.open();if(d){try{d.opener=null}catch{}d.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}r.OscLinkProvider=y=a([f(0,p.IBufferService),f(1,p.IOptionsService),f(2,p.IOscLinkService)],y)},6193:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderDebouncer=void 0,r.RenderDebouncer=class{constructor(s,a){this._parentWindow=s,this._renderCallback=a,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(s){return this._refreshCallbacks.push(s),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(s,a,f){this._rowCount=f,s=s!==void 0?s:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,s):s,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let s=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(s,a),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let s of this._refreshCallbacks)s(0);this._refreshCallbacks=[]}}},5596:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ScreenDprMonitor=void 0;let a=s(844);class f extends a.Disposable{constructor(p){super(),this._parentWindow=p,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,a.toDisposable)(()=>{this.clearListener()}))}setListener(p){this._listener&&this.clearListener(),this._listener=p,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var p;this._outerListener&&((p=this._resolutionMediaMatchList)===null||p===void 0||p.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}r.ScreenDprMonitor=f},3236:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Terminal=void 0;let a=s(3614),f=s(3656),l=s(6465),p=s(9042),y=s(3730),C=s(1680),v=s(3107),c=s(5744),d=s(2950),u=s(1296),h=s(428),g=s(4269),_=s(5114),S=s(8934),w=s(3230),m=s(9312),D=s(4725),I=s(6731),R=s(8055),M=s(8969),A=s(8460),O=s(844),F=s(6114),H=s(8437),B=s(2584),E=s(7399),x=s(5941),T=s(9074),k=s(2585),j=s(5435),V=s(4567),W=typeof window<"u"?window.document:null;class U extends M.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(b={}){super(b),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new O.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(l.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(y.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(T.DecorationService),this._instantiationService.setService(k.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((N,P)=>this.refresh(N,P))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(N=>this._reportWindowsOptions(N))),this.register(this._inputHandler.onColor(N=>this._handleColorEvent(N))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(N=>this._afterResize(N.cols,N.rows))),this.register((0,O.toDisposable)(()=>{var N,P;this._customKeyEventHandler=void 0,(P=(N=this.element)===null||N===void 0?void 0:N.parentNode)===null||P===void 0||P.removeChild(this.element)}))}_handleColorEvent(b){if(this._themeService)for(let N of b){let P,L="";switch(N.index){case 256:P="foreground",L="10";break;case 257:P="background",L="11";break;case 258:P="cursor",L="12";break;default:P="ansi",L="4;"+N.index}switch(N.type){case 0:let q=R.color.toColorRGB(P==="ansi"?this._themeService.colors.ansi[N.index]:this._themeService.colors[P]);this.coreService.triggerDataEvent(`${B.C0.ESC}]${L};${(0,x.toRgbString)(q)}${B.C1_ESCAPED.ST}`);break;case 1:if(P==="ansi")this._themeService.modifyColors($=>$.ansi[N.index]=R.rgba.toColor(...N.color));else{let $=P;this._themeService.modifyColors(te=>te[$]=R.rgba.toColor(...N.color))}break;case 2:this._themeService.restoreColor(N.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(b){b?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(b){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(B.C0.ESC+"[I"),this.updateCursorStyle(b),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var b;return(b=this.textarea)===null||b===void 0?void 0:b.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(B.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let b=this.buffer.ybase+this.buffer.y,N=this.buffer.lines.get(b);if(!N)return;let P=Math.min(this.buffer.x,this.cols-1),L=this._renderService.dimensions.css.cell.height,q=N.getWidth(P),$=this._renderService.dimensions.css.cell.width*q,te=this.buffer.y*this._renderService.dimensions.css.cell.height,ce=P*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ce+"px",this.textarea.style.top=te+"px",this.textarea.style.width=$+"px",this.textarea.style.height=L+"px",this.textarea.style.lineHeight=L+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",N=>{this.hasSelection()&&(0,a.copyHandler)(N,this._selectionService)}));let b=N=>(0,a.handlePasteEvent)(N,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",b)),this.register((0,f.addDisposableDomListener)(this.element,"paste",b)),F.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",N=>{N.button===2&&(0,a.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",N=>{(0,a.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),F.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",N=>{N.button===1&&(0,a.moveTextAreaUnderMouseCursor)(N,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",b=>this._keyUp(b),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",b=>this._keyDown(b),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",b=>this._keyPress(b),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",b=>this._compositionHelper.compositionupdate(b))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,f.addDisposableDomListener)(this.textarea,"input",b=>this._inputEvent(b),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(b){var N;if(!b)throw new Error("Terminal requires a parent element.");b.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=b.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),b.appendChild(this.element);let P=W.createDocumentFragment();this._viewportElement=W.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),P.appendChild(this._viewportElement),this._viewportScrollArea=W.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=W.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=W.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),P.appendChild(this.screenElement),this.textarea=W.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(_.CoreBrowserService,this.textarea,(N=this._document.defaultView)!==null&&N!==void 0?N:window),this._instantiationService.setService(D.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",L=>this._handleTextAreaFocus(L))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(D.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(I.ThemeService),this._instantiationService.setService(D.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(g.CharacterJoinerService),this._instantiationService.setService(D.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(w.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(D.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(L=>this._onRender.fire(L))),this.onResize(L=>this._renderService.resize(L.cols,L.rows)),this._compositionView=W.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(d.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(P);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(D.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(C.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(L=>this.scrollLines(L.amount,L.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(m.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(D.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(L=>this.scrollLines(L.amount,L.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(L=>this._renderService.handleSelectionChanged(L.start,L.end,L.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(L=>{this.textarea.value=L,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(L=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(v.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",L=>this._selectionService.handleMouseDown(L))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",L=>this._handleScreenReaderModeOptionChange(L))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",L=>{!this._overviewRulerRenderer&&L&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(u.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let b=this,N=this.element;function P($){let te=b._mouseService.getMouseReportCoords($,b.screenElement);if(!te)return!1;let ce,he;switch($.overrideType||$.type){case"mousemove":he=32,$.buttons===void 0?(ce=3,$.button!==void 0&&(ce=$.button<3?$.button:3)):ce=1&$.buttons?0:4&$.buttons?1:2&$.buttons?2:3;break;case"mouseup":he=0,ce=$.button<3?$.button:3;break;case"mousedown":he=1,ce=$.button<3?$.button:3;break;case"wheel":if(b.viewport.getLinesScrolled($)===0)return!1;he=$.deltaY<0?0:1,ce=4;break;default:return!1}return!(he===void 0||ce===void 0||ce>4)&&b.coreMouseService.triggerMouseEvent({col:te.col,row:te.row,x:te.x,y:te.y,button:ce,action:he,ctrl:$.ctrlKey,alt:$.altKey,shift:$.shiftKey})}let L={mouseup:null,wheel:null,mousedrag:null,mousemove:null},q={mouseup:$=>(P($),$.buttons||(this._document.removeEventListener("mouseup",L.mouseup),L.mousedrag&&this._document.removeEventListener("mousemove",L.mousedrag)),this.cancel($)),wheel:$=>(P($),this.cancel($,!0)),mousedrag:$=>{$.buttons&&P($)},mousemove:$=>{$.buttons||P($)}};this.register(this.coreMouseService.onProtocolChange($=>{$?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents($)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&$?L.mousemove||(N.addEventListener("mousemove",q.mousemove),L.mousemove=q.mousemove):(N.removeEventListener("mousemove",L.mousemove),L.mousemove=null),16&$?L.wheel||(N.addEventListener("wheel",q.wheel,{passive:!1}),L.wheel=q.wheel):(N.removeEventListener("wheel",L.wheel),L.wheel=null),2&$?L.mouseup||(N.addEventListener("mouseup",q.mouseup),L.mouseup=q.mouseup):(this._document.removeEventListener("mouseup",L.mouseup),N.removeEventListener("mouseup",L.mouseup),L.mouseup=null),4&$?L.mousedrag||(L.mousedrag=q.mousedrag):(this._document.removeEventListener("mousemove",L.mousedrag),L.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(N,"mousedown",$=>{if($.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection($))return P($),L.mouseup&&this._document.addEventListener("mouseup",L.mouseup),L.mousedrag&&this._document.addEventListener("mousemove",L.mousedrag),this.cancel($)})),this.register((0,f.addDisposableDomListener)(N,"wheel",$=>{if(!L.wheel){if(!this.buffer.hasScrollback){let te=this.viewport.getLinesScrolled($);if(te===0)return;let ce=B.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+($.deltaY<0?"A":"B"),he="";for(let mt=0;mt<Math.abs(te);mt++)he+=ce;return this.coreService.triggerDataEvent(he,!0),this.cancel($,!0)}return this.viewport.handleWheel($)?this.cancel($):void 0}},{passive:!1})),this.register((0,f.addDisposableDomListener)(N,"touchstart",$=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart($),this.cancel($)},{passive:!0})),this.register((0,f.addDisposableDomListener)(N,"touchmove",$=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove($)?void 0:this.cancel($)},{passive:!1}))}refresh(b,N){var P;(P=this._renderService)===null||P===void 0||P.refreshRows(b,N)}updateCursorStyle(b){var N;!((N=this._selectionService)===null||N===void 0)&&N.shouldColumnSelect(b)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(b,N,P=0){var L;P===1?(super.scrollLines(b,N,P),this.refresh(0,this.rows-1)):(L=this.viewport)===null||L===void 0||L.scrollLines(b)}paste(b){(0,a.paste)(b,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(b){this._customKeyEventHandler=b}registerLinkProvider(b){return this.linkifier2.registerLinkProvider(b)}registerCharacterJoiner(b){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let N=this._characterJoinerService.register(b);return this.refresh(0,this.rows-1),N}deregisterCharacterJoiner(b){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(b)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(b){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+b)}registerDecoration(b){return this._decorationService.registerDecoration(b)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(b,N,P){this._selectionService.setSelection(b,N,P)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var b;(b=this._selectionService)===null||b===void 0||b.clearSelection()}selectAll(){var b;(b=this._selectionService)===null||b===void 0||b.selectAll()}selectLines(b,N){var P;(P=this._selectionService)===null||P===void 0||P.selectLines(b,N)}_keyDown(b){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(b)===!1)return!1;let N=this.browser.isMac&&this.options.macOptionIsMeta&&b.altKey;if(!N&&!this._compositionHelper.keydown(b))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;N||b.key!=="Dead"&&b.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let P=(0,E.evaluateKeyboardEvent)(b,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(b),P.type===3||P.type===2){let L=this.rows-1;return this.scrollLines(P.type===2?-L:L),this.cancel(b,!0)}return P.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,b)||(P.cancel&&this.cancel(b,!0),!P.key||!!(b.key&&!b.ctrlKey&&!b.altKey&&!b.metaKey&&b.key.length===1&&b.key.charCodeAt(0)>=65&&b.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(P.key!==B.C0.ETX&&P.key!==B.C0.CR||(this.textarea.value=""),this._onKey.fire({key:P.key,domEvent:b}),this._showCursor(),this.coreService.triggerDataEvent(P.key,!0),!this.optionsService.rawOptions.screenReaderMode||b.altKey||b.ctrlKey?this.cancel(b,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(b,N){let P=b.isMac&&!this.options.macOptionIsMeta&&N.altKey&&!N.ctrlKey&&!N.metaKey||b.isWindows&&N.altKey&&N.ctrlKey&&!N.metaKey||b.isWindows&&N.getModifierState("AltGraph");return N.type==="keypress"?P:P&&(!N.keyCode||N.keyCode>47)}_keyUp(b){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(b)===!1||(function(N){return N.keyCode===16||N.keyCode===17||N.keyCode===18}(b)||this.focus(),this.updateCursorStyle(b),this._keyPressHandled=!1)}_keyPress(b){let N;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(b)===!1)return!1;if(this.cancel(b),b.charCode)N=b.charCode;else if(b.which===null||b.which===void 0)N=b.keyCode;else{if(b.which===0||b.charCode===0)return!1;N=b.which}return!(!N||(b.altKey||b.ctrlKey||b.metaKey)&&!this._isThirdLevelShift(this.browser,b)||(N=String.fromCharCode(N),this._onKey.fire({key:N,domEvent:b}),this._showCursor(),this.coreService.triggerDataEvent(N,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(b){if(b.data&&b.inputType==="insertText"&&(!b.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let N=b.data;return this.coreService.triggerDataEvent(N,!0),this.cancel(b),!0}return!1}resize(b,N){b!==this.cols||N!==this.rows?super.resize(b,N):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(b,N){var P,L;(P=this._charSizeService)===null||P===void 0||P.measure(),(L=this.viewport)===null||L===void 0||L.syncScrollArea(!0)}clear(){var b;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let N=1;N<this.rows;N++)this.buffer.lines.push(this.buffer.getBlankLine(H.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(b=this.viewport)===null||b===void 0||b.reset(),this.refresh(0,this.rows-1)}}reset(){var b,N;this.options.rows=this.rows,this.options.cols=this.cols;let P=this._customKeyEventHandler;this._setup(),super.reset(),(b=this._selectionService)===null||b===void 0||b.reset(),this._decorationService.reset(),(N=this.viewport)===null||N===void 0||N.reset(),this._customKeyEventHandler=P,this.refresh(0,this.rows-1)}clearTextureAtlas(){var b;(b=this._renderService)===null||b===void 0||b.clearTextureAtlas()}_reportFocus(){var b;!((b=this.element)===null||b===void 0)&&b.classList.contains("focus")?this.coreService.triggerDataEvent(B.C0.ESC+"[I"):this.coreService.triggerDataEvent(B.C0.ESC+"[O")}_reportWindowsOptions(b){if(this._renderService)switch(b){case j.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let N=this._renderService.dimensions.css.canvas.width.toFixed(0),P=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${B.C0.ESC}[4;${P};${N}t`);break;case j.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let L=this._renderService.dimensions.css.cell.width.toFixed(0),q=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${B.C0.ESC}[6;${q};${L}t`)}}cancel(b,N){if(this.options.cancelEvents||N)return b.preventDefault(),b.stopPropagation(),!1}}r.Terminal=U},9924:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TimeBasedDebouncer=void 0,r.TimeBasedDebouncer=class{constructor(s,a=1e3){this._renderCallback=s,this._debounceThresholdMS=a,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(s,a,f){this._rowCount=f,s=s!==void 0?s:0,a=a!==void 0?a:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,s):s,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,a):a;let l=Date.now();if(l-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=l,this._innerRefresh();else if(!this._additionalRefreshRequested){let p=l-this._lastRefreshMs,y=this._debounceThresholdMS-p;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},y)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let s=Math.max(this._rowStart,0),a=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(s,a)}}},1680:function(o,r,s){var a=this&&this.__decorate||function(d,u,h,g){var _,S=arguments.length,w=S<3?u:g===null?g=Object.getOwnPropertyDescriptor(u,h):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(d,u,h,g);else for(var m=d.length-1;m>=0;m--)(_=d[m])&&(w=(S<3?_(w):S>3?_(u,h,w):_(u,h))||w);return S>3&&w&&Object.defineProperty(u,h,w),w},f=this&&this.__param||function(d,u){return function(h,g){u(h,g,d)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Viewport=void 0;let l=s(3656),p=s(4725),y=s(8460),C=s(844),v=s(2585),c=r.Viewport=class extends C.Disposable{constructor(d,u,h,g,_,S,w,m){super(),this._viewportElement=d,this._scrollArea=u,this._bufferService=h,this._optionsService=g,this._charSizeService=_,this._renderService=S,this._coreBrowserService=w,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,l.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(D=>this._activeBuffer=D.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(D=>this._renderDimensions=D)),this._handleThemeChange(m.colors),this.register(m.onChangeColors(D=>this._handleThemeChange(D))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(d){this._viewportElement.style.backgroundColor=d.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(d){if(d)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let u=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==u&&(this._lastRecordedBufferHeight=u,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let d=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==d&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=d),this._refreshAnimationFrame=null}syncScrollArea(d=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(d);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(d)}_handleScroll(d){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});let u=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let d=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(d*(this._smoothScrollState.target-this._smoothScrollState.origin)),d<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(d,u){let h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(u<0&&this._viewportElement.scrollTop!==0||u>0&&h<this._lastRecordedBufferHeight)||(d.cancelable&&d.preventDefault(),!1)}handleWheel(d){let u=this._getPixelsScrolled(d);return u!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+u:this._smoothScrollState.target+=u,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=u,this._bubbleScroll(d,u))}scrollLines(d){if(d!==0)if(this._optionsService.rawOptions.smoothScrollDuration){let u=d*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+u,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:d,suppressScrollEvent:!1})}_getPixelsScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let u=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_LINE?u*=this._currentRowHeight:d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._currentRowHeight*this._bufferService.rows),u}getBufferElements(d,u){var h;let g,_="",S=[],w=u??this._bufferService.buffer.lines.length,m=this._bufferService.buffer.lines;for(let D=d;D<w;D++){let I=m.get(D);if(!I)continue;let R=(h=m.get(D+1))===null||h===void 0?void 0:h.isWrapped;if(_+=I.translateToString(!R),!R||D===m.length-1){let M=document.createElement("div");M.textContent=_,S.push(M),_.length>0&&(g=M),_=""}}return{bufferElements:S,cursorElement:g}}getLinesScrolled(d){if(d.deltaY===0||d.shiftKey)return 0;let u=this._applyScrollModifier(d.deltaY,d);return d.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(u/=this._currentRowHeight+0,this._wheelPartialScroll+=u,u=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):d.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._bufferService.rows),u}_applyScrollModifier(d,u){let h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&u.altKey||h==="ctrl"&&u.ctrlKey||h==="shift"&&u.shiftKey?d*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:d*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(d){this._lastTouchY=d.touches[0].pageY}handleTouchMove(d){let u=this._lastTouchY-d.touches[0].pageY;return this._lastTouchY=d.touches[0].pageY,u!==0&&(this._viewportElement.scrollTop+=u,this._bubbleScroll(d,u))}};r.Viewport=c=a([f(2,v.IBufferService),f(3,v.IOptionsService),f(4,p.ICharSizeService),f(5,p.IRenderService),f(6,p.ICoreBrowserService),f(7,p.IThemeService)],c)},3107:function(o,r,s){var a=this&&this.__decorate||function(c,d,u,h){var g,_=arguments.length,S=_<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,d,u,h);else for(var w=c.length-1;w>=0;w--)(g=c[w])&&(S=(_<3?g(S):_>3?g(d,u,S):g(d,u))||S);return _>3&&S&&Object.defineProperty(d,u,S),S},f=this&&this.__param||function(c,d){return function(u,h){d(u,h,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferDecorationRenderer=void 0;let l=s(3656),p=s(4725),y=s(844),C=s(2585),v=r.BufferDecorationRenderer=class extends y.Disposable{constructor(c,d,u,h){super(),this._screenElement=c,this._bufferService=d,this._decorationService=u,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,l.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(g=>this._removeDecoration(g))),this.register((0,y.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let c of this._decorationService.decorations)this._renderDecoration(c);this._dimensionsChanged=!1}_renderDecoration(c){this._refreshStyle(c),this._dimensionsChanged&&this._refreshXPosition(c)}_createElement(c){var d,u;let h=document.createElement("div");h.classList.add("xterm-decoration"),h.classList.toggle("xterm-decoration-top-layer",((d=c?.options)===null||d===void 0?void 0:d.layer)==="top"),h.style.width=`${Math.round((c.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,h.style.height=(c.options.height||1)*this._renderService.dimensions.css.cell.height+"px",h.style.top=(c.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",h.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let g=(u=c.options.x)!==null&&u!==void 0?u:0;return g&&g>this._bufferService.cols&&(h.style.display="none"),this._refreshXPosition(c,h),h}_refreshStyle(c){let d=c.marker.line-this._bufferService.buffers.active.ydisp;if(d<0||d>=this._bufferService.rows)c.element&&(c.element.style.display="none",c.onRenderEmitter.fire(c.element));else{let u=this._decorationElements.get(c);u||(u=this._createElement(c),c.element=u,this._decorationElements.set(c,u),this._container.appendChild(u),c.onDispose(()=>{this._decorationElements.delete(c),u.remove()})),u.style.top=d*this._renderService.dimensions.css.cell.height+"px",u.style.display=this._altBufferIsActive?"none":"block",c.onRenderEmitter.fire(u)}}_refreshXPosition(c,d=c.element){var u;if(!d)return;let h=(u=c.options.x)!==null&&u!==void 0?u:0;(c.options.anchor||"left")==="right"?d.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":d.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(c){var d;(d=this._decorationElements.get(c))===null||d===void 0||d.remove(),this._decorationElements.delete(c),c.dispose()}};r.BufferDecorationRenderer=v=a([f(1,C.IBufferService),f(2,C.IDecorationService),f(3,p.IRenderService)],v)},5871:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorZoneStore=void 0,r.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(s){if(s.options.overviewRulerOptions){for(let a of this._zones)if(a.color===s.options.overviewRulerOptions.color&&a.position===s.options.overviewRulerOptions.position){if(this._lineIntersectsZone(a,s.marker.line))return;if(this._lineAdjacentToZone(a,s.marker.line,s.options.overviewRulerOptions.position))return void this._addLineToZone(a,s.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=s.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=s.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=s.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=s.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:s.options.overviewRulerOptions.color,position:s.options.overviewRulerOptions.position,startBufferLine:s.marker.line,endBufferLine:s.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(s){this._linePadding=s}_lineIntersectsZone(s,a){return a>=s.startBufferLine&&a<=s.endBufferLine}_lineAdjacentToZone(s,a,f){return a>=s.startBufferLine-this._linePadding[f||"full"]&&a<=s.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(s,a){s.startBufferLine=Math.min(s.startBufferLine,a),s.endBufferLine=Math.max(s.endBufferLine,a)}}},5744:function(o,r,s){var a=this&&this.__decorate||function(g,_,S,w){var m,D=arguments.length,I=D<3?_:w===null?w=Object.getOwnPropertyDescriptor(_,S):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(g,_,S,w);else for(var R=g.length-1;R>=0;R--)(m=g[R])&&(I=(D<3?m(I):D>3?m(_,S,I):m(_,S))||I);return D>3&&I&&Object.defineProperty(_,S,I),I},f=this&&this.__param||function(g,_){return function(S,w){_(S,w,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OverviewRulerRenderer=void 0;let l=s(5871),p=s(3656),y=s(4725),C=s(844),v=s(2585),c={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0},h=r.OverviewRulerRenderer=class extends C.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(g,_,S,w,m,D,I){var R;super(),this._viewportElement=g,this._screenElement=_,this._bufferService=S,this._decorationService=w,this._renderService=m,this._optionsService=D,this._coreBrowseService=I,this._colorZoneStore=new l.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(R=this._viewportElement.parentElement)===null||R===void 0||R.insertBefore(this._canvas,this._viewportElement);let M=this._canvas.getContext("2d");if(!M)throw new Error("Ctx cannot be null");this._ctx=M,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,C.toDisposable)(()=>{var A;(A=this._canvas)===null||A===void 0||A.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,p.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let g=Math.floor(this._canvas.width/3),_=Math.ceil(this._canvas.width/3);d.full=this._canvas.width,d.left=g,d.center=_,d.right=g,this._refreshDrawHeightConstants(),u.full=0,u.left=0,u.center=d.left,u.right=d.left+d.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowseService.dpr);let g=this._canvas.height/this._bufferService.buffer.lines.length,_=Math.round(Math.max(Math.min(g,12),6)*this._coreBrowseService.dpr);c.left=_,c.center=_,c.right=_}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let _ of this._decorationService.decorations)this._colorZoneStore.addDecoration(_);this._ctx.lineWidth=1;let g=this._colorZoneStore.zones;for(let _ of g)_.position!=="full"&&this._renderColorZone(_);for(let _ of g)_.position==="full"&&this._renderColorZone(_);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(g){this._ctx.fillStyle=g.color,this._ctx.fillRect(u[g.position||"full"],Math.round((this._canvas.height-1)*(g.startBufferLine/this._bufferService.buffers.active.lines.length)-c[g.position||"full"]/2),d[g.position||"full"],Math.round((this._canvas.height-1)*((g.endBufferLine-g.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[g.position||"full"]))}_queueRefresh(g,_){this._shouldUpdateDimensions=g||this._shouldUpdateDimensions,this._shouldUpdateAnchor=_||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};r.OverviewRulerRenderer=h=a([f(2,v.IBufferService),f(3,v.IDecorationService),f(4,y.IRenderService),f(5,v.IOptionsService),f(6,y.ICoreBrowserService)],h)},2950:function(o,r,s){var a=this&&this.__decorate||function(v,c,d,u){var h,g=arguments.length,_=g<3?c:u===null?u=Object.getOwnPropertyDescriptor(c,d):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(v,c,d,u);else for(var S=v.length-1;S>=0;S--)(h=v[S])&&(_=(g<3?h(_):g>3?h(c,d,_):h(c,d))||_);return g>3&&_&&Object.defineProperty(c,d,_),_},f=this&&this.__param||function(v,c){return function(d,u){c(d,u,v)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionHelper=void 0;let l=s(4725),p=s(2585),y=s(2584),C=r.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(v,c,d,u,h,g){this._textarea=v,this._compositionView=c,this._bufferService=d,this._optionsService=u,this._coreService=h,this._renderService=g,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(v){this._compositionView.textContent=v.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(v){if(this._isComposing||this._isSendingComposition){if(v.keyCode===229||v.keyCode===16||v.keyCode===17||v.keyCode===18)return!1;this._finalizeComposition(!1)}return v.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(v){if(this._compositionView.classList.remove("active"),this._isComposing=!1,v){let c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let d;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,d=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),d.length>0&&this._coreService.triggerDataEvent(d,!0)}},0)}else{this._isSendingComposition=!1;let c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){let v=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let c=this._textarea.value,d=c.replace(v,"");this._dataAlreadySent=d,c.length>v.length?this._coreService.triggerDataEvent(d,!0):c.length<v.length?this._coreService.triggerDataEvent(`${y.C0.DEL}`,!0):c.length===v.length&&c!==v&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(v){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),d=this._renderService.dimensions.css.cell.height,u=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=u+"px",this._compositionView.style.height=d+"px",this._compositionView.style.lineHeight=d+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let g=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=u+"px",this._textarea.style.width=Math.max(g.width,1)+"px",this._textarea.style.height=Math.max(g.height,1)+"px",this._textarea.style.lineHeight=g.height+"px"}v||setTimeout(()=>this.updateCompositionElements(!0),0)}}};r.CompositionHelper=C=a([f(2,p.IBufferService),f(3,p.IOptionsService),f(4,p.ICoreService),f(5,l.IRenderService)],C)},9806:(o,r)=>{function s(a,f,l){let p=l.getBoundingClientRect(),y=a.getComputedStyle(l),C=parseInt(y.getPropertyValue("padding-left")),v=parseInt(y.getPropertyValue("padding-top"));return[f.clientX-p.left-C,f.clientY-p.top-v]}Object.defineProperty(r,"__esModule",{value:!0}),r.getCoords=r.getCoordsRelativeToElement=void 0,r.getCoordsRelativeToElement=s,r.getCoords=function(a,f,l,p,y,C,v,c,d){if(!C)return;let u=s(a,f,l);return u?(u[0]=Math.ceil((u[0]+(d?v/2:0))/v),u[1]=Math.ceil(u[1]/c),u[0]=Math.min(Math.max(u[0],1),p+(d?1:0)),u[1]=Math.min(Math.max(u[1],1),y),u):void 0}},9504:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.moveToCellSequence=void 0;let a=s(2584);function f(c,d,u,h){let g=c-l(c,u),_=d-l(d,u),S=Math.abs(g-_)-function(w,m,D){let I=0,R=w-l(w,D),M=m-l(m,D);for(let A=0;A<Math.abs(R-M);A++){let O=p(w,m)==="A"?-1:1,F=D.buffer.lines.get(R+O*A);F?.isWrapped&&I++}return I}(c,d,u);return v(S,C(p(c,d),h))}function l(c,d){let u=0,h=d.buffer.lines.get(c),g=h?.isWrapped;for(;g&&c>=0&&c<d.rows;)u++,h=d.buffer.lines.get(--c),g=h?.isWrapped;return u}function p(c,d){return c>d?"A":"B"}function y(c,d,u,h,g,_){let S=c,w=d,m="";for(;S!==u||w!==h;)S+=g?1:-1,g&&S>_.cols-1?(m+=_.buffer.translateBufferLineToString(w,!1,c,S),S=0,c=0,w++):!g&&S<0&&(m+=_.buffer.translateBufferLineToString(w,!1,0,c+1),S=_.cols-1,c=S,w--);return m+_.buffer.translateBufferLineToString(w,!1,c,S)}function C(c,d){let u=d?"O":"[";return a.C0.ESC+u+c}function v(c,d){c=Math.floor(c);let u="";for(let h=0;h<c;h++)u+=d;return u}r.moveToCellSequence=function(c,d,u,h){let g=u.buffer.x,_=u.buffer.y;if(!u.buffer.hasScrollback)return function(m,D,I,R,M,A){return f(D,R,M,A).length===0?"":v(y(m,D,m,D-l(D,M),!1,M).length,C("D",A))}(g,_,0,d,u,h)+f(_,d,u,h)+function(m,D,I,R,M,A){let O;O=f(D,R,M,A).length>0?R-l(R,M):D;let F=R,H=function(B,E,x,T,k,j){let V;return V=f(x,T,k,j).length>0?T-l(T,k):E,B<x&&V<=T||B>=x&&V<T?"C":"D"}(m,D,I,R,M,A);return v(y(m,O,I,F,H==="C",M).length,C(H,A))}(g,_,c,d,u,h);let S;if(_===d)return S=g>c?"D":"C",v(Math.abs(g-c),C(S,h));S=_>d?"D":"C";let w=Math.abs(_-d);return v(function(m,D){return D.cols-m}(_>d?c:g,u)+(w-1)*u.cols+1+((_>d?g:c)-1),C(S,h))}},1296:function(o,r,s){var a=this&&this.__decorate||function(M,A,O,F){var H,B=arguments.length,E=B<3?A:F===null?F=Object.getOwnPropertyDescriptor(A,O):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(M,A,O,F);else for(var x=M.length-1;x>=0;x--)(H=M[x])&&(E=(B<3?H(E):B>3?H(A,O,E):H(A,O))||E);return B>3&&E&&Object.defineProperty(A,O,E),E},f=this&&this.__param||function(M,A){return function(O,F){A(O,F,M)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRenderer=void 0;let l=s(3787),p=s(2550),y=s(2223),C=s(6171),v=s(4725),c=s(8055),d=s(8460),u=s(844),h=s(2585),g="xterm-dom-renderer-owner-",_="xterm-rows",S="xterm-fg-",w="xterm-bg-",m="xterm-focus",D="xterm-selection",I=1,R=r.DomRenderer=class extends u.Disposable{constructor(M,A,O,F,H,B,E,x,T,k){super(),this._element=M,this._screenElement=A,this._viewportElement=O,this._linkifier2=F,this._charSizeService=B,this._optionsService=E,this._bufferService=x,this._coreBrowserService=T,this._themeService=k,this._terminalClass=I++,this._rowElements=[],this.onRequestRedraw=this.register(new d.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(_),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(D),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,C.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(j=>this._injectCss(j))),this._injectCss(this._themeService.colors),this._rowFactory=H.createInstance(l.DomRendererRowFactory,document),this._element.classList.add(g+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(j=>this._handleLinkHover(j))),this.register(this._linkifier2.onHideLinkUnderline(j=>this._handleLinkLeave(j))),this.register((0,u.toDisposable)(()=>{this._element.classList.remove(g+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new p.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){let M=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*M,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*M),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/M),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/M),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let O of this._rowElements)O.style.width=`${this.dimensions.css.canvas.width}px`,O.style.height=`${this.dimensions.css.cell.height}px`,O.style.lineHeight=`${this.dimensions.css.cell.height}px`,O.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let A=`${this._terminalSelector} .${_} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=A,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(M){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let A=`${this._terminalSelector} .${_} { color: ${M.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;A+=`${this._terminalSelector} .${_} .xterm-dim { color: ${c.color.multiplyOpacity(M.foreground,.5).css};}`,A+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,A+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",A+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${M.cursor.css};  color: ${M.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${M.cursor.css}; }}`,A+=`${this._terminalSelector} .${_}.${m} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_}.${m} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-block { background-color: ${M.cursor.css}; color: ${M.cursorAccent.css};}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${M.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${M.cursor.css} inset;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${M.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,A+=`${this._terminalSelector} .${D} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${D} div { position: absolute; background-color: ${M.selectionBackgroundOpaque.css};}${this._terminalSelector} .${D} div { position: absolute; background-color: ${M.selectionInactiveBackgroundOpaque.css};}`;for(let[O,F]of M.ansi.entries())A+=`${this._terminalSelector} .${S}${O} { color: ${F.css}; }${this._terminalSelector} .${S}${O}.xterm-dim { color: ${c.color.multiplyOpacity(F,.5).css}; }${this._terminalSelector} .${w}${O} { background-color: ${F.css}; }`;A+=`${this._terminalSelector} .${S}${y.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(M.background).css}; }${this._terminalSelector} .${S}${y.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(M.background),.5).css}; }${this._terminalSelector} .${w}${y.INVERTED_DEFAULT_COLOR} { background-color: ${M.foreground.css}; }`,this._themeStyleElement.textContent=A}_setDefaultSpacing(){let M=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${M}px`,this._rowFactory.defaultSpacing=M}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(M,A){for(let O=this._rowElements.length;O<=A;O++){let F=document.createElement("div");this._rowContainer.appendChild(F),this._rowElements.push(F)}for(;this._rowElements.length>A;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(M,A){this._refreshRowElements(M,A),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(m)}handleFocus(){this._rowContainer.classList.add(m),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(M,A,O){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(M,A,O),this.renderRows(0,this._bufferService.rows-1),!M||!A)return;let F=M[1]-this._bufferService.buffer.ydisp,H=A[1]-this._bufferService.buffer.ydisp,B=Math.max(F,0),E=Math.min(H,this._bufferService.rows-1);if(B>=this._bufferService.rows||E<0)return;let x=document.createDocumentFragment();if(O){let T=M[0]>A[0];x.appendChild(this._createSelectionElement(B,T?A[0]:M[0],T?M[0]:A[0],E-B+1))}else{let T=F===B?M[0]:0,k=B===H?A[0]:this._bufferService.cols;x.appendChild(this._createSelectionElement(B,T,k));let j=E-B-1;if(x.appendChild(this._createSelectionElement(B+1,0,this._bufferService.cols,j)),B!==E){let V=H===E?A[0]:this._bufferService.cols;x.appendChild(this._createSelectionElement(E,0,V))}}this._selectionContainer.appendChild(x)}_createSelectionElement(M,A,O,F=1){let H=document.createElement("div");return H.style.height=F*this.dimensions.css.cell.height+"px",H.style.top=M*this.dimensions.css.cell.height+"px",H.style.left=A*this.dimensions.css.cell.width+"px",H.style.width=this.dimensions.css.cell.width*(O-A)+"px",H}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(let M of this._rowElements)M.replaceChildren()}renderRows(M,A){let O=this._bufferService.buffer,F=O.ybase+O.y,H=Math.min(O.x,this._bufferService.cols-1),B=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,x=this._optionsService.rawOptions.cursorInactiveStyle;for(let T=M;T<=A;T++){let k=T+O.ydisp,j=this._rowElements[T],V=O.lines.get(k);if(!j||!V)break;j.replaceChildren(...this._rowFactory.createRow(V,k,k===F,E,x,H,B,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${g}${this._terminalClass}`}_handleLinkHover(M){this._setCellUnderline(M.x1,M.x2,M.y1,M.y2,M.cols,!0)}_handleLinkLeave(M){this._setCellUnderline(M.x1,M.x2,M.y1,M.y2,M.cols,!1)}_setCellUnderline(M,A,O,F,H,B){O<0&&(M=0),F<0&&(A=0);let E=this._bufferService.rows-1;O=Math.max(Math.min(O,E),0),F=Math.max(Math.min(F,E),0),H=Math.min(H,this._bufferService.cols);let x=this._bufferService.buffer,T=x.ybase+x.y,k=Math.min(x.x,H-1),j=this._optionsService.rawOptions.cursorBlink,V=this._optionsService.rawOptions.cursorStyle,W=this._optionsService.rawOptions.cursorInactiveStyle;for(let U=O;U<=F;++U){let se=U+x.ydisp,b=this._rowElements[U],N=x.lines.get(se);if(!b||!N)break;b.replaceChildren(...this._rowFactory.createRow(N,se,se===T,V,W,k,j,this.dimensions.css.cell.width,this._widthCache,B?U===O?M:0:-1,B?(U===F?A:H)-1:-1))}}};r.DomRenderer=R=a([f(4,h.IInstantiationService),f(5,v.ICharSizeService),f(6,h.IOptionsService),f(7,h.IBufferService),f(8,v.ICoreBrowserService),f(9,v.IThemeService)],R)},3787:function(o,r,s){var a=this&&this.__decorate||function(S,w,m,D){var I,R=arguments.length,M=R<3?w:D===null?D=Object.getOwnPropertyDescriptor(w,m):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(S,w,m,D);else for(var A=S.length-1;A>=0;A--)(I=S[A])&&(M=(R<3?I(M):R>3?I(w,m,M):I(w,m))||M);return R>3&&M&&Object.defineProperty(w,m,M),M},f=this&&this.__param||function(S,w){return function(m,D){w(m,D,S)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRendererRowFactory=void 0;let l=s(2223),p=s(643),y=s(511),C=s(2585),v=s(8055),c=s(4725),d=s(4269),u=s(6171),h=s(3734),g=r.DomRendererRowFactory=class{constructor(S,w,m,D,I,R,M){this._document=S,this._characterJoinerService=w,this._optionsService=m,this._coreBrowserService=D,this._coreService=I,this._decorationService=R,this._themeService=M,this._workCell=new y.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,w,m){this._selectionStart=S,this._selectionEnd=w,this._columnSelectMode=m}createRow(S,w,m,D,I,R,M,A,O,F,H){let B=[],E=this._characterJoinerService.getJoinedCharacters(w),x=this._themeService.colors,T,k=S.getNoBgTrimmedLength();m&&k<R+1&&(k=R+1);let j=0,V="",W=0,U=0,se=0,b=!1,N=0,P=!1,L=0,q=[],$=F!==-1&&H!==-1;for(let te=0;te<k;te++){S.loadCell(te,this._workCell);let ce=this._workCell.getWidth();if(ce===0)continue;let he=!1,mt=te,K=this._workCell;if(E.length>0&&te===E[0][0]){he=!0;let oe=E.shift();K=new d.JoinedCellData(this._workCell,S.translateToString(!0,oe[0],oe[1]),oe[1]-oe[0]),mt=oe[1]-1,ce=K.getWidth()}let Vt=this._isCellInSelection(te,w),Sr=m&&te===R,Dr=$&&te>=F&&te<=H,wr=!1;this._decorationService.forEachDecorationAtCell(te,w,void 0,oe=>{wr=!0});let _n=K.getChars()||p.WHITESPACE_CELL_CHAR;if(_n===" "&&(K.isUnderline()||K.isOverline())&&(_n="\xA0"),L=ce*A-O.get(_n,K.isBold(),K.isItalic()),T){if(j&&(Vt&&P||!Vt&&!P&&K.bg===W)&&(Vt&&P&&x.selectionForeground||K.fg===U)&&K.extended.ext===se&&Dr===b&&L===N&&!Sr&&!he&&!wr){V+=_n,j++;continue}j&&(T.textContent=V),T=this._document.createElement("span"),j=0,V=""}else T=this._document.createElement("span");if(W=K.bg,U=K.fg,se=K.extended.ext,b=Dr,N=L,P=Vt,he&&R>=te&&R<=mt&&(R=te),!this._coreService.isCursorHidden&&Sr){if(q.push("xterm-cursor"),this._coreBrowserService.isFocused)M&&q.push("xterm-cursor-blink"),q.push(D==="bar"?"xterm-cursor-bar":D==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(I)switch(I){case"outline":q.push("xterm-cursor-outline");break;case"block":q.push("xterm-cursor-block");break;case"bar":q.push("xterm-cursor-bar");break;case"underline":q.push("xterm-cursor-underline")}}if(K.isBold()&&q.push("xterm-bold"),K.isItalic()&&q.push("xterm-italic"),K.isDim()&&q.push("xterm-dim"),V=K.isInvisible()?p.WHITESPACE_CELL_CHAR:K.getChars()||p.WHITESPACE_CELL_CHAR,K.isUnderline()&&(q.push(`xterm-underline-${K.extended.underlineStyle}`),V===" "&&(V="\xA0"),!K.isUnderlineColorDefault()))if(K.isUnderlineColorRGB())T.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(K.getUnderlineColor()).join(",")})`;else{let oe=K.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&K.isBold()&&oe<8&&(oe+=8),T.style.textDecorationColor=x.ansi[oe].css}K.isOverline()&&(q.push("xterm-overline"),V===" "&&(V="\xA0")),K.isStrikethrough()&&q.push("xterm-strikethrough"),Dr&&(T.style.textDecoration="underline");let me=K.getFgColor(),$t=K.getFgColorMode(),Ie=K.getBgColor(),Ut=K.getBgColorMode(),br=!!K.isInverse();if(br){let oe=me;me=Ie,Ie=oe;let El=$t;$t=Ut,Ut=El}let ze,Er,qe,Wt=!1;switch(this._decorationService.forEachDecorationAtCell(te,w,void 0,oe=>{oe.options.layer!=="top"&&Wt||(oe.backgroundColorRGB&&(Ut=50331648,Ie=oe.backgroundColorRGB.rgba>>8&16777215,ze=oe.backgroundColorRGB),oe.foregroundColorRGB&&($t=50331648,me=oe.foregroundColorRGB.rgba>>8&16777215,Er=oe.foregroundColorRGB),Wt=oe.options.layer==="top")}),!Wt&&Vt&&(ze=this._coreBrowserService.isFocused?x.selectionBackgroundOpaque:x.selectionInactiveBackgroundOpaque,Ie=ze.rgba>>8&16777215,Ut=50331648,Wt=!0,x.selectionForeground&&($t=50331648,me=x.selectionForeground.rgba>>8&16777215,Er=x.selectionForeground)),Wt&&q.push("xterm-decoration-top"),Ut){case 16777216:case 33554432:qe=x.ansi[Ie],q.push(`xterm-bg-${Ie}`);break;case 50331648:qe=v.rgba.toColor(Ie>>16,Ie>>8&255,255&Ie),this._addStyle(T,`background-color:#${_((Ie>>>0).toString(16),"0",6)}`);break;default:br?(qe=x.foreground,q.push(`xterm-bg-${l.INVERTED_DEFAULT_COLOR}`)):qe=x.background}switch(ze||K.isDim()&&(ze=v.color.multiplyOpacity(qe,.5)),$t){case 16777216:case 33554432:K.isBold()&&me<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(me+=8),this._applyMinimumContrast(T,qe,x.ansi[me],K,ze,void 0)||q.push(`xterm-fg-${me}`);break;case 50331648:let oe=v.rgba.toColor(me>>16&255,me>>8&255,255&me);this._applyMinimumContrast(T,qe,oe,K,ze,Er)||this._addStyle(T,`color:#${_(me.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(T,qe,x.foreground,K,ze,void 0)||br&&q.push(`xterm-fg-${l.INVERTED_DEFAULT_COLOR}`)}q.length&&(T.className=q.join(" "),q.length=0),Sr||he||wr?T.textContent=V:j++,L!==this.defaultSpacing&&(T.style.letterSpacing=`${L}px`),B.push(T),te=mt}return T&&j&&(T.textContent=V),B}_applyMinimumContrast(S,w,m,D,I,R){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,u.excludeFromContrastRatioDemands)(D.getCode()))return!1;let M=this._getContrastCache(D),A;if(I||R||(A=M.getColor(w.rgba,m.rgba)),A===void 0){let O=this._optionsService.rawOptions.minimumContrastRatio/(D.isDim()?2:1);A=v.color.ensureContrastRatio(I||w,R||m,O),M.setColor((I||w).rgba,(R||m).rgba,A??null)}return!!A&&(this._addStyle(S,`color:${A.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,w){S.setAttribute("style",`${S.getAttribute("style")||""}${w};`)}_isCellInSelection(S,w){let m=this._selectionStart,D=this._selectionEnd;return!(!m||!D)&&(this._columnSelectMode?m[0]<=D[0]?S>=m[0]&&w>=m[1]&&S<D[0]&&w<=D[1]:S<m[0]&&w>=m[1]&&S>=D[0]&&w<=D[1]:w>m[1]&&w<D[1]||m[1]===D[1]&&w===m[1]&&S>=m[0]&&S<D[0]||m[1]<D[1]&&w===D[1]&&S<D[0]||m[1]<D[1]&&w===m[1]&&S>=m[0])}};function _(S,w,m){for(;S.length<m;)S=w+S;return S}r.DomRendererRowFactory=g=a([f(1,c.ICharacterJoinerService),f(2,C.IOptionsService),f(3,c.ICoreBrowserService),f(4,C.ICoreService),f(5,C.IDecorationService),f(6,c.IThemeService)],g)},2550:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WidthCache=void 0,r.WidthCache=class{constructor(s){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=s.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";let a=s.createElement("span"),f=s.createElement("span");f.style.fontWeight="bold";let l=s.createElement("span");l.style.fontStyle="italic";let p=s.createElement("span");p.style.fontWeight="bold",p.style.fontStyle="italic",this._measureElements=[a,f,l,p],this._container.appendChild(a),this._container.appendChild(f),this._container.appendChild(l),this._container.appendChild(p),s.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(s,a,f,l){s===this._font&&a===this._fontSize&&f===this._weight&&l===this._weightBold||(this._font=s,this._fontSize=a,this._weight=f,this._weightBold=l,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${l}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${l}`,this.clear())}get(s,a,f){let l=0;if(!a&&!f&&s.length===1&&(l=s.charCodeAt(0))<256)return this._flat[l]!==-9999?this._flat[l]:this._flat[l]=this._measure(s,0);let p=s;a&&(p+="B"),f&&(p+="I");let y=this._holey.get(p);if(y===void 0){let C=0;a&&(C|=1),f&&(C|=2),y=this._measure(s,C),this._holey.set(p,y)}return y}_measure(s,a){let f=this._measureElements[a];return f.textContent=s.repeat(32),f.offsetWidth/32}}},2223:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;let a=s(6114);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=a.isFirefox||a.isLegacyEdge?"bottom":"ideographic"},6171:(o,r)=>{function s(a){return 57508<=a&&a<=57558}Object.defineProperty(r,"__esModule",{value:!0}),r.createRenderDimensions=r.excludeFromContrastRatioDemands=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(a){if(!a)throw new Error("value must not be falsy");return a},r.isPowerlineGlyph=s,r.isRestrictedPowerlineGlyph=function(a){return 57520<=a&&a<=57527},r.excludeFromContrastRatioDemands=function(a){return s(a)||function(f){return 9472<=f&&f<=9631}(a)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionModel=void 0,r.SelectionModel=class{constructor(s){this._bufferService=s,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let s=this.selectionStart[0]+this.selectionStartLength;return s>this._bufferService.cols?s%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(s/this._bufferService.cols)-1]:[s%this._bufferService.cols,this.selectionStart[1]+Math.floor(s/this._bufferService.cols)]:[s,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let s=this.selectionStart[0]+this.selectionStartLength;return s>this._bufferService.cols?[s%this._bufferService.cols,this.selectionStart[1]+Math.floor(s/this._bufferService.cols)]:[Math.max(s,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let s=this.selectionStart,a=this.selectionEnd;return!(!s||!a)&&(s[1]>a[1]||s[1]===a[1]&&s[0]>a[0])}handleTrim(s){return this.selectionStart&&(this.selectionStart[1]-=s),this.selectionEnd&&(this.selectionEnd[1]-=s),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(o,r,s){var a=this&&this.__decorate||function(c,d,u,h){var g,_=arguments.length,S=_<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,d,u,h);else for(var w=c.length-1;w>=0;w--)(g=c[w])&&(S=(_<3?g(S):_>3?g(d,u,S):g(d,u))||S);return _>3&&S&&Object.defineProperty(d,u,S),S},f=this&&this.__param||function(c,d){return function(u,h){d(u,h,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharSizeService=void 0;let l=s(2585),p=s(8460),y=s(844),C=r.CharSizeService=class extends y.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(c,d,u){super(),this._optionsService=u,this.width=0,this.height=0,this._onCharSizeChange=this.register(new p.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new v(c,d,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){let c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())}};r.CharSizeService=C=a([f(2,l.IOptionsService)],C);class v{constructor(d,u,h){this._document=d,this._parentElement=u,this._optionsService=h,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let d={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return d.width!==0&&d.height!==0&&(this._result.width=d.width/32,this._result.height=Math.ceil(d.height)),this._result}}},4269:function(o,r,s){var a=this&&this.__decorate||function(d,u,h,g){var _,S=arguments.length,w=S<3?u:g===null?g=Object.getOwnPropertyDescriptor(u,h):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(d,u,h,g);else for(var m=d.length-1;m>=0;m--)(_=d[m])&&(w=(S<3?_(w):S>3?_(u,h,w):_(u,h))||w);return S>3&&w&&Object.defineProperty(u,h,w),w},f=this&&this.__param||function(d,u){return function(h,g){u(h,g,d)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharacterJoinerService=r.JoinedCellData=void 0;let l=s(3734),p=s(643),y=s(511),C=s(2585);class v extends l.AttributeData{constructor(u,h,g){super(),this.content=0,this.combinedData="",this.fg=u.fg,this.bg=u.bg,this.combinedData=h,this._width=g}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(u){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.JoinedCellData=v;let c=r.CharacterJoinerService=class ml{constructor(u){this._bufferService=u,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new y.CellData}register(u){let h={id:this._nextCharacterJoinerId++,handler:u};return this._characterJoiners.push(h),h.id}deregister(u){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===u)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(u){if(this._characterJoiners.length===0)return[];let h=this._bufferService.buffer.lines.get(u);if(!h||h.length===0)return[];let g=[],_=h.translateToString(!0),S=0,w=0,m=0,D=h.getFg(0),I=h.getBg(0);for(let R=0;R<h.getTrimmedLength();R++)if(h.loadCell(R,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==D||this._workCell.bg!==I){if(R-S>1){let M=this._getJoinedRanges(_,m,w,h,S);for(let A=0;A<M.length;A++)g.push(M[A])}S=R,m=w,D=this._workCell.fg,I=this._workCell.bg}w+=this._workCell.getChars().length||p.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){let R=this._getJoinedRanges(_,m,w,h,S);for(let M=0;M<R.length;M++)g.push(R[M])}return g}_getJoinedRanges(u,h,g,_,S){let w=u.substring(h,g),m=[];try{m=this._characterJoiners[0].handler(w)}catch(D){console.error(D)}for(let D=1;D<this._characterJoiners.length;D++)try{let I=this._characterJoiners[D].handler(w);for(let R=0;R<I.length;R++)ml._mergeRanges(m,I[R])}catch(I){console.error(I)}return this._stringRangesToCellRanges(m,_,S),m}_stringRangesToCellRanges(u,h,g){let _=0,S=!1,w=0,m=u[_];if(m){for(let D=g;D<this._bufferService.cols;D++){let I=h.getWidth(D),R=h.getString(D).length||p.WHITESPACE_CELL_CHAR.length;if(I!==0){if(!S&&m[0]<=w&&(m[0]=D,S=!0),m[1]<=w){if(m[1]=D,m=u[++_],!m)break;m[0]<=w?(m[0]=D,S=!0):S=!1}w+=R}}m&&(m[1]=this._bufferService.cols)}}static _mergeRanges(u,h){let g=!1;for(let _=0;_<u.length;_++){let S=u[_];if(g){if(h[1]<=S[0])return u[_-1][1]=h[1],u;if(h[1]<=S[1])return u[_-1][1]=Math.max(h[1],S[1]),u.splice(_,1),u;u.splice(_,1),_--}else{if(h[1]<=S[0])return u.splice(_,0,h),u;if(h[1]<=S[1])return S[0]=Math.min(h[0],S[0]),u;h[0]<S[1]&&(S[0]=Math.min(h[0],S[0]),g=!0)}}return g?u[u.length-1][1]=h[1]:u.push(h),u}};r.CharacterJoinerService=c=a([f(0,C.IBufferService)],c)},5114:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreBrowserService=void 0,r.CoreBrowserService=class{constructor(s,a){this._textarea=s,this.window=a,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(o,r,s){var a=this&&this.__decorate||function(C,v,c,d){var u,h=arguments.length,g=h<3?v:d===null?d=Object.getOwnPropertyDescriptor(v,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(C,v,c,d);else for(var _=C.length-1;_>=0;_--)(u=C[_])&&(g=(h<3?u(g):h>3?u(v,c,g):u(v,c))||g);return h>3&&g&&Object.defineProperty(v,c,g),g},f=this&&this.__param||function(C,v){return function(c,d){v(c,d,C)}};Object.defineProperty(r,"__esModule",{value:!0}),r.MouseService=void 0;let l=s(4725),p=s(9806),y=r.MouseService=class{constructor(C,v){this._renderService=C,this._charSizeService=v}getCoords(C,v,c,d,u){return(0,p.getCoords)(window,C,v,c,d,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,u)}getMouseReportCoords(C,v){let c=(0,p.getCoordsRelativeToElement)(window,C,v);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};r.MouseService=y=a([f(0,l.IRenderService),f(1,l.ICharSizeService)],y)},3230:function(o,r,s){var a=this&&this.__decorate||function(g,_,S,w){var m,D=arguments.length,I=D<3?_:w===null?w=Object.getOwnPropertyDescriptor(_,S):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(g,_,S,w);else for(var R=g.length-1;R>=0;R--)(m=g[R])&&(I=(D<3?m(I):D>3?m(_,S,I):m(_,S))||I);return D>3&&I&&Object.defineProperty(_,S,I),I},f=this&&this.__param||function(g,_){return function(S,w){_(S,w,g)}};Object.defineProperty(r,"__esModule",{value:!0}),r.RenderService=void 0;let l=s(3656),p=s(6193),y=s(5596),C=s(4725),v=s(8460),c=s(844),d=s(7226),u=s(2585),h=r.RenderService=class extends c.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(g,_,S,w,m,D,I,R){if(super(),this._rowCount=g,this._charSizeService=w,this._renderer=this.register(new c.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new v.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new v.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new v.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new v.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new p.RenderDebouncer(I.window,(M,A)=>this._renderRows(M,A)),this.register(this._renderDebouncer),this._screenDprMonitor=new y.ScreenDprMonitor(I.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(D.onResize(()=>this._fullRefresh())),this.register(D.buffers.onBufferActivate(()=>{var M;return(M=this._renderer.value)===null||M===void 0?void 0:M.clear()})),this.register(S.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(m.onDecorationRegistered(()=>this._fullRefresh())),this.register(m.onDecorationRemoved(()=>this._fullRefresh())),this.register(S.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(D.cols,D.rows),this._fullRefresh()})),this.register(S.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(D.buffer.y,D.buffer.y,!0))),this.register((0,l.addDisposableDomListener)(I.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(R.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in I.window){let M=new I.window.IntersectionObserver(A=>this._handleIntersectionChange(A[A.length-1]),{threshold:0});M.observe(_),this.register({dispose:()=>M.disconnect()})}}_handleIntersectionChange(g){this._isPaused=g.isIntersecting===void 0?g.intersectionRatio===0:!g.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(g,_,S=!1){this._isPaused?this._needsFullRefresh=!0:(S||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(g,_,this._rowCount))}_renderRows(g,_){this._renderer.value&&(g=Math.min(g,this._rowCount-1),_=Math.min(_,this._rowCount-1),this._renderer.value.renderRows(g,_),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:g,end:_}),this._onRender.fire({start:g,end:_}),this._isNextRenderRedrawOnly=!0)}resize(g,_){this._rowCount=_,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(g){this._renderer.value=g,this._renderer.value.onRequestRedraw(_=>this.refreshRows(_.start,_.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(g){return this._renderDebouncer.addRefreshCallback(g)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var g,_;this._renderer.value&&((_=(g=this._renderer.value).clearTextureAtlas)===null||_===void 0||_.call(g),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(g,_){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(g,_)):this._renderer.value.handleResize(g,_),this._fullRefresh())}handleCharSizeChanged(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCharSizeChanged()}handleBlur(){var g;(g=this._renderer.value)===null||g===void 0||g.handleBlur()}handleFocus(){var g;(g=this._renderer.value)===null||g===void 0||g.handleFocus()}handleSelectionChanged(g,_,S){var w;this._selectionState.start=g,this._selectionState.end=_,this._selectionState.columnSelectMode=S,(w=this._renderer.value)===null||w===void 0||w.handleSelectionChanged(g,_,S)}handleCursorMove(){var g;(g=this._renderer.value)===null||g===void 0||g.handleCursorMove()}clear(){var g;(g=this._renderer.value)===null||g===void 0||g.clear()}};r.RenderService=h=a([f(2,u.IOptionsService),f(3,C.ICharSizeService),f(4,u.IDecorationService),f(5,u.IBufferService),f(6,C.ICoreBrowserService),f(7,C.IThemeService)],h)},9312:function(o,r,s){var a=this&&this.__decorate||function(m,D,I,R){var M,A=arguments.length,O=A<3?D:R===null?R=Object.getOwnPropertyDescriptor(D,I):R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(m,D,I,R);else for(var F=m.length-1;F>=0;F--)(M=m[F])&&(O=(A<3?M(O):A>3?M(D,I,O):M(D,I))||O);return A>3&&O&&Object.defineProperty(D,I,O),O},f=this&&this.__param||function(m,D){return function(I,R){D(I,R,m)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionService=void 0;let l=s(9806),p=s(9504),y=s(456),C=s(4725),v=s(8460),c=s(844),d=s(6114),u=s(4841),h=s(511),g=s(2585),_="\xA0",S=new RegExp(_,"g"),w=r.SelectionService=class extends c.Disposable{constructor(m,D,I,R,M,A,O,F,H){super(),this._element=m,this._screenElement=D,this._linkifier=I,this._bufferService=R,this._coreService=M,this._mouseService=A,this._optionsService=O,this._renderService=F,this._coreBrowserService=H,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new v.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new v.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new v.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new v.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=B=>this._handleMouseMove(B),this._mouseUpListener=B=>this._handleMouseUp(B),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(B=>this._handleTrim(B)),this.register(this._bufferService.buffers.onBufferActivate(B=>this._handleBufferActivate(B))),this.enable(),this._model=new y.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let m=this._model.finalSelectionStart,D=this._model.finalSelectionEnd;return!(!m||!D||m[0]===D[0]&&m[1]===D[1])}get selectionText(){let m=this._model.finalSelectionStart,D=this._model.finalSelectionEnd;if(!m||!D)return"";let I=this._bufferService.buffer,R=[];if(this._activeSelectionMode===3){if(m[0]===D[0])return"";let M=m[0]<D[0]?m[0]:D[0],A=m[0]<D[0]?D[0]:m[0];for(let O=m[1];O<=D[1];O++){let F=I.translateBufferLineToString(O,!0,M,A);R.push(F)}}else{let M=m[1]===D[1]?D[0]:void 0;R.push(I.translateBufferLineToString(m[1],!0,m[0],M));for(let A=m[1]+1;A<=D[1]-1;A++){let O=I.lines.get(A),F=I.translateBufferLineToString(A,!0);O?.isWrapped?R[R.length-1]+=F:R.push(F)}if(m[1]!==D[1]){let A=I.lines.get(D[1]),O=I.translateBufferLineToString(D[1],!0,0,D[0]);A&&A.isWrapped?R[R.length-1]+=O:R.push(O)}}return R.map(M=>M.replace(S," ")).join(d.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(m){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),d.isLinux&&m&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(m){let D=this._getMouseBufferCoords(m),I=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!!(I&&R&&D)&&this._areCoordsInSelection(D,I,R)}isCellInSelection(m,D){let I=this._model.finalSelectionStart,R=this._model.finalSelectionEnd;return!(!I||!R)&&this._areCoordsInSelection([m,D],I,R)}_areCoordsInSelection(m,D,I){return m[1]>D[1]&&m[1]<I[1]||D[1]===I[1]&&m[1]===D[1]&&m[0]>=D[0]&&m[0]<I[0]||D[1]<I[1]&&m[1]===I[1]&&m[0]<I[0]||D[1]<I[1]&&m[1]===D[1]&&m[0]>=D[0]}_selectWordAtCursor(m,D){var I,R;let M=(R=(I=this._linkifier.currentLink)===null||I===void 0?void 0:I.link)===null||R===void 0?void 0:R.range;if(M)return this._model.selectionStart=[M.start.x-1,M.start.y-1],this._model.selectionStartLength=(0,u.getRangeLength)(M,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let A=this._getMouseBufferCoords(m);return!!A&&(this._selectWordAt(A,D),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(m,D){this._model.clearSelection(),m=Math.max(m,0),D=Math.min(D,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,m],this._model.selectionEnd=[this._bufferService.cols,D],this.refresh(),this._onSelectionChange.fire()}_handleTrim(m){this._model.handleTrim(m)&&this.refresh()}_getMouseBufferCoords(m){let D=this._mouseService.getCoords(m,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(D)return D[0]--,D[1]--,D[1]+=this._bufferService.buffer.ydisp,D}_getMouseEventScrollAmount(m){let D=(0,l.getCoordsRelativeToElement)(this._coreBrowserService.window,m,this._screenElement)[1],I=this._renderService.dimensions.css.canvas.height;return D>=0&&D<=I?0:(D>I&&(D-=I),D=Math.min(Math.max(D,-50),50),D/=50,D/Math.abs(D)+Math.round(14*D))}shouldForceSelection(m){return d.isMac?m.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:m.shiftKey}handleMouseDown(m){if(this._mouseDownTimeStamp=m.timeStamp,(m.button!==2||!this.hasSelection)&&m.button===0){if(!this._enabled){if(!this.shouldForceSelection(m))return;m.stopPropagation()}m.preventDefault(),this._dragScrollAmount=0,this._enabled&&m.shiftKey?this._handleIncrementalClick(m):m.detail===1?this._handleSingleClick(m):m.detail===2?this._handleDoubleClick(m):m.detail===3&&this._handleTripleClick(m),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(m){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(m))}_handleSingleClick(m){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(m)?3:0,this._model.selectionStart=this._getMouseBufferCoords(m),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let D=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);D&&D.length!==this._model.selectionStart[0]&&D.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(m){this._selectWordAtCursor(m,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(m){let D=this._getMouseBufferCoords(m);D&&(this._activeSelectionMode=2,this._selectLineAt(D[1]))}shouldColumnSelect(m){return m.altKey&&!(d.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(m){if(m.stopImmediatePropagation(),!this._model.selectionStart)return;let D=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(m),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(m),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let I=this._bufferService.buffer;if(this._model.selectionEnd[1]<I.lines.length){let R=I.lines.get(this._model.selectionEnd[1]);R&&R.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}D&&D[0]===this._model.selectionEnd[0]&&D[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let m=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(m.ydisp+this._bufferService.rows,m.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=m.ydisp),this.refresh()}}_handleMouseUp(m){let D=m.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&D<500&&m.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let I=this._mouseService.getCoords(m,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(I&&I[0]!==void 0&&I[1]!==void 0){let R=(0,p.moveToCellSequence)(I[0]-1,I[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(R,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let m=this._model.finalSelectionStart,D=this._model.finalSelectionEnd,I=!(!m||!D||m[0]===D[0]&&m[1]===D[1]);I?m&&D&&(this._oldSelectionStart&&this._oldSelectionEnd&&m[0]===this._oldSelectionStart[0]&&m[1]===this._oldSelectionStart[1]&&D[0]===this._oldSelectionEnd[0]&&D[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(m,D,I)):this._oldHasSelection&&this._fireOnSelectionChange(m,D,I)}_fireOnSelectionChange(m,D,I){this._oldSelectionStart=m,this._oldSelectionEnd=D,this._oldHasSelection=I,this._onSelectionChange.fire()}_handleBufferActivate(m){this.clearSelection(),this._trimListener.dispose(),this._trimListener=m.activeBuffer.lines.onTrim(D=>this._handleTrim(D))}_convertViewportColToCharacterIndex(m,D){let I=D;for(let R=0;D>=R;R++){let M=m.loadCell(R,this._workCell).getChars().length;this._workCell.getWidth()===0?I--:M>1&&D!==R&&(I+=M-1)}return I}setSelection(m,D,I){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[m,D],this._model.selectionStartLength=I,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(m){this._isClickInSelection(m)||(this._selectWordAtCursor(m,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(m,D,I=!0,R=!0){if(m[0]>=this._bufferService.cols)return;let M=this._bufferService.buffer,A=M.lines.get(m[1]);if(!A)return;let O=M.translateBufferLineToString(m[1],!1),F=this._convertViewportColToCharacterIndex(A,m[0]),H=F,B=m[0]-F,E=0,x=0,T=0,k=0;if(O.charAt(F)===" "){for(;F>0&&O.charAt(F-1)===" ";)F--;for(;H<O.length&&O.charAt(H+1)===" ";)H++}else{let W=m[0],U=m[0];A.getWidth(W)===0&&(E++,W--),A.getWidth(U)===2&&(x++,U++);let se=A.getString(U).length;for(se>1&&(k+=se-1,H+=se-1);W>0&&F>0&&!this._isCharWordSeparator(A.loadCell(W-1,this._workCell));){A.loadCell(W-1,this._workCell);let b=this._workCell.getChars().length;this._workCell.getWidth()===0?(E++,W--):b>1&&(T+=b-1,F-=b-1),F--,W--}for(;U<A.length&&H+1<O.length&&!this._isCharWordSeparator(A.loadCell(U+1,this._workCell));){A.loadCell(U+1,this._workCell);let b=this._workCell.getChars().length;this._workCell.getWidth()===2?(x++,U++):b>1&&(k+=b-1,H+=b-1),H++,U++}}H++;let j=F+B-E+T,V=Math.min(this._bufferService.cols,H-F+E+x-T-k);if(D||O.slice(F,H).trim()!==""){if(I&&j===0&&A.getCodePoint(0)!==32){let W=M.lines.get(m[1]-1);if(W&&A.isWrapped&&W.getCodePoint(this._bufferService.cols-1)!==32){let U=this._getWordAt([this._bufferService.cols-1,m[1]-1],!1,!0,!1);if(U){let se=this._bufferService.cols-U.start;j-=se,V+=se}}}if(R&&j+V===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){let W=M.lines.get(m[1]+1);if(W?.isWrapped&&W.getCodePoint(0)!==32){let U=this._getWordAt([0,m[1]+1],!1,!1,!0);U&&(V+=U.length)}}return{start:j,length:V}}}_selectWordAt(m,D){let I=this._getWordAt(m,D);if(I){for(;I.start<0;)I.start+=this._bufferService.cols,m[1]--;this._model.selectionStart=[I.start,m[1]],this._model.selectionStartLength=I.length}}_selectToWordAt(m){let D=this._getWordAt(m,!0);if(D){let I=m[1];for(;D.start<0;)D.start+=this._bufferService.cols,I--;if(!this._model.areSelectionValuesReversed())for(;D.start+D.length>this._bufferService.cols;)D.length-=this._bufferService.cols,I++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?D.start:D.start+D.length,I]}}_isCharWordSeparator(m){return m.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(m.getChars())>=0}_selectLineAt(m){let D=this._bufferService.buffer.getWrappedRangeForLine(m),I={start:{x:0,y:D.first},end:{x:this._bufferService.cols-1,y:D.last}};this._model.selectionStart=[0,D.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,u.getRangeLength)(I,this._bufferService.cols)}};r.SelectionService=w=a([f(3,g.IBufferService),f(4,g.ICoreService),f(5,C.IMouseService),f(6,g.IOptionsService),f(7,C.IRenderService),f(8,C.ICoreBrowserService)],w)},4725:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IThemeService=r.ICharacterJoinerService=r.ISelectionService=r.IRenderService=r.IMouseService=r.ICoreBrowserService=r.ICharSizeService=void 0;let a=s(8343);r.ICharSizeService=(0,a.createDecorator)("CharSizeService"),r.ICoreBrowserService=(0,a.createDecorator)("CoreBrowserService"),r.IMouseService=(0,a.createDecorator)("MouseService"),r.IRenderService=(0,a.createDecorator)("RenderService"),r.ISelectionService=(0,a.createDecorator)("SelectionService"),r.ICharacterJoinerService=(0,a.createDecorator)("CharacterJoinerService"),r.IThemeService=(0,a.createDecorator)("ThemeService")},6731:function(o,r,s){var a=this&&this.__decorate||function(w,m,D,I){var R,M=arguments.length,A=M<3?m:I===null?I=Object.getOwnPropertyDescriptor(m,D):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(w,m,D,I);else for(var O=w.length-1;O>=0;O--)(R=w[O])&&(A=(M<3?R(A):M>3?R(m,D,A):R(m,D))||A);return M>3&&A&&Object.defineProperty(m,D,A),A},f=this&&this.__param||function(w,m){return function(D,I){m(D,I,w)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ThemeService=r.DEFAULT_ANSI_COLORS=void 0;let l=s(7239),p=s(8055),y=s(8460),C=s(844),v=s(2585),c=p.css.toColor("#ffffff"),d=p.css.toColor("#000000"),u=p.css.toColor("#ffffff"),h=p.css.toColor("#000000"),g={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};r.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let w=[p.css.toColor("#2e3436"),p.css.toColor("#cc0000"),p.css.toColor("#4e9a06"),p.css.toColor("#c4a000"),p.css.toColor("#3465a4"),p.css.toColor("#75507b"),p.css.toColor("#06989a"),p.css.toColor("#d3d7cf"),p.css.toColor("#555753"),p.css.toColor("#ef2929"),p.css.toColor("#8ae234"),p.css.toColor("#fce94f"),p.css.toColor("#729fcf"),p.css.toColor("#ad7fa8"),p.css.toColor("#34e2e2"),p.css.toColor("#eeeeec")],m=[0,95,135,175,215,255];for(let D=0;D<216;D++){let I=m[D/36%6|0],R=m[D/6%6|0],M=m[D%6];w.push({css:p.channels.toCss(I,R,M),rgba:p.channels.toRgba(I,R,M)})}for(let D=0;D<24;D++){let I=8+10*D;w.push({css:p.channels.toCss(I,I,I),rgba:p.channels.toRgba(I,I,I)})}return w})());let _=r.ThemeService=class extends C.Disposable{get colors(){return this._colors}constructor(w){super(),this._optionsService=w,this._contrastCache=new l.ColorContrastCache,this._halfContrastCache=new l.ColorContrastCache,this._onChangeColors=this.register(new y.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:d,cursor:u,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:g,selectionBackgroundOpaque:p.color.blend(d,g),selectionInactiveBackgroundTransparent:g,selectionInactiveBackgroundOpaque:p.color.blend(d,g),ansi:r.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(w={}){let m=this._colors;if(m.foreground=S(w.foreground,c),m.background=S(w.background,d),m.cursor=S(w.cursor,u),m.cursorAccent=S(w.cursorAccent,h),m.selectionBackgroundTransparent=S(w.selectionBackground,g),m.selectionBackgroundOpaque=p.color.blend(m.background,m.selectionBackgroundTransparent),m.selectionInactiveBackgroundTransparent=S(w.selectionInactiveBackground,m.selectionBackgroundTransparent),m.selectionInactiveBackgroundOpaque=p.color.blend(m.background,m.selectionInactiveBackgroundTransparent),m.selectionForeground=w.selectionForeground?S(w.selectionForeground,p.NULL_COLOR):void 0,m.selectionForeground===p.NULL_COLOR&&(m.selectionForeground=void 0),p.color.isOpaque(m.selectionBackgroundTransparent)&&(m.selectionBackgroundTransparent=p.color.opacity(m.selectionBackgroundTransparent,.3)),p.color.isOpaque(m.selectionInactiveBackgroundTransparent)&&(m.selectionInactiveBackgroundTransparent=p.color.opacity(m.selectionInactiveBackgroundTransparent,.3)),m.ansi=r.DEFAULT_ANSI_COLORS.slice(),m.ansi[0]=S(w.black,r.DEFAULT_ANSI_COLORS[0]),m.ansi[1]=S(w.red,r.DEFAULT_ANSI_COLORS[1]),m.ansi[2]=S(w.green,r.DEFAULT_ANSI_COLORS[2]),m.ansi[3]=S(w.yellow,r.DEFAULT_ANSI_COLORS[3]),m.ansi[4]=S(w.blue,r.DEFAULT_ANSI_COLORS[4]),m.ansi[5]=S(w.magenta,r.DEFAULT_ANSI_COLORS[5]),m.ansi[6]=S(w.cyan,r.DEFAULT_ANSI_COLORS[6]),m.ansi[7]=S(w.white,r.DEFAULT_ANSI_COLORS[7]),m.ansi[8]=S(w.brightBlack,r.DEFAULT_ANSI_COLORS[8]),m.ansi[9]=S(w.brightRed,r.DEFAULT_ANSI_COLORS[9]),m.ansi[10]=S(w.brightGreen,r.DEFAULT_ANSI_COLORS[10]),m.ansi[11]=S(w.brightYellow,r.DEFAULT_ANSI_COLORS[11]),m.ansi[12]=S(w.brightBlue,r.DEFAULT_ANSI_COLORS[12]),m.ansi[13]=S(w.brightMagenta,r.DEFAULT_ANSI_COLORS[13]),m.ansi[14]=S(w.brightCyan,r.DEFAULT_ANSI_COLORS[14]),m.ansi[15]=S(w.brightWhite,r.DEFAULT_ANSI_COLORS[15]),w.extendedAnsi){let D=Math.min(m.ansi.length-16,w.extendedAnsi.length);for(let I=0;I<D;I++)m.ansi[I+16]=S(w.extendedAnsi[I],r.DEFAULT_ANSI_COLORS[I+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(w){this._restoreColor(w),this._onChangeColors.fire(this.colors)}_restoreColor(w){if(w!==void 0)switch(w){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[w]=this._restoreColors.ansi[w]}else for(let m=0;m<this._restoreColors.ansi.length;++m)this._colors.ansi[m]=this._restoreColors.ansi[m]}modifyColors(w){w(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(w,m){if(w!==void 0)try{return p.css.toColor(w)}catch{}return m}r.ThemeService=_=a([f(0,v.IOptionsService)],_)},6349:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CircularList=void 0;let a=s(8460),f=s(844);class l extends f.Disposable{constructor(y){super(),this._maxLength=y,this.onDeleteEmitter=this.register(new a.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new a.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new a.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(y){if(this._maxLength===y)return;let C=new Array(y);for(let v=0;v<Math.min(y,this.length);v++)C[v]=this._array[this._getCyclicIndex(v)];this._array=C,this._maxLength=y,this._startIndex=0}get length(){return this._length}set length(y){if(y>this._length)for(let C=this._length;C<y;C++)this._array[C]=void 0;this._length=y}get(y){return this._array[this._getCyclicIndex(y)]}set(y,C){this._array[this._getCyclicIndex(y)]=C}push(y){this._array[this._getCyclicIndex(this._length)]=y,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(y,C,...v){if(C){for(let c=y;c<this._length-C;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+C)];this._length-=C,this.onDeleteEmitter.fire({index:y,amount:C})}for(let c=this._length-1;c>=y;c--)this._array[this._getCyclicIndex(c+v.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<v.length;c++)this._array[this._getCyclicIndex(y+c)]=v[c];if(v.length&&this.onInsertEmitter.fire({index:y,amount:v.length}),this._length+v.length>this._maxLength){let c=this._length+v.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=v.length}trimStart(y){y>this._length&&(y=this._length),this._startIndex+=y,this._length-=y,this.onTrimEmitter.fire(y)}shiftElements(y,C,v){if(!(C<=0)){if(y<0||y>=this._length)throw new Error("start argument out of range");if(y+v<0)throw new Error("Cannot shift elements in list beyond index 0");if(v>0){for(let d=C-1;d>=0;d--)this.set(y+d+v,this.get(y+d));let c=y+C+v-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<C;c++)this.set(y+c+v,this.get(y+c))}}_getCyclicIndex(y){return(this._startIndex+y)%this._maxLength}}r.CircularList=l},1439:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.clone=void 0,r.clone=function s(a,f=5){if(typeof a!="object")return a;let l=Array.isArray(a)?[]:{};for(let p in a)l[p]=f<=1?a[p]:a[p]&&s(a[p],f-1);return l}},8055:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;let a=s(6114),f=0,l=0,p=0,y=0;var C,v,c,d,u;function h(_){let S=_.toString(16);return S.length<2?"0"+S:S}function g(_,S){return _<S?(S+.05)/(_+.05):(_+.05)/(S+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},function(_){_.toCss=function(S,w,m,D){return D!==void 0?`#${h(S)}${h(w)}${h(m)}${h(D)}`:`#${h(S)}${h(w)}${h(m)}`},_.toRgba=function(S,w,m,D=255){return(S<<24|w<<16|m<<8|D)>>>0}}(C||(r.channels=C={})),function(_){function S(w,m){return y=Math.round(255*m),[f,l,p]=u.toChannels(w.rgba),{css:C.toCss(f,l,p,y),rgba:C.toRgba(f,l,p,y)}}_.blend=function(w,m){if(y=(255&m.rgba)/255,y===1)return{css:m.css,rgba:m.rgba};let D=m.rgba>>24&255,I=m.rgba>>16&255,R=m.rgba>>8&255,M=w.rgba>>24&255,A=w.rgba>>16&255,O=w.rgba>>8&255;return f=M+Math.round((D-M)*y),l=A+Math.round((I-A)*y),p=O+Math.round((R-O)*y),{css:C.toCss(f,l,p),rgba:C.toRgba(f,l,p)}},_.isOpaque=function(w){return(255&w.rgba)==255},_.ensureContrastRatio=function(w,m,D){let I=u.ensureContrastRatio(w.rgba,m.rgba,D);if(I)return u.toColor(I>>24&255,I>>16&255,I>>8&255)},_.opaque=function(w){let m=(255|w.rgba)>>>0;return[f,l,p]=u.toChannels(m),{css:C.toCss(f,l,p),rgba:m}},_.opacity=S,_.multiplyOpacity=function(w,m){return y=255&w.rgba,S(w,y*m/255)},_.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(v||(r.color=v={})),function(_){let S,w;if(!a.isNode){let m=document.createElement("canvas");m.width=1,m.height=1;let D=m.getContext("2d",{willReadFrequently:!0});D&&(S=D,S.globalCompositeOperation="copy",w=S.createLinearGradient(0,0,1,1))}_.toColor=function(m){if(m.match(/#[\da-f]{3,8}/i))switch(m.length){case 4:return f=parseInt(m.slice(1,2).repeat(2),16),l=parseInt(m.slice(2,3).repeat(2),16),p=parseInt(m.slice(3,4).repeat(2),16),u.toColor(f,l,p);case 5:return f=parseInt(m.slice(1,2).repeat(2),16),l=parseInt(m.slice(2,3).repeat(2),16),p=parseInt(m.slice(3,4).repeat(2),16),y=parseInt(m.slice(4,5).repeat(2),16),u.toColor(f,l,p,y);case 7:return{css:m,rgba:(parseInt(m.slice(1),16)<<8|255)>>>0};case 9:return{css:m,rgba:parseInt(m.slice(1),16)>>>0}}let D=m.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(D)return f=parseInt(D[1]),l=parseInt(D[2]),p=parseInt(D[3]),y=Math.round(255*(D[5]===void 0?1:parseFloat(D[5]))),u.toColor(f,l,p,y);if(!S||!w)throw new Error("css.toColor: Unsupported css format");if(S.fillStyle=w,S.fillStyle=m,typeof S.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(S.fillRect(0,0,1,1),[f,l,p,y]=S.getImageData(0,0,1,1).data,y!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:C.toRgba(f,l,p,y),css:m}}}(c||(r.css=c={})),function(_){function S(w,m,D){let I=w/255,R=m/255,M=D/255;return .2126*(I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4))+.7152*(R<=.03928?R/12.92:Math.pow((R+.055)/1.055,2.4))+.0722*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))}_.relativeLuminance=function(w){return S(w>>16&255,w>>8&255,255&w)},_.relativeLuminance2=S}(d||(r.rgb=d={})),function(_){function S(m,D,I){let R=m>>24&255,M=m>>16&255,A=m>>8&255,O=D>>24&255,F=D>>16&255,H=D>>8&255,B=g(d.relativeLuminance2(O,F,H),d.relativeLuminance2(R,M,A));for(;B<I&&(O>0||F>0||H>0);)O-=Math.max(0,Math.ceil(.1*O)),F-=Math.max(0,Math.ceil(.1*F)),H-=Math.max(0,Math.ceil(.1*H)),B=g(d.relativeLuminance2(O,F,H),d.relativeLuminance2(R,M,A));return(O<<24|F<<16|H<<8|255)>>>0}function w(m,D,I){let R=m>>24&255,M=m>>16&255,A=m>>8&255,O=D>>24&255,F=D>>16&255,H=D>>8&255,B=g(d.relativeLuminance2(O,F,H),d.relativeLuminance2(R,M,A));for(;B<I&&(O<255||F<255||H<255);)O=Math.min(255,O+Math.ceil(.1*(255-O))),F=Math.min(255,F+Math.ceil(.1*(255-F))),H=Math.min(255,H+Math.ceil(.1*(255-H))),B=g(d.relativeLuminance2(O,F,H),d.relativeLuminance2(R,M,A));return(O<<24|F<<16|H<<8|255)>>>0}_.ensureContrastRatio=function(m,D,I){let R=d.relativeLuminance(m>>8),M=d.relativeLuminance(D>>8);if(g(R,M)<I){if(M<R){let F=S(m,D,I),H=g(R,d.relativeLuminance(F>>8));if(H<I){let B=w(m,D,I);return H>g(R,d.relativeLuminance(B>>8))?F:B}return F}let A=w(m,D,I),O=g(R,d.relativeLuminance(A>>8));if(O<I){let F=S(m,D,I);return O>g(R,d.relativeLuminance(F>>8))?A:F}return A}},_.reduceLuminance=S,_.increaseLuminance=w,_.toChannels=function(m){return[m>>24&255,m>>16&255,m>>8&255,255&m]},_.toColor=function(m,D,I,R){return{css:C.toCss(m,D,I,R),rgba:C.toRgba(m,D,I,R)}}}(u||(r.rgba=u={})),r.toPaddedHex=h,r.contrastRatio=g},8969:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreTerminal=void 0;let a=s(844),f=s(2585),l=s(4348),p=s(7866),y=s(744),C=s(7302),v=s(6975),c=s(8460),d=s(1753),u=s(1480),h=s(7994),g=s(9282),_=s(5435),S=s(5981),w=s(2660),m=!1;class D extends a.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event(R=>{var M;(M=this._onScrollApi)===null||M===void 0||M.fire(R.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(R){for(let M in R)this.optionsService.options[M]=R[M]}constructor(R){super(),this._windowsWrappingHeuristics=this.register(new a.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new l.InstantiationService,this.optionsService=this.register(new C.OptionsService(R)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(y.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(p.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(v.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(d.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(u.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(w.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new _.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(M=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(M=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((M,A)=>this._inputHandler.parse(M,A))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(R,M){this._writeBuffer.write(R,M)}writeSync(R,M){this._logService.logLevel<=f.LogLevelEnum.WARN&&!m&&(this._logService.warn("writeSync is unreliable and will be removed soon."),m=!0),this._writeBuffer.writeSync(R,M)}resize(R,M){isNaN(R)||isNaN(M)||(R=Math.max(R,y.MINIMUM_COLS),M=Math.max(M,y.MINIMUM_ROWS),this._bufferService.resize(R,M))}scroll(R,M=!1){this._bufferService.scroll(R,M)}scrollLines(R,M,A){this._bufferService.scrollLines(R,M,A)}scrollPages(R){this.scrollLines(R*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(R){let M=R-this._bufferService.buffer.ydisp;M!==0&&this.scrollLines(M)}registerEscHandler(R,M){return this._inputHandler.registerEscHandler(R,M)}registerDcsHandler(R,M){return this._inputHandler.registerDcsHandler(R,M)}registerCsiHandler(R,M){return this._inputHandler.registerCsiHandler(R,M)}registerOscHandler(R,M){return this._inputHandler.registerOscHandler(R,M)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let R=!1,M=this.optionsService.rawOptions.windowsPty;M&&M.buildNumber!==void 0&&M.buildNumber!==void 0?R=M.backend==="conpty"&&M.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(R=!0),R?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){let R=[];R.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),R.push(this.registerCsiHandler({final:"H"},()=>((0,g.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,a.toDisposable)(()=>{for(let M of R)M.dispose()})}}}r.CoreTerminal=D},8460:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=s=>(this._listeners.push(s),{dispose:()=>{if(!this._disposed){for(let a=0;a<this._listeners.length;a++)if(this._listeners[a]===s)return void this._listeners.splice(a,1)}}})),this._event}fire(s,a){let f=[];for(let l=0;l<this._listeners.length;l++)f.push(this._listeners[l]);for(let l=0;l<f.length;l++)f[l].call(void 0,s,a)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(s,a){return s(f=>a.fire(f))}},5435:function(o,r,s){var a=this&&this.__decorate||function(B,E,x,T){var k,j=arguments.length,V=j<3?E:T===null?T=Object.getOwnPropertyDescriptor(E,x):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(B,E,x,T);else for(var W=B.length-1;W>=0;W--)(k=B[W])&&(V=(j<3?k(V):j>3?k(E,x,V):k(E,x))||V);return j>3&&V&&Object.defineProperty(E,x,V),V},f=this&&this.__param||function(B,E){return function(x,T){E(x,T,B)}};Object.defineProperty(r,"__esModule",{value:!0}),r.InputHandler=r.WindowsOptionsReportType=void 0;let l=s(2584),p=s(7116),y=s(2015),C=s(844),v=s(482),c=s(8437),d=s(8460),u=s(643),h=s(511),g=s(3734),_=s(2585),S=s(6242),w=s(6351),m=s(5941),D={"(":0,")":1,"*":2,"+":3,"-":1,".":2},I=131072;function R(B,E){if(B>24)return E.setWinLines||!1;switch(B){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var M;(function(B){B[B.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",B[B.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(M||(r.WindowsOptionsReportType=M={}));let A=0;class O extends C.Disposable{getAttrData(){return this._curAttrData}constructor(E,x,T,k,j,V,W,U,se=new y.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=x,this._coreService=T,this._logService=k,this._optionsService=j,this._oscLinkService=V,this._coreMouseService=W,this._unicodeService=U,this._parser=se,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new v.StringToUtf32,this._utf8Decoder=new v.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new d.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new d.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new d.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new d.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new d.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new d.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new d.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new d.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new d.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new d.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new d.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new F(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._parser.setCsiHandlerFallback((b,N)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(b),params:N.toArray()})}),this._parser.setEscHandlerFallback(b=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(b)})}),this._parser.setExecuteHandlerFallback(b=>{this._logService.debug("Unknown EXECUTE code: ",{code:b})}),this._parser.setOscHandlerFallback((b,N,P)=>{this._logService.debug("Unknown OSC code: ",{identifier:b,action:N,data:P})}),this._parser.setDcsHandlerFallback((b,N,P)=>{N==="HOOK"&&(P=P.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(b),action:N,payload:P})}),this._parser.setPrintHandler((b,N,P)=>this.print(b,N,P)),this._parser.registerCsiHandler({final:"@"},b=>this.insertChars(b)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},b=>this.scrollLeft(b)),this._parser.registerCsiHandler({final:"A"},b=>this.cursorUp(b)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},b=>this.scrollRight(b)),this._parser.registerCsiHandler({final:"B"},b=>this.cursorDown(b)),this._parser.registerCsiHandler({final:"C"},b=>this.cursorForward(b)),this._parser.registerCsiHandler({final:"D"},b=>this.cursorBackward(b)),this._parser.registerCsiHandler({final:"E"},b=>this.cursorNextLine(b)),this._parser.registerCsiHandler({final:"F"},b=>this.cursorPrecedingLine(b)),this._parser.registerCsiHandler({final:"G"},b=>this.cursorCharAbsolute(b)),this._parser.registerCsiHandler({final:"H"},b=>this.cursorPosition(b)),this._parser.registerCsiHandler({final:"I"},b=>this.cursorForwardTab(b)),this._parser.registerCsiHandler({final:"J"},b=>this.eraseInDisplay(b,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},b=>this.eraseInDisplay(b,!0)),this._parser.registerCsiHandler({final:"K"},b=>this.eraseInLine(b,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},b=>this.eraseInLine(b,!0)),this._parser.registerCsiHandler({final:"L"},b=>this.insertLines(b)),this._parser.registerCsiHandler({final:"M"},b=>this.deleteLines(b)),this._parser.registerCsiHandler({final:"P"},b=>this.deleteChars(b)),this._parser.registerCsiHandler({final:"S"},b=>this.scrollUp(b)),this._parser.registerCsiHandler({final:"T"},b=>this.scrollDown(b)),this._parser.registerCsiHandler({final:"X"},b=>this.eraseChars(b)),this._parser.registerCsiHandler({final:"Z"},b=>this.cursorBackwardTab(b)),this._parser.registerCsiHandler({final:"`"},b=>this.charPosAbsolute(b)),this._parser.registerCsiHandler({final:"a"},b=>this.hPositionRelative(b)),this._parser.registerCsiHandler({final:"b"},b=>this.repeatPrecedingCharacter(b)),this._parser.registerCsiHandler({final:"c"},b=>this.sendDeviceAttributesPrimary(b)),this._parser.registerCsiHandler({prefix:">",final:"c"},b=>this.sendDeviceAttributesSecondary(b)),this._parser.registerCsiHandler({final:"d"},b=>this.linePosAbsolute(b)),this._parser.registerCsiHandler({final:"e"},b=>this.vPositionRelative(b)),this._parser.registerCsiHandler({final:"f"},b=>this.hVPosition(b)),this._parser.registerCsiHandler({final:"g"},b=>this.tabClear(b)),this._parser.registerCsiHandler({final:"h"},b=>this.setMode(b)),this._parser.registerCsiHandler({prefix:"?",final:"h"},b=>this.setModePrivate(b)),this._parser.registerCsiHandler({final:"l"},b=>this.resetMode(b)),this._parser.registerCsiHandler({prefix:"?",final:"l"},b=>this.resetModePrivate(b)),this._parser.registerCsiHandler({final:"m"},b=>this.charAttributes(b)),this._parser.registerCsiHandler({final:"n"},b=>this.deviceStatus(b)),this._parser.registerCsiHandler({prefix:"?",final:"n"},b=>this.deviceStatusPrivate(b)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},b=>this.softReset(b)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},b=>this.setCursorStyle(b)),this._parser.registerCsiHandler({final:"r"},b=>this.setScrollRegion(b)),this._parser.registerCsiHandler({final:"s"},b=>this.saveCursor(b)),this._parser.registerCsiHandler({final:"t"},b=>this.windowOptions(b)),this._parser.registerCsiHandler({final:"u"},b=>this.restoreCursor(b)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},b=>this.insertColumns(b)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},b=>this.deleteColumns(b)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},b=>this.selectProtected(b)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},b=>this.requestMode(b,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},b=>this.requestMode(b,!1)),this._parser.setExecuteHandler(l.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(l.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(l.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(l.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(l.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(l.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(l.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(l.C1.IND,()=>this.index()),this._parser.setExecuteHandler(l.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(l.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new S.OscHandler(b=>(this.setTitle(b),this.setIconName(b),!0))),this._parser.registerOscHandler(1,new S.OscHandler(b=>this.setIconName(b))),this._parser.registerOscHandler(2,new S.OscHandler(b=>this.setTitle(b))),this._parser.registerOscHandler(4,new S.OscHandler(b=>this.setOrReportIndexedColor(b))),this._parser.registerOscHandler(8,new S.OscHandler(b=>this.setHyperlink(b))),this._parser.registerOscHandler(10,new S.OscHandler(b=>this.setOrReportFgColor(b))),this._parser.registerOscHandler(11,new S.OscHandler(b=>this.setOrReportBgColor(b))),this._parser.registerOscHandler(12,new S.OscHandler(b=>this.setOrReportCursorColor(b))),this._parser.registerOscHandler(104,new S.OscHandler(b=>this.restoreIndexedColor(b))),this._parser.registerOscHandler(110,new S.OscHandler(b=>this.restoreFgColor(b))),this._parser.registerOscHandler(111,new S.OscHandler(b=>this.restoreBgColor(b))),this._parser.registerOscHandler(112,new S.OscHandler(b=>this.restoreCursorColor(b))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let b in p.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:b},()=>this.selectCharset("("+b)),this._parser.registerEscHandler({intermediates:")",final:b},()=>this.selectCharset(")"+b)),this._parser.registerEscHandler({intermediates:"*",final:b},()=>this.selectCharset("*"+b)),this._parser.registerEscHandler({intermediates:"+",final:b},()=>this.selectCharset("+"+b)),this._parser.registerEscHandler({intermediates:"-",final:b},()=>this.selectCharset("-"+b)),this._parser.registerEscHandler({intermediates:".",final:b},()=>this.selectCharset("."+b)),this._parser.registerEscHandler({intermediates:"/",final:b},()=>this.selectCharset("/"+b));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(b=>(this._logService.error("Parsing error: ",b),b)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new w.DcsHandler((b,N)=>this.requestStatusString(b,N)))}_preserveStack(E,x,T,k){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=x,this._parseStack.decodedLength=T,this._parseStack.position=k}_logSlowResolvingAsync(E){this._logService.logLevel<=_.LogLevelEnum.WARN&&Promise.race([E,new Promise((x,T)=>setTimeout(()=>T("#SLOW_TIMEOUT"),5e3))]).catch(x=>{if(x!=="#SLOW_TIMEOUT")throw x;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,x){let T,k=this._activeBuffer.x,j=this._activeBuffer.y,V=0,W=this._parseStack.paused;if(W){if(T=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,x))return this._logSlowResolvingAsync(T),T;k=this._parseStack.cursorStartX,j=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>I&&(V=this._parseStack.position+I)}if(this._logService.logLevel<=_.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,U=>String.fromCharCode(U)).join("")}"`),typeof E=="string"?E.split("").map(U=>U.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<I&&(this._parseBuffer=new Uint32Array(Math.min(E.length,I))),W||this._dirtyRowTracker.clearRange(),E.length>I)for(let U=V;U<E.length;U+=I){let se=U+I<E.length?U+I:E.length,b=typeof E=="string"?this._stringDecoder.decode(E.substring(U,se),this._parseBuffer):this._utf8Decoder.decode(E.subarray(U,se),this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,b))return this._preserveStack(k,j,b,U),this._logSlowResolvingAsync(T),T}else if(!W){let U=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(T=this._parser.parse(this._parseBuffer,U))return this._preserveStack(k,j,U,0),this._logSlowResolvingAsync(T),T}this._activeBuffer.x===k&&this._activeBuffer.y===j||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(E,x,T){let k,j,V=this._charsetService.charset,W=this._optionsService.rawOptions.screenReaderMode,U=this._bufferService.cols,se=this._coreService.decPrivateModes.wraparound,b=this._coreService.modes.insertMode,N=this._curAttrData,P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&T-x>0&&P.getWidth(this._activeBuffer.x-1)===2&&P.setCellFromCodePoint(this._activeBuffer.x-1,0,1,N.fg,N.bg,N.extended);for(let L=x;L<T;++L){if(k=E[L],j=this._unicodeService.wcwidth(k),k<127&&V){let q=V[String.fromCharCode(k)];q&&(k=q.charCodeAt(0))}if(W&&this._onA11yChar.fire((0,v.stringFromCodePoint)(k)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),j||!this._activeBuffer.x){if(this._activeBuffer.x+j-1>=U){if(se){for(;this._activeBuffer.x<U;)P.setCellFromCodePoint(this._activeBuffer.x++,0,1,N.fg,N.bg,N.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=U-1,j===2)continue}if(b&&(P.insertCells(this._activeBuffer.x,j,this._activeBuffer.getNullCell(N),N),P.getWidth(U-1)===2&&P.setCellFromCodePoint(U-1,u.NULL_CELL_CODE,u.NULL_CELL_WIDTH,N.fg,N.bg,N.extended)),P.setCellFromCodePoint(this._activeBuffer.x++,k,j,N.fg,N.bg,N.extended),j>0)for(;--j;)P.setCellFromCodePoint(this._activeBuffer.x++,0,0,N.fg,N.bg,N.extended)}else P.getWidth(this._activeBuffer.x-1)?P.addCodepointToCell(this._activeBuffer.x-1,k):P.addCodepointToCell(this._activeBuffer.x-2,k)}T-x>0&&(P.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<U&&T-x>0&&P.getWidth(this._activeBuffer.x)===0&&!P.hasContent(this._activeBuffer.x)&&P.setCellFromCodePoint(this._activeBuffer.x,0,1,N.fg,N.bg,N.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,x){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,x):this._parser.registerCsiHandler(E,T=>!R(T.params[0],this._optionsService.rawOptions.windowOptions)||x(T))}registerDcsHandler(E,x){return this._parser.registerDcsHandler(E,new w.DcsHandler(x))}registerEscHandler(E,x){return this._parser.registerEscHandler(E,x)}registerOscHandler(E,x){return this._parser.registerOscHandler(E,new S.OscHandler(x))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0)&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);x.hasWidth(this._activeBuffer.x)&&!x.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,x){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+x):(this._activeBuffer.x=E,this._activeBuffer.y=x),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,x){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+x)}cursorUp(E){let x=this._activeBuffer.y-this._activeBuffer.scrollTop;return x>=0?this._moveCursor(0,-Math.min(x,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){let x=this._activeBuffer.scrollBottom-this._activeBuffer.y;return x>=0?this._moveCursor(0,Math.min(x,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){let x=E.params[0];return x===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:x===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let x=E.params[0]||1;for(;x--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let x=E.params[0]||1;for(;x--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){let x=E.params[0];return x===1&&(this._curAttrData.bg|=536870912),x!==2&&x!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,x,T,k=!1,j=!1){let V=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);V.replaceCells(x,T,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),j),k&&(V.isWrapped=!1)}_resetBufferLine(E,x=!1){let T=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);T&&(T.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),x),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),T.isWrapped=!1)}eraseInDisplay(E,x=!1){let T;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,x);T<this._bufferService.rows;T++)this._resetBufferLine(T,x);this._dirtyRowTracker.markDirty(T);break;case 1:for(T=this._activeBuffer.y,this._dirtyRowTracker.markDirty(T),this._eraseInBufferLine(T,0,this._activeBuffer.x+1,!0,x),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(T+1).isWrapped=!1);T--;)this._resetBufferLine(T,x);this._dirtyRowTracker.markDirty(0);break;case 2:for(T=this._bufferService.rows,this._dirtyRowTracker.markDirty(T-1);T--;)this._resetBufferLine(T,x);this._dirtyRowTracker.markDirty(0);break;case 3:let k=this._activeBuffer.lines.length-this._bufferService.rows;k>0&&(this._activeBuffer.lines.trimStart(k),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-k,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-k,0),this._onScroll.fire(0))}return!0}eraseInLine(E,x=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,x);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,x);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,x)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let x=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let T=this._activeBuffer.ybase+this._activeBuffer.y,k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,j=this._bufferService.rows-1+this._activeBuffer.ybase-k+1;for(;x--;)this._activeBuffer.lines.splice(j-1,1),this._activeBuffer.lines.splice(T,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let x=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let T=this._activeBuffer.ybase+this._activeBuffer.y,k;for(k=this._bufferService.rows-1-this._activeBuffer.scrollBottom,k=this._bufferService.rows-1+this._activeBuffer.ybase-k;x--;)this._activeBuffer.lines.splice(T,1),this._activeBuffer.lines.splice(k,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();let x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();let x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let x=E.params[0]||1;for(;x--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let x=E.params[0]||1;for(;x--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);k.deleteCells(0,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);k.insertCells(0,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);k.insertCells(this._activeBuffer.x,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let x=E.params[0]||1;for(let T=this._activeBuffer.scrollTop;T<=this._activeBuffer.scrollBottom;++T){let k=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);k.deleteCells(this._activeBuffer.x,x,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),k.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();let x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return x&&(x.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){if(!this._parser.precedingCodepoint)return!0;let x=E.params[0]||1,T=new Uint32Array(x);for(let k=0;k<x;++k)T[k]=this._parser.precedingCodepoint;return this.print(T,0,T.length),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(l.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(l.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(l.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(l.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(l.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let x=0;x<E.length;x++)switch(E.params[x]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let x=0;x<E.length;x++)switch(E.params[x]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),this._charsetService.setgCharset(1,p.DEFAULT_CHARSET),this._charsetService.setgCharset(2,p.DEFAULT_CHARSET),this._charsetService.setgCharset(3,p.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let x=0;x<E.length;x++)switch(E.params[x]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let x=0;x<E.length;x++)switch(E.params[x]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[x]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,x){let T=this._coreService.decPrivateModes,{activeProtocol:k,activeEncoding:j}=this._coreMouseService,V=this._coreService,{buffers:W,cols:U}=this._bufferService,{active:se,alt:b}=W,N=this._optionsService.rawOptions,P=te=>te?1:2,L=E.params[0];return q=L,$=x?L===2?4:L===4?P(V.modes.insertMode):L===12?3:L===20?P(N.convertEol):0:L===1?P(T.applicationCursorKeys):L===3?N.windowOptions.setWinLines?U===80?2:U===132?1:0:0:L===6?P(T.origin):L===7?P(T.wraparound):L===8?3:L===9?P(k==="X10"):L===12?P(N.cursorBlink):L===25?P(!V.isCursorHidden):L===45?P(T.reverseWraparound):L===66?P(T.applicationKeypad):L===67?4:L===1e3?P(k==="VT200"):L===1002?P(k==="DRAG"):L===1003?P(k==="ANY"):L===1004?P(T.sendFocus):L===1005?4:L===1006?P(j==="SGR"):L===1015?4:L===1016?P(j==="SGR_PIXELS"):L===1048?1:L===47||L===1047||L===1049?P(se===b):L===2004?P(T.bracketedPasteMode):0,V.triggerDataEvent(`${l.C0.ESC}[${x?"":"?"}${q};${$}$y`),!0;var q,$}_updateAttrColor(E,x,T,k,j){return x===2?(E|=50331648,E&=-16777216,E|=g.AttributeData.fromColorRGB([T,k,j])):x===5&&(E&=-50331904,E|=33554432|255&T),E}_extractColor(E,x,T){let k=[0,0,-1,0,0,0],j=0,V=0;do{if(k[V+j]=E.params[x+V],E.hasSubParams(x+V)){let W=E.getSubParams(x+V),U=0;do k[1]===5&&(j=1),k[V+U+1+j]=W[U];while(++U<W.length&&U+V+1+j<k.length);break}if(k[1]===5&&V+j>=2||k[1]===2&&V+j>=5)break;k[1]&&(j=1)}while(++V+x<E.length&&V+j<k.length);for(let W=2;W<k.length;++W)k[W]===-1&&(k[W]=0);switch(k[0]){case 38:T.fg=this._updateAttrColor(T.fg,k[1],k[3],k[4],k[5]);break;case 48:T.bg=this._updateAttrColor(T.bg,k[1],k[3],k[4],k[5]);break;case 58:T.extended=T.extended.clone(),T.extended.underlineColor=this._updateAttrColor(T.extended.underlineColor,k[1],k[3],k[4],k[5])}return V}_processUnderline(E,x){x.extended=x.extended.clone(),(!~E||E>5)&&(E=1),x.extended.underlineStyle=E,x.fg|=268435456,E===0&&(x.fg&=-268435457),x.updateExtended()}_processSGR0(E){E.fg=c.DEFAULT_ATTR_DATA.fg,E.bg=c.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;let x=E.length,T,k=this._curAttrData;for(let j=0;j<x;j++)T=E.params[j],T>=30&&T<=37?(k.fg&=-50331904,k.fg|=16777216|T-30):T>=40&&T<=47?(k.bg&=-50331904,k.bg|=16777216|T-40):T>=90&&T<=97?(k.fg&=-50331904,k.fg|=16777224|T-90):T>=100&&T<=107?(k.bg&=-50331904,k.bg|=16777224|T-100):T===0?this._processSGR0(k):T===1?k.fg|=134217728:T===3?k.bg|=67108864:T===4?(k.fg|=268435456,this._processUnderline(E.hasSubParams(j)?E.getSubParams(j)[0]:1,k)):T===5?k.fg|=536870912:T===7?k.fg|=67108864:T===8?k.fg|=1073741824:T===9?k.fg|=2147483648:T===2?k.bg|=134217728:T===21?this._processUnderline(2,k):T===22?(k.fg&=-134217729,k.bg&=-134217729):T===23?k.bg&=-67108865:T===24?(k.fg&=-268435457,this._processUnderline(0,k)):T===25?k.fg&=-536870913:T===27?k.fg&=-67108865:T===28?k.fg&=-1073741825:T===29?k.fg&=2147483647:T===39?(k.fg&=-67108864,k.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):T===49?(k.bg&=-67108864,k.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):T===38||T===48||T===58?j+=this._extractColor(E,j,k):T===53?k.bg|=1073741824:T===55?k.bg&=-1073741825:T===59?(k.extended=k.extended.clone(),k.extended.underlineColor=-1,k.updateExtended()):T===100?(k.fg&=-67108864,k.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,k.bg&=-67108864,k.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",T);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${l.C0.ESC}[0n`);break;case 6:let x=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[${x};${T}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){let x=this._activeBuffer.y+1,T=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${l.C0.ESC}[?${x};${T}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){let x=E.params[0]||1;switch(x){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let T=x%2==1;return this._optionsService.options.cursorBlink=T,!0}setScrollRegion(E){let x=E.params[0]||1,T;return(E.length<2||(T=E.params[1])>this._bufferService.rows||T===0)&&(T=this._bufferService.rows),T>x&&(this._activeBuffer.scrollTop=x-1,this._activeBuffer.scrollBottom=T-1,this._setCursor(0,0)),!0}windowOptions(E){if(!R(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;let x=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:x!==2&&this._onRequestWindowsOptionsReport.fire(M.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(M.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${l.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:x!==0&&x!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),x!==0&&x!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:x!==0&&x!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),x!==0&&x!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){let x=[],T=E.split(";");for(;T.length>1;){let k=T.shift(),j=T.shift();if(/^\d+$/.exec(k)){let V=parseInt(k);if(H(V))if(j==="?")x.push({type:0,index:V});else{let W=(0,m.parseColor)(j);W&&x.push({type:1,index:V,color:W})}}}return x.length&&this._onColor.fire(x),!0}setHyperlink(E){let x=E.split(";");return!(x.length<2)&&(x[1]?this._createHyperlink(x[0],x[1]):!x[0]&&this._finishHyperlink())}_createHyperlink(E,x){this._getCurrentLinkId()&&this._finishHyperlink();let T=E.split(":"),k,j=T.findIndex(V=>V.startsWith("id="));return j!==-1&&(k=T[j].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:k,uri:x}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,x){let T=E.split(";");for(let k=0;k<T.length&&!(x>=this._specialColors.length);++k,++x)if(T[k]==="?")this._onColor.fire([{type:0,index:this._specialColors[x]}]);else{let j=(0,m.parseColor)(T[k]);j&&this._onColor.fire([{type:1,index:this._specialColors[x],color:j}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;let x=[],T=E.split(";");for(let k=0;k<T.length;++k)if(/^\d+$/.exec(T[k])){let j=parseInt(T[k]);H(j)&&x.push({type:2,index:j})}return x.length&&this._onColor.fire(x),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,p.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(D[E[0]],p.CHARSETS[E[1]]||p.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){let E=new h.CellData;E.content=4194373,E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let x=0;x<this._bufferService.rows;++x){let T=this._activeBuffer.ybase+this._activeBuffer.y+x,k=this._activeBuffer.lines.get(T);k&&(k.fill(E),k.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,x){let T=this._bufferService.buffer,k=this._optionsService.rawOptions;return(j=>(this._coreService.triggerDataEvent(`${l.C0.ESC}${j}${l.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${T.scrollTop+1};${T.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[k.cursorStyle]-(k.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,x){this._dirtyRowTracker.markRangeDirty(E,x)}}r.InputHandler=O;let F=class{constructor(B){this._bufferService=B,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(B){B<this.start?this.start=B:B>this.end&&(this.end=B)}markRangeDirty(B,E){B>E&&(A=B,B=E,E=A),B<this.start&&(this.start=B),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function H(B){return 0<=B&&B<256}F=a([f(0,_.IBufferService)],F)},844:(o,r)=>{function s(a){for(let f of a)f.dispose();a.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let a of this._disposables)a.dispose();this._disposables.length=0}register(a){return this._disposables.push(a),a}unregister(a){let f=this._disposables.indexOf(a);f!==-1&&this._disposables.splice(f,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(a){var f;this._isDisposed||a===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=a)}clear(){this.value=void 0}dispose(){var a;this._isDisposed=!0,(a=this._value)===null||a===void 0||a.dispose(),this._value=void 0}},r.toDisposable=function(a){return{dispose:a}},r.disposeArray=s,r.getDisposeArrayDisposable=function(a){return{dispose:()=>s(a)}}},1505:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class s{constructor(){this._data={}}set(f,l,p){this._data[f]||(this._data[f]={}),this._data[f][l]=p}get(f,l){return this._data[f]?this._data[f][l]:void 0}clear(){this._data={}}}r.TwoKeyMap=s,r.FourKeyMap=class{constructor(){this._data=new s}set(a,f,l,p,y){this._data.get(a,f)||this._data.set(a,f,new s),this._data.get(a,f).set(l,p,y)}get(a,f,l,p){var y;return(y=this._data.get(a,f))===null||y===void 0?void 0:y.get(l,p)}clear(){this._data.clear()}}},6114:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof navigator>"u";let s=r.isNode?"node":navigator.userAgent,a=r.isNode?"node":navigator.platform;r.isFirefox=s.includes("Firefox"),r.isLegacyEdge=s.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(s),r.getSafariVersion=function(){if(!r.isSafari)return 0;let f=s.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(a),r.isIpad=a==="iPad",r.isIphone=a==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(a),r.isLinux=a.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(s)},6106:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SortedList=void 0;let s=0;r.SortedList=class{constructor(a){this._getKey=a,this._array=[]}clear(){this._array.length=0}insert(a){this._array.length!==0?(s=this._search(this._getKey(a)),this._array.splice(s,0,a)):this._array.push(a)}delete(a){if(this._array.length===0)return!1;let f=this._getKey(a);if(f===void 0||(s=this._search(f),s===-1)||this._getKey(this._array[s])!==f)return!1;do if(this._array[s]===a)return this._array.splice(s,1),!0;while(++s<this._array.length&&this._getKey(this._array[s])===f);return!1}*getKeyIterator(a){if(this._array.length!==0&&(s=this._search(a),!(s<0||s>=this._array.length)&&this._getKey(this._array[s])===a))do yield this._array[s];while(++s<this._array.length&&this._getKey(this._array[s])===a)}forEachByKey(a,f){if(this._array.length!==0&&(s=this._search(a),!(s<0||s>=this._array.length)&&this._getKey(this._array[s])===a))do f(this._array[s]);while(++s<this._array.length&&this._getKey(this._array[s])===a)}values(){return[...this._array].values()}_search(a){let f=0,l=this._array.length-1;for(;l>=f;){let p=f+l>>1,y=this._getKey(this._array[p]);if(y>a)l=p-1;else{if(!(y<a)){for(;p>0&&this._getKey(this._array[p-1])===a;)p--;return p}f=p+1}}return f}}},7226:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;let a=s(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(y){this._tasks.push(y),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(y){this._idleCallback=void 0;let C=0,v=0,c=y.timeRemaining(),d=0;for(;this._i<this._tasks.length;){if(C=Date.now(),this._tasks[this._i]()||this._i++,C=Math.max(1,Date.now()-C),v=Math.max(C,v),d=y.timeRemaining(),1.5*v>d)return c-C<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-C))}ms`),void this._start();c=d}this.clear()}}class l extends f{_requestCallback(y){return setTimeout(()=>y(this._createDeadline(16)))}_cancelCallback(y){clearTimeout(y)}_createDeadline(y){let C=Date.now()+y;return{timeRemaining:()=>Math.max(0,C-Date.now())}}}r.PriorityTaskQueue=l,r.IdleTaskQueue=!a.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(p){return requestIdleCallback(p)}_cancelCallback(p){cancelIdleCallback(p)}}:l,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(p){this._queue.clear(),this._queue.enqueue(p)}flush(){this._queue.flush()}}},9282:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.updateWindowsModeWrappedState=void 0;let a=s(643);r.updateWindowsModeWrappedState=function(f){let l=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),p=l?.get(f.cols-1),y=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);y&&p&&(y.isWrapped=p[a.CHAR_DATA_CODE_INDEX]!==a.NULL_CELL_CODE&&p[a.CHAR_DATA_CODE_INDEX]!==a.WHITESPACE_CELL_CODE)}},3734:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class s{constructor(){this.fg=0,this.bg=0,this.extended=new a}static toColorRGB(l){return[l>>>16&255,l>>>8&255,255&l]}static fromColorRGB(l){return(255&l[0])<<16|(255&l[1])<<8|255&l[2]}clone(){let l=new s;return l.fg=this.fg,l.bg=this.bg,l.extended=this.extended.clone(),l}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}r.AttributeData=s;class a{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(l){this._ext=l}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(l){this._ext&=-469762049,this._ext|=l<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(l){this._ext&=-67108864,this._ext|=67108863&l}get urlId(){return this._urlId}set urlId(l){this._urlId=l}constructor(l=0,p=0){this._ext=0,this._urlId=0,this._ext=l,this._urlId=p}clone(){return new a(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=a},9092:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.MAX_BUFFER_SIZE=void 0;let a=s(6349),f=s(7226),l=s(3734),p=s(8437),y=s(4634),C=s(511),v=s(643),c=s(4863),d=s(7116);r.MAX_BUFFER_SIZE=4294967295,r.Buffer=class{constructor(u,h,g){this._hasScrollback=u,this._optionsService=h,this._bufferService=g,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=d.DEFAULT_CHARSET,this.markers=[],this._nullCell=C.CellData.fromCharData([0,v.NULL_CELL_CHAR,v.NULL_CELL_WIDTH,v.NULL_CELL_CODE]),this._whitespaceCell=C.CellData.fromCharData([0,v.WHITESPACE_CELL_CHAR,v.WHITESPACE_CELL_WIDTH,v.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(u){return u?(this._nullCell.fg=u.fg,this._nullCell.bg=u.bg,this._nullCell.extended=u.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new l.ExtendedAttrs),this._nullCell}getWhitespaceCell(u){return u?(this._whitespaceCell.fg=u.fg,this._whitespaceCell.bg=u.bg,this._whitespaceCell.extended=u.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new l.ExtendedAttrs),this._whitespaceCell}getBlankLine(u,h){return new p.BufferLine(this._bufferService.cols,this.getNullCell(u),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let u=this.ybase+this.y-this.ydisp;return u>=0&&u<this._rows}_getCorrectBufferLength(u){if(!this._hasScrollback)return u;let h=u+this._optionsService.rawOptions.scrollback;return h>r.MAX_BUFFER_SIZE?r.MAX_BUFFER_SIZE:h}fillViewportRows(u){if(this.lines.length===0){u===void 0&&(u=p.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(u))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new a.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(u,h){let g=this.getNullCell(p.DEFAULT_ATTR_DATA),_=0,S=this._getCorrectBufferLength(h);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<u)for(let m=0;m<this.lines.length;m++)_+=+this.lines.get(m).resize(u,g);let w=0;if(this._rows<h)for(let m=this._rows;m<h;m++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new p.BufferLine(u,g)):this.ybase>0&&this.lines.length<=this.ybase+this.y+w+1?(this.ybase--,w++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(u,g)));else for(let m=this._rows;m>h;m--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){let m=this.lines.length-S;m>0&&(this.lines.trimStart(m),this.ybase=Math.max(this.ybase-m,0),this.ydisp=Math.max(this.ydisp-m,0),this.savedY=Math.max(this.savedY-m,0)),this.lines.maxLength=S}this.x=Math.min(this.x,u-1),this.y=Math.min(this.y,h-1),w&&(this.y+=w),this.savedX=Math.min(this.savedX,u-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(u,h),this._cols>u))for(let w=0;w<this.lines.length;w++)_+=+this.lines.get(w).resize(u,g);this._cols=u,this._rows=h,this._memoryCleanupQueue.clear(),_>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let u=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,u=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return u}get _isReflowEnabled(){let u=this._optionsService.rawOptions.windowsPty;return u&&u.buildNumber?this._hasScrollback&&u.backend==="conpty"&&u.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(u,h){this._cols!==u&&(u>this._cols?this._reflowLarger(u,h):this._reflowSmaller(u,h))}_reflowLarger(u,h){let g=(0,y.reflowLargerGetLinesToRemove)(this.lines,this._cols,u,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(g.length>0){let _=(0,y.reflowLargerCreateNewLayout)(this.lines,g);(0,y.reflowLargerApplyNewLayout)(this.lines,_.layout),this._reflowLargerAdjustViewport(u,h,_.countRemoved)}}_reflowLargerAdjustViewport(u,h,g){let _=this.getNullCell(p.DEFAULT_ATTR_DATA),S=g;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new p.BufferLine(u,_))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-g,0)}_reflowSmaller(u,h){let g=this.getNullCell(p.DEFAULT_ATTR_DATA),_=[],S=0;for(let w=this.lines.length-1;w>=0;w--){let m=this.lines.get(w);if(!m||!m.isWrapped&&m.getTrimmedLength()<=u)continue;let D=[m];for(;m.isWrapped&&w>0;)m=this.lines.get(--w),D.unshift(m);let I=this.ybase+this.y;if(I>=w&&I<w+D.length)continue;let R=D[D.length-1].getTrimmedLength(),M=(0,y.reflowSmallerGetNewLineLengths)(D,this._cols,u),A=M.length-D.length,O;O=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);let F=[];for(let k=0;k<A;k++){let j=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);F.push(j)}F.length>0&&(_.push({start:w+D.length+S,newLines:F}),S+=F.length),D.push(...F);let H=M.length-1,B=M[H];B===0&&(H--,B=M[H]);let E=D.length-A-1,x=R;for(;E>=0;){let k=Math.min(x,B);if(D[H]===void 0)break;if(D[H].copyCellsFrom(D[E],x-k,B-k,k,!0),B-=k,B===0&&(H--,B=M[H]),x-=k,x===0){E--;let j=Math.max(E,0);x=(0,y.getWrappedLineTrimmedLength)(D,j,this._cols)}}for(let k=0;k<D.length;k++)M[k]<u&&D[k].setCell(M[k],g);let T=A-O;for(;T-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+h-1)}if(_.length>0){let w=[],m=[];for(let H=0;H<this.lines.length;H++)m.push(this.lines.get(H));let D=this.lines.length,I=D-1,R=0,M=_[R];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let A=0;for(let H=Math.min(this.lines.maxLength-1,D+S-1);H>=0;H--)if(M&&M.start>I+A){for(let B=M.newLines.length-1;B>=0;B--)this.lines.set(H--,M.newLines[B]);H++,w.push({index:I+1,amount:M.newLines.length}),A+=M.newLines.length,M=_[++R]}else this.lines.set(H,m[I--]);let O=0;for(let H=w.length-1;H>=0;H--)w[H].index+=O,this.lines.onInsertEmitter.fire(w[H]),O+=w[H].amount;let F=Math.max(0,D+S-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(u,h,g=0,_){let S=this.lines.get(u);return S?S.translateToString(h,g,_):""}getWrappedRangeForLine(u){let h=u,g=u;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;g+1<this.lines.length&&this.lines.get(g+1).isWrapped;)g++;return{first:h,last:g}}setupTabStops(u){for(u!=null?this.tabs[u]||(u=this.prevStop(u)):(this.tabs={},u=0);u<this._cols;u+=this._optionsService.rawOptions.tabStopWidth)this.tabs[u]=!0}prevStop(u){for(u==null&&(u=this.x);!this.tabs[--u]&&u>0;);return u>=this._cols?this._cols-1:u<0?0:u}nextStop(u){for(u==null&&(u=this.x);!this.tabs[++u]&&u<this._cols;);return u>=this._cols?this._cols-1:u<0?0:u}clearMarkers(u){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===u&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let u=0;u<this.markers.length;u++)this.markers[u].dispose(),this.markers.splice(u--,1);this._isClearing=!1}addMarker(u){let h=new c.Marker(u);return this.markers.push(h),h.register(this.lines.onTrim(g=>{h.line-=g,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(g=>{h.line>=g.index&&(h.line+=g.amount)})),h.register(this.lines.onDelete(g=>{h.line>=g.index&&h.line<g.index+g.amount&&h.dispose(),h.line>g.index&&(h.line-=g.amount)})),h.register(h.onDispose(()=>this._removeMarker(h))),h}_removeMarker(u){this._isClearing||this.markers.splice(this.markers.indexOf(u),1)}}},8437:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLine=r.DEFAULT_ATTR_DATA=void 0;let a=s(3734),f=s(511),l=s(643),p=s(482);r.DEFAULT_ATTR_DATA=Object.freeze(new a.AttributeData);let y=0;class C{constructor(c,d,u=!1){this.isWrapped=u,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);let h=d||f.CellData.fromCharData([0,l.NULL_CELL_CHAR,l.NULL_CELL_WIDTH,l.NULL_CELL_CODE]);for(let g=0;g<c;++g)this.setCell(g,h);this.length=c}get(c){let d=this._data[3*c+0],u=2097151&d;return[this._data[3*c+1],2097152&d?this._combined[c]:u?(0,p.stringFromCodePoint)(u):"",d>>22,2097152&d?this._combined[c].charCodeAt(this._combined[c].length-1):u]}set(c,d){this._data[3*c+1]=d[l.CHAR_DATA_ATTR_INDEX],d[l.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=d[1],this._data[3*c+0]=2097152|c|d[l.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=d[l.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|d[l.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){let d=this._data[3*c+0];return 2097152&d?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&d}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){let d=this._data[3*c+0];return 2097152&d?this._combined[c]:2097151&d?(0,p.stringFromCodePoint)(2097151&d):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,d){return y=3*c,d.content=this._data[y+0],d.fg=this._data[y+1],d.bg=this._data[y+2],2097152&d.content&&(d.combinedData=this._combined[c]),268435456&d.bg&&(d.extended=this._extendedAttrs[c]),d}setCell(c,d){2097152&d.content&&(this._combined[c]=d.combinedData),268435456&d.bg&&(this._extendedAttrs[c]=d.extended),this._data[3*c+0]=d.content,this._data[3*c+1]=d.fg,this._data[3*c+2]=d.bg}setCellFromCodePoint(c,d,u,h,g,_){268435456&g&&(this._extendedAttrs[c]=_),this._data[3*c+0]=d|u<<22,this._data[3*c+1]=h,this._data[3*c+2]=g}addCodepointToCell(c,d){let u=this._data[3*c+0];2097152&u?this._combined[c]+=(0,p.stringFromCodePoint)(d):(2097151&u?(this._combined[c]=(0,p.stringFromCodePoint)(2097151&u)+(0,p.stringFromCodePoint)(d),u&=-2097152,u|=2097152):u=d|4194304,this._data[3*c+0]=u)}insertCells(c,d,u,h){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new a.ExtendedAttrs),d<this.length-c){let g=new f.CellData;for(let _=this.length-c-d-1;_>=0;--_)this.setCell(c+d+_,this.loadCell(c+_,g));for(let _=0;_<d;++_)this.setCell(c+_,u)}else for(let g=c;g<this.length;++g)this.setCell(g,u);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new a.ExtendedAttrs)}deleteCells(c,d,u,h){if(c%=this.length,d<this.length-c){let g=new f.CellData;for(let _=0;_<this.length-c-d;++_)this.setCell(c+_,this.loadCell(c+d+_,g));for(let _=this.length-d;_<this.length;++_)this.setCell(_,u)}else for(let g=c;g<this.length;++g)this.setCell(g,u);c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new a.ExtendedAttrs),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodePoint(c,0,1,h?.fg||0,h?.bg||0,h?.extended||new a.ExtendedAttrs)}replaceCells(c,d,u,h,g=!1){if(g)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodePoint(c-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new a.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&!this.isProtected(d)&&this.setCellFromCodePoint(d,0,1,h?.fg||0,h?.bg||0,h?.extended||new a.ExtendedAttrs);c<d&&c<this.length;)this.isProtected(c)||this.setCell(c,u),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,h?.fg||0,h?.bg||0,h?.extended||new a.ExtendedAttrs),d<this.length&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d,0,1,h?.fg||0,h?.bg||0,h?.extended||new a.ExtendedAttrs);c<d&&c<this.length;)this.setCell(c++,u)}resize(c,d){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let u=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*u)this._data=new Uint32Array(this._data.buffer,0,u);else{let h=new Uint32Array(u);h.set(this._data),this._data=h}for(let h=this.length;h<c;++h)this.setCell(h,d)}else{this._data=this._data.subarray(0,u);let h=Object.keys(this._combined);for(let _=0;_<h.length;_++){let S=parseInt(h[_],10);S>=c&&delete this._combined[S]}let g=Object.keys(this._extendedAttrs);for(let _=0;_<g.length;_++){let S=parseInt(g[_],10);S>=c&&delete this._extendedAttrs[S]}}return this.length=c,4*u*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,d=!1){if(d)for(let u=0;u<this.length;++u)this.isProtected(u)||this.setCell(u,c);else{this._combined={},this._extendedAttrs={};for(let u=0;u<this.length;++u)this.setCell(u,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(let d in c._combined)this._combined[d]=c._combined[d];this._extendedAttrs={};for(let d in c._extendedAttrs)this._extendedAttrs[d]=c._extendedAttrs[d];this.isWrapped=c.isWrapped}clone(){let c=new C(0);c._data=new Uint32Array(this._data),c.length=this.length;for(let d in this._combined)c._combined[d]=this._combined[d];for(let d in this._extendedAttrs)c._extendedAttrs[d]=this._extendedAttrs[d];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,d,u,h,g){let _=c._data;if(g)for(let w=h-1;w>=0;w--){for(let m=0;m<3;m++)this._data[3*(u+w)+m]=_[3*(d+w)+m];268435456&_[3*(d+w)+2]&&(this._extendedAttrs[u+w]=c._extendedAttrs[d+w])}else for(let w=0;w<h;w++){for(let m=0;m<3;m++)this._data[3*(u+w)+m]=_[3*(d+w)+m];268435456&_[3*(d+w)+2]&&(this._extendedAttrs[u+w]=c._extendedAttrs[d+w])}let S=Object.keys(c._combined);for(let w=0;w<S.length;w++){let m=parseInt(S[w],10);m>=d&&(this._combined[m-d+u]=c._combined[m])}}translateToString(c=!1,d=0,u=this.length){c&&(u=Math.min(u,this.getTrimmedLength()));let h="";for(;d<u;){let g=this._data[3*d+0],_=2097151&g;h+=2097152&g?this._combined[d]:_?(0,p.stringFromCodePoint)(_):l.WHITESPACE_CELL_CHAR,d+=g>>22||1}return h}}r.BufferLine=C},4841:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getRangeLength=void 0,r.getRangeLength=function(s,a){if(s.start.y>s.end.y)throw new Error(`Buffer range end (${s.end.x}, ${s.end.y}) cannot be before start (${s.start.x}, ${s.start.y})`);return a*(s.end.y-s.start.y)+(s.end.x-s.start.x+1)}},4634:(o,r)=>{function s(a,f,l){if(f===a.length-1)return a[f].getTrimmedLength();let p=!a[f].hasContent(l-1)&&a[f].getWidth(l-1)===1,y=a[f+1].getWidth(0)===2;return p&&y?l-1:l}Object.defineProperty(r,"__esModule",{value:!0}),r.getWrappedLineTrimmedLength=r.reflowSmallerGetNewLineLengths=r.reflowLargerApplyNewLayout=r.reflowLargerCreateNewLayout=r.reflowLargerGetLinesToRemove=void 0,r.reflowLargerGetLinesToRemove=function(a,f,l,p,y){let C=[];for(let v=0;v<a.length-1;v++){let c=v,d=a.get(++c);if(!d.isWrapped)continue;let u=[a.get(v)];for(;c<a.length&&d.isWrapped;)u.push(d),d=a.get(++c);if(p>=v&&p<c){v+=u.length-1;continue}let h=0,g=s(u,h,f),_=1,S=0;for(;_<u.length;){let m=s(u,_,f),D=m-S,I=l-g,R=Math.min(D,I);u[h].copyCellsFrom(u[_],S,g,R,!1),g+=R,g===l&&(h++,g=0),S+=R,S===m&&(_++,S=0),g===0&&h!==0&&u[h-1].getWidth(l-1)===2&&(u[h].copyCellsFrom(u[h-1],l-1,g++,1,!1),u[h-1].setCell(l-1,y))}u[h].replaceCells(g,l,y);let w=0;for(let m=u.length-1;m>0&&(m>h||u[m].getTrimmedLength()===0);m--)w++;w>0&&(C.push(v+u.length-w),C.push(w)),v+=u.length-1}return C},r.reflowLargerCreateNewLayout=function(a,f){let l=[],p=0,y=f[p],C=0;for(let v=0;v<a.length;v++)if(y===v){let c=f[++p];a.onDeleteEmitter.fire({index:v-C,amount:c}),v+=c-1,C+=c,y=f[++p]}else l.push(v);return{layout:l,countRemoved:C}},r.reflowLargerApplyNewLayout=function(a,f){let l=[];for(let p=0;p<f.length;p++)l.push(a.get(f[p]));for(let p=0;p<l.length;p++)a.set(p,l[p]);a.length=f.length},r.reflowSmallerGetNewLineLengths=function(a,f,l){let p=[],y=a.map((d,u)=>s(a,u,f)).reduce((d,u)=>d+u),C=0,v=0,c=0;for(;c<y;){if(y-c<l){p.push(y-c);break}C+=l;let d=s(a,v,f);C>d&&(C-=d,v++);let u=a[v].getWidth(C-1)===2;u&&C--;let h=u?l-1:l;p.push(h),c+=h}return p},r.getWrappedLineTrimmedLength=s},5295:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferSet=void 0;let a=s(8460),f=s(844),l=s(9092);class p extends f.Disposable{constructor(C,v){super(),this._optionsService=C,this._bufferService=v,this._onBufferActivate=this.register(new a.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new l.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new l.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(C){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(C),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(C,v){this._normal.resize(C,v),this._alt.resize(C,v),this.setupTabStops(C)}setupTabStops(C){this._normal.setupTabStops(C),this._alt.setupTabStops(C)}}r.BufferSet=p},511:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;let a=s(482),f=s(643),l=s(3734);class p extends l.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new l.ExtendedAttrs,this.combinedData=""}static fromCharData(C){let v=new p;return v.setFromCharData(C),v}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,a.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(C){this.fg=C[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let v=!1;if(C[f.CHAR_DATA_CHAR_INDEX].length>2)v=!0;else if(C[f.CHAR_DATA_CHAR_INDEX].length===2){let c=C[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){let d=C[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(c-55296)+d-56320+65536|C[f.CHAR_DATA_WIDTH_INDEX]<<22:v=!0}else v=!0}else this.content=C[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|C[f.CHAR_DATA_WIDTH_INDEX]<<22;v&&(this.combinedData=C[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|C[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=p},643:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},4863:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Marker=void 0;let a=s(8460),f=s(844);class l{get id(){return this._id}constructor(y){this.line=y,this.isDisposed=!1,this._disposables=[],this._id=l._nextId++,this._onDispose=this.register(new a.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(y){return this._disposables.push(y),y}}r.Marker=l,l._nextId=1},7116:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CHARSET=r.CHARSETS=void 0,r.CHARSETS={},r.DEFAULT_CHARSET=r.CHARSETS.B,r.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},r.CHARSETS.A={"#":"\xA3"},r.CHARSETS.B=void 0,r.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},r.CHARSETS.C=r.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},r.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},r.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},r.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},r.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},r.CHARSETS.E=r.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},r.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},r.CHARSETS.H=r.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},r.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(o,r)=>{var s,a,f;Object.defineProperty(r,"__esModule",{value:!0}),r.C1_ESCAPED=r.C1=r.C0=void 0,function(l){l.NUL="\0",l.SOH="",l.STX="",l.ETX="",l.EOT="",l.ENQ="",l.ACK="",l.BEL="\x07",l.BS="\b",l.HT="	",l.LF=`
`,l.VT="\v",l.FF="\f",l.CR="\r",l.SO="",l.SI="",l.DLE="",l.DC1="",l.DC2="",l.DC3="",l.DC4="",l.NAK="",l.SYN="",l.ETB="",l.CAN="",l.EM="",l.SUB="",l.ESC="\x1B",l.FS="",l.GS="",l.RS="",l.US="",l.SP=" ",l.DEL="\x7F"}(s||(r.C0=s={})),function(l){l.PAD="\x80",l.HOP="\x81",l.BPH="\x82",l.NBH="\x83",l.IND="\x84",l.NEL="\x85",l.SSA="\x86",l.ESA="\x87",l.HTS="\x88",l.HTJ="\x89",l.VTS="\x8A",l.PLD="\x8B",l.PLU="\x8C",l.RI="\x8D",l.SS2="\x8E",l.SS3="\x8F",l.DCS="\x90",l.PU1="\x91",l.PU2="\x92",l.STS="\x93",l.CCH="\x94",l.MW="\x95",l.SPA="\x96",l.EPA="\x97",l.SOS="\x98",l.SGCI="\x99",l.SCI="\x9A",l.CSI="\x9B",l.ST="\x9C",l.OSC="\x9D",l.PM="\x9E",l.APC="\x9F"}(a||(r.C1=a={})),function(l){l.ST=`${s.ESC}\\`}(f||(r.C1_ESCAPED=f={}))},7399:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.evaluateKeyboardEvent=void 0;let a=s(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};r.evaluateKeyboardEvent=function(l,p,y,C){let v={type:0,cancel:!1,key:void 0},c=(l.shiftKey?1:0)|(l.altKey?2:0)|(l.ctrlKey?4:0)|(l.metaKey?8:0);switch(l.keyCode){case 0:l.key==="UIKeyInputUpArrow"?v.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A":l.key==="UIKeyInputLeftArrow"?v.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D":l.key==="UIKeyInputRightArrow"?v.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C":l.key==="UIKeyInputDownArrow"&&(v.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B");break;case 8:if(l.altKey){v.key=a.C0.ESC+a.C0.DEL;break}v.key=a.C0.DEL;break;case 9:if(l.shiftKey){v.key=a.C0.ESC+"[Z";break}v.key=a.C0.HT,v.cancel=!0;break;case 13:v.key=l.altKey?a.C0.ESC+a.C0.CR:a.C0.CR,v.cancel=!0;break;case 27:v.key=a.C0.ESC,l.altKey&&(v.key=a.C0.ESC+a.C0.ESC),v.cancel=!0;break;case 37:if(l.metaKey)break;c?(v.key=a.C0.ESC+"[1;"+(c+1)+"D",v.key===a.C0.ESC+"[1;3D"&&(v.key=a.C0.ESC+(y?"b":"[1;5D"))):v.key=p?a.C0.ESC+"OD":a.C0.ESC+"[D";break;case 39:if(l.metaKey)break;c?(v.key=a.C0.ESC+"[1;"+(c+1)+"C",v.key===a.C0.ESC+"[1;3C"&&(v.key=a.C0.ESC+(y?"f":"[1;5C"))):v.key=p?a.C0.ESC+"OC":a.C0.ESC+"[C";break;case 38:if(l.metaKey)break;c?(v.key=a.C0.ESC+"[1;"+(c+1)+"A",y||v.key!==a.C0.ESC+"[1;3A"||(v.key=a.C0.ESC+"[1;5A")):v.key=p?a.C0.ESC+"OA":a.C0.ESC+"[A";break;case 40:if(l.metaKey)break;c?(v.key=a.C0.ESC+"[1;"+(c+1)+"B",y||v.key!==a.C0.ESC+"[1;3B"||(v.key=a.C0.ESC+"[1;5B")):v.key=p?a.C0.ESC+"OB":a.C0.ESC+"[B";break;case 45:l.shiftKey||l.ctrlKey||(v.key=a.C0.ESC+"[2~");break;case 46:v.key=c?a.C0.ESC+"[3;"+(c+1)+"~":a.C0.ESC+"[3~";break;case 36:v.key=c?a.C0.ESC+"[1;"+(c+1)+"H":p?a.C0.ESC+"OH":a.C0.ESC+"[H";break;case 35:v.key=c?a.C0.ESC+"[1;"+(c+1)+"F":p?a.C0.ESC+"OF":a.C0.ESC+"[F";break;case 33:l.shiftKey?v.type=2:l.ctrlKey?v.key=a.C0.ESC+"[5;"+(c+1)+"~":v.key=a.C0.ESC+"[5~";break;case 34:l.shiftKey?v.type=3:l.ctrlKey?v.key=a.C0.ESC+"[6;"+(c+1)+"~":v.key=a.C0.ESC+"[6~";break;case 112:v.key=c?a.C0.ESC+"[1;"+(c+1)+"P":a.C0.ESC+"OP";break;case 113:v.key=c?a.C0.ESC+"[1;"+(c+1)+"Q":a.C0.ESC+"OQ";break;case 114:v.key=c?a.C0.ESC+"[1;"+(c+1)+"R":a.C0.ESC+"OR";break;case 115:v.key=c?a.C0.ESC+"[1;"+(c+1)+"S":a.C0.ESC+"OS";break;case 116:v.key=c?a.C0.ESC+"[15;"+(c+1)+"~":a.C0.ESC+"[15~";break;case 117:v.key=c?a.C0.ESC+"[17;"+(c+1)+"~":a.C0.ESC+"[17~";break;case 118:v.key=c?a.C0.ESC+"[18;"+(c+1)+"~":a.C0.ESC+"[18~";break;case 119:v.key=c?a.C0.ESC+"[19;"+(c+1)+"~":a.C0.ESC+"[19~";break;case 120:v.key=c?a.C0.ESC+"[20;"+(c+1)+"~":a.C0.ESC+"[20~";break;case 121:v.key=c?a.C0.ESC+"[21;"+(c+1)+"~":a.C0.ESC+"[21~";break;case 122:v.key=c?a.C0.ESC+"[23;"+(c+1)+"~":a.C0.ESC+"[23~";break;case 123:v.key=c?a.C0.ESC+"[24;"+(c+1)+"~":a.C0.ESC+"[24~";break;default:if(!l.ctrlKey||l.shiftKey||l.altKey||l.metaKey)if(y&&!C||!l.altKey||l.metaKey)!y||l.altKey||l.ctrlKey||l.shiftKey||!l.metaKey?l.key&&!l.ctrlKey&&!l.altKey&&!l.metaKey&&l.keyCode>=48&&l.key.length===1?v.key=l.key:l.key&&l.ctrlKey&&(l.key==="_"&&(v.key=a.C0.US),l.key==="@"&&(v.key=a.C0.NUL)):l.keyCode===65&&(v.type=1);else{let d=f[l.keyCode],u=d?.[l.shiftKey?1:0];if(u)v.key=a.C0.ESC+u;else if(l.keyCode>=65&&l.keyCode<=90){let h=l.ctrlKey?l.keyCode-64:l.keyCode+32,g=String.fromCharCode(h);l.shiftKey&&(g=g.toUpperCase()),v.key=a.C0.ESC+g}else if(l.keyCode===32)v.key=a.C0.ESC+(l.ctrlKey?a.C0.NUL:" ");else if(l.key==="Dead"&&l.code.startsWith("Key")){let h=l.code.slice(3,4);l.shiftKey||(h=h.toLowerCase()),v.key=a.C0.ESC+h,v.cancel=!0}}else l.keyCode>=65&&l.keyCode<=90?v.key=String.fromCharCode(l.keyCode-64):l.keyCode===32?v.key=a.C0.NUL:l.keyCode>=51&&l.keyCode<=55?v.key=String.fromCharCode(l.keyCode-51+27):l.keyCode===56?v.key=a.C0.DEL:l.keyCode===219?v.key=a.C0.ESC:l.keyCode===220?v.key=a.C0.FS:l.keyCode===221&&(v.key=a.C0.GS)}return v}},482:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(s){return s>65535?(s-=65536,String.fromCharCode(55296+(s>>10))+String.fromCharCode(s%1024+56320)):String.fromCharCode(s)},r.utf32ToString=function(s,a=0,f=s.length){let l="";for(let p=a;p<f;++p){let y=s[p];y>65535?(y-=65536,l+=String.fromCharCode(55296+(y>>10))+String.fromCharCode(y%1024+56320)):l+=String.fromCharCode(y)}return l},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(s,a){let f=s.length;if(!f)return 0;let l=0,p=0;if(this._interim){let y=s.charCodeAt(p++);56320<=y&&y<=57343?a[l++]=1024*(this._interim-55296)+y-56320+65536:(a[l++]=this._interim,a[l++]=y),this._interim=0}for(let y=p;y<f;++y){let C=s.charCodeAt(y);if(55296<=C&&C<=56319){if(++y>=f)return this._interim=C,l;let v=s.charCodeAt(y);56320<=v&&v<=57343?a[l++]=1024*(C-55296)+v-56320+65536:(a[l++]=C,a[l++]=v)}else C!==65279&&(a[l++]=C)}return l}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(s,a){let f=s.length;if(!f)return 0;let l,p,y,C,v=0,c=0,d=0;if(this.interim[0]){let g=!1,_=this.interim[0];_&=(224&_)==192?31:(240&_)==224?15:7;let S,w=0;for(;(S=63&this.interim[++w])&&w<4;)_<<=6,_|=S;let m=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,D=m-w;for(;d<D;){if(d>=f)return 0;if(S=s[d++],(192&S)!=128){d--,g=!0;break}this.interim[w++]=S,_<<=6,_|=63&S}g||(m===2?_<128?d--:a[v++]=_:m===3?_<2048||_>=55296&&_<=57343||_===65279||(a[v++]=_):_<65536||_>1114111||(a[v++]=_)),this.interim.fill(0)}let u=f-4,h=d;for(;h<f;){for(;!(!(h<u)||128&(l=s[h])||128&(p=s[h+1])||128&(y=s[h+2])||128&(C=s[h+3]));)a[v++]=l,a[v++]=p,a[v++]=y,a[v++]=C,h+=4;if(l=s[h++],l<128)a[v++]=l;else if((224&l)==192){if(h>=f)return this.interim[0]=l,v;if(p=s[h++],(192&p)!=128){h--;continue}if(c=(31&l)<<6|63&p,c<128){h--;continue}a[v++]=c}else if((240&l)==224){if(h>=f)return this.interim[0]=l,v;if(p=s[h++],(192&p)!=128){h--;continue}if(h>=f)return this.interim[0]=l,this.interim[1]=p,v;if(y=s[h++],(192&y)!=128){h--;continue}if(c=(15&l)<<12|(63&p)<<6|63&y,c<2048||c>=55296&&c<=57343||c===65279)continue;a[v++]=c}else if((248&l)==240){if(h>=f)return this.interim[0]=l,v;if(p=s[h++],(192&p)!=128){h--;continue}if(h>=f)return this.interim[0]=l,this.interim[1]=p,v;if(y=s[h++],(192&y)!=128){h--;continue}if(h>=f)return this.interim[0]=l,this.interim[1]=p,this.interim[2]=y,v;if(C=s[h++],(192&C)!=128){h--;continue}if(c=(7&l)<<18|(63&p)<<12|(63&y)<<6|63&C,c<65536||c>1114111)continue;a[v++]=c}}return v}}},225:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeV6=void 0;let s=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],a=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],f;r.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let l=0;l<s.length;++l)f.fill(0,s[l][0],s[l][1]+1)}}wcwidth(l){return l<32?0:l<127?1:l<65536?f[l]:function(p,y){let C,v=0,c=y.length-1;if(p<y[0][0]||p>y[c][1])return!1;for(;c>=v;)if(C=v+c>>1,p>y[C][1])v=C+1;else{if(!(p<y[C][0]))return!0;c=C-1}return!1}(l,a)?0:l>=131072&&l<=196605||l>=196608&&l<=262141?2:1}}},5981:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WriteBuffer=void 0;let a=s(8460),f=s(844);class l extends f.Disposable{constructor(y){super(),this._action=y,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(y,C){if(C!==void 0&&this._syncCalls>C)return void(this._syncCalls=0);if(this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let v;for(this._isSyncWriting=!0;v=this._writeBuffer.shift();){this._action(v);let c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(y,C){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(C),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=y.length,this._writeBuffer.push(y),this._callbacks.push(C)}_innerWrite(y=0,C=!0){let v=y||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let c=this._writeBuffer[this._bufferOffset],d=this._action(c,C);if(d){let h=g=>Date.now()-v>=12?setTimeout(()=>this._innerWrite(0,g)):this._innerWrite(v,g);return void d.catch(g=>(queueMicrotask(()=>{throw g}),Promise.resolve(!1))).then(h)}let u=this._callbacks[this._bufferOffset];if(u&&u(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-v>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}r.WriteBuffer=l},5941:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.toRgbString=r.parseColor=void 0;let s=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,a=/^[\da-f]+$/;function f(l,p){let y=l.toString(16),C=y.length<2?"0"+y:y;switch(p){case 4:return y[0];case 8:return C;case 12:return(C+C).slice(0,3);default:return C+C}}r.parseColor=function(l){if(!l)return;let p=l.toLowerCase();if(p.indexOf("rgb:")===0){p=p.slice(4);let y=s.exec(p);if(y){let C=y[1]?15:y[4]?255:y[7]?4095:65535;return[Math.round(parseInt(y[1]||y[4]||y[7]||y[10],16)/C*255),Math.round(parseInt(y[2]||y[5]||y[8]||y[11],16)/C*255),Math.round(parseInt(y[3]||y[6]||y[9]||y[12],16)/C*255)]}}else if(p.indexOf("#")===0&&(p=p.slice(1),a.exec(p)&&[3,6,9,12].includes(p.length))){let y=p.length/3,C=[0,0,0];for(let v=0;v<3;++v){let c=parseInt(p.slice(y*v,y*v+y),16);C[v]=y===1?c<<4:y===2?c:y===3?c>>4:c>>8}return C}},r.toRgbString=function(l,p=16){let[y,C,v]=l;return`rgb:${f(y,p)}/${f(C,p)}/${f(v,p)}`}},5770:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PAYLOAD_LIMIT=void 0,r.PAYLOAD_LIMIT=1e7},6351:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DcsHandler=r.DcsParser=void 0;let a=s(482),f=s(8742),l=s(5770),p=[];r.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=p,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=p}registerHandler(C,v){this._handlers[C]===void 0&&(this._handlers[C]=[]);let c=this._handlers[C];return c.push(v),{dispose:()=>{let d=c.indexOf(v);d!==-1&&c.splice(d,1)}}}clearHandler(C){this._handlers[C]&&delete this._handlers[C]}setHandlerFallback(C){this._handlerFb=C}reset(){if(this._active.length)for(let C=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;C>=0;--C)this._active[C].unhook(!1);this._stack.paused=!1,this._active=p,this._ident=0}hook(C,v){if(this.reset(),this._ident=C,this._active=this._handlers[C]||p,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(v);else this._handlerFb(this._ident,"HOOK",v)}put(C,v,c){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(C,v,c);else this._handlerFb(this._ident,"PUT",(0,a.utf32ToString)(C,v,c))}unhook(C,v=!0){if(this._active.length){let c=!1,d=this._active.length-1,u=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,c=v,u=this._stack.fallThrough,this._stack.paused=!1),!u&&c===!1){for(;d>=0&&(c=this._active[d].unhook(C),c!==!0);d--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,c;d--}for(;d>=0;d--)if(c=this._active[d].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",C);this._active=p,this._ident=0}};let y=new f.Params;y.addParam(0),r.DcsHandler=class{constructor(C){this._handler=C,this._data="",this._params=y,this._hitLimit=!1}hook(C){this._params=C.length>1||C.params[0]?C.clone():y,this._data="",this._hitLimit=!1}put(C,v,c){this._hitLimit||(this._data+=(0,a.utf32ToString)(C,v,c),this._data.length>l.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(C){let v=!1;if(this._hitLimit)v=!1;else if(C&&(v=this._handler(this._data,this._params),v instanceof Promise))return v.then(c=>(this._params=y,this._data="",this._hitLimit=!1,c));return this._params=y,this._data="",this._hitLimit=!1,v}}},2015:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.EscapeSequenceParser=r.VT500_TRANSITION_TABLE=r.TransitionTable=void 0;let a=s(844),f=s(8742),l=s(6242),p=s(6351);class y{constructor(d){this.table=new Uint8Array(d)}setDefault(d,u){this.table.fill(d<<4|u)}add(d,u,h,g){this.table[u<<8|d]=h<<4|g}addMany(d,u,h,g){for(let _=0;_<d.length;_++)this.table[u<<8|d[_]]=h<<4|g}}r.TransitionTable=y;let C=160;r.VT500_TRANSITION_TABLE=function(){let c=new y(4095),d=Array.apply(null,Array(256)).map((w,m)=>m),u=(w,m)=>d.slice(w,m),h=u(32,127),g=u(0,24);g.push(25),g.push.apply(g,u(28,32));let _=u(0,14),S;for(S in c.setDefault(1,0),c.addMany(h,0,2,0),_)c.addMany([24,26,153,154],S,3,0),c.addMany(u(128,144),S,3,0),c.addMany(u(144,152),S,3,0),c.add(156,S,0,0),c.add(27,S,11,1),c.add(157,S,4,8),c.addMany([152,158,159],S,0,7),c.add(155,S,11,3),c.add(144,S,11,9);return c.addMany(g,0,3,0),c.addMany(g,1,3,1),c.add(127,1,0,1),c.addMany(g,8,0,8),c.addMany(g,3,3,3),c.add(127,3,0,3),c.addMany(g,4,3,4),c.add(127,4,0,4),c.addMany(g,6,3,6),c.addMany(g,5,3,5),c.add(127,5,0,5),c.addMany(g,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(h,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(u(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(h,7,0,7),c.addMany(g,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(u(64,127),3,7,0),c.addMany(u(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(u(48,60),4,8,4),c.addMany(u(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(u(32,64),6,0,6),c.add(127,6,0,6),c.addMany(u(64,127),6,0,0),c.addMany(u(32,48),3,9,5),c.addMany(u(32,48),5,9,5),c.addMany(u(48,64),5,0,6),c.addMany(u(64,127),5,7,0),c.addMany(u(32,48),4,9,5),c.addMany(u(32,48),1,9,2),c.addMany(u(32,48),2,9,2),c.addMany(u(48,127),2,10,0),c.addMany(u(48,80),1,10,0),c.addMany(u(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(u(96,127),1,10,0),c.add(80,1,11,9),c.addMany(g,9,0,9),c.add(127,9,0,9),c.addMany(u(28,32),9,0,9),c.addMany(u(32,48),9,9,12),c.addMany(u(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(g,11,0,11),c.addMany(u(32,128),11,0,11),c.addMany(u(28,32),11,0,11),c.addMany(g,10,0,10),c.add(127,10,0,10),c.addMany(u(28,32),10,0,10),c.addMany(u(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(u(32,48),10,9,12),c.addMany(g,12,0,12),c.add(127,12,0,12),c.addMany(u(28,32),12,0,12),c.addMany(u(32,48),12,9,12),c.addMany(u(48,64),12,0,11),c.addMany(u(64,127),12,12,13),c.addMany(u(64,127),10,12,13),c.addMany(u(64,127),9,12,13),c.addMany(g,13,13,13),c.addMany(h,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(C,0,2,0),c.add(C,8,5,8),c.add(C,6,0,6),c.add(C,11,0,11),c.add(C,13,13,13),c}();class v extends a.Disposable{constructor(d=r.VT500_TRANSITION_TABLE){super(),this._transitions=d,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(u,h,g)=>{},this._executeHandlerFb=u=>{},this._csiHandlerFb=(u,h)=>{},this._escHandlerFb=u=>{},this._errorHandlerFb=u=>u,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,a.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new l.OscParser),this._dcsParser=this.register(new p.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(d,u=[64,126]){let h=0;if(d.prefix){if(d.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=d.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(d.intermediates){if(d.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let _=0;_<d.intermediates.length;++_){let S=d.intermediates.charCodeAt(_);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=S}}if(d.final.length!==1)throw new Error("final must be a single byte");let g=d.final.charCodeAt(0);if(u[0]>g||g>u[1])throw new Error(`final must be in range ${u[0]} .. ${u[1]}`);return h<<=8,h|=g,h}identToString(d){let u=[];for(;d;)u.push(String.fromCharCode(255&d)),d>>=8;return u.reverse().join("")}setPrintHandler(d){this._printHandler=d}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(d,u){let h=this._identifier(d,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);let g=this._escHandlers[h];return g.push(u),{dispose:()=>{let _=g.indexOf(u);_!==-1&&g.splice(_,1)}}}clearEscHandler(d){this._escHandlers[this._identifier(d,[48,126])]&&delete this._escHandlers[this._identifier(d,[48,126])]}setEscHandlerFallback(d){this._escHandlerFb=d}setExecuteHandler(d,u){this._executeHandlers[d.charCodeAt(0)]=u}clearExecuteHandler(d){this._executeHandlers[d.charCodeAt(0)]&&delete this._executeHandlers[d.charCodeAt(0)]}setExecuteHandlerFallback(d){this._executeHandlerFb=d}registerCsiHandler(d,u){let h=this._identifier(d);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);let g=this._csiHandlers[h];return g.push(u),{dispose:()=>{let _=g.indexOf(u);_!==-1&&g.splice(_,1)}}}clearCsiHandler(d){this._csiHandlers[this._identifier(d)]&&delete this._csiHandlers[this._identifier(d)]}setCsiHandlerFallback(d){this._csiHandlerFb=d}registerDcsHandler(d,u){return this._dcsParser.registerHandler(this._identifier(d),u)}clearDcsHandler(d){this._dcsParser.clearHandler(this._identifier(d))}setDcsHandlerFallback(d){this._dcsParser.setHandlerFallback(d)}registerOscHandler(d,u){return this._oscParser.registerHandler(d,u)}clearOscHandler(d){this._oscParser.clearHandler(d)}setOscHandlerFallback(d){this._oscParser.setHandlerFallback(d)}setErrorHandler(d){this._errorHandler=d}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(d,u,h,g,_){this._parseStack.state=d,this._parseStack.handlers=u,this._parseStack.handlerPos=h,this._parseStack.transition=g,this._parseStack.chunkPos=_}parse(d,u,h){let g,_=0,S=0,w=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,w=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let m=this._parseStack.handlers,D=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&D>-1){for(;D>=0&&(g=m[D](this._params),g!==!0);D--)if(g instanceof Promise)return this._parseStack.handlerPos=D,g}this._parseStack.handlers=[];break;case 4:if(h===!1&&D>-1){for(;D>=0&&(g=m[D](),g!==!0);D--)if(g instanceof Promise)return this._parseStack.handlerPos=D,g}this._parseStack.handlers=[];break;case 6:if(_=d[this._parseStack.chunkPos],g=this._dcsParser.unhook(_!==24&&_!==26,h),g)return g;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(_=d[this._parseStack.chunkPos],g=this._oscParser.end(_!==24&&_!==26,h),g)return g;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,w=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let m=w;m<u;++m){switch(_=d[m],S=this._transitions.table[this.currentState<<8|(_<160?_:C)],S>>4){case 2:for(let A=m+1;;++A){if(A>=u||(_=d[A])<32||_>126&&_<C){this._printHandler(d,m,A),m=A-1;break}if(++A>=u||(_=d[A])<32||_>126&&_<C){this._printHandler(d,m,A),m=A-1;break}if(++A>=u||(_=d[A])<32||_>126&&_<C){this._printHandler(d,m,A),m=A-1;break}if(++A>=u||(_=d[A])<32||_>126&&_<C){this._printHandler(d,m,A),m=A-1;break}}break;case 3:this._executeHandlers[_]?this._executeHandlers[_]():this._executeHandlerFb(_),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:m,code:_,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let D=this._csiHandlers[this._collect<<8|_],I=D?D.length-1:-1;for(;I>=0&&(g=D[I](this._params),g!==!0);I--)if(g instanceof Promise)return this._preserveStack(3,D,I,S,m),g;I<0&&this._csiHandlerFb(this._collect<<8|_,this._params),this.precedingCodepoint=0;break;case 8:do switch(_){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(_-48)}while(++m<u&&(_=d[m])>47&&_<60);m--;break;case 9:this._collect<<=8,this._collect|=_;break;case 10:let R=this._escHandlers[this._collect<<8|_],M=R?R.length-1:-1;for(;M>=0&&(g=R[M](),g!==!0);M--)if(g instanceof Promise)return this._preserveStack(4,R,M,S,m),g;M<0&&this._escHandlerFb(this._collect<<8|_),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|_,this._params);break;case 13:for(let A=m+1;;++A)if(A>=u||(_=d[A])===24||_===26||_===27||_>127&&_<C){this._dcsParser.put(d,m,A),m=A-1;break}break;case 14:if(g=this._dcsParser.unhook(_!==24&&_!==26),g)return this._preserveStack(6,[],0,S,m),g;_===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let A=m+1;;A++)if(A>=u||(_=d[A])<32||_>127&&_<C){this._oscParser.put(d,m,A),m=A-1;break}break;case 6:if(g=this._oscParser.end(_!==24&&_!==26),g)return this._preserveStack(5,[],0,S,m),g;_===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&S}}}r.EscapeSequenceParser=v},6242:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OscHandler=r.OscParser=void 0;let a=s(5770),f=s(482),l=[];r.OscParser=class{constructor(){this._state=0,this._active=l,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(p,y){this._handlers[p]===void 0&&(this._handlers[p]=[]);let C=this._handlers[p];return C.push(y),{dispose:()=>{let v=C.indexOf(y);v!==-1&&C.splice(v,1)}}}clearHandler(p){this._handlers[p]&&delete this._handlers[p]}setHandlerFallback(p){this._handlerFb=p}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=l}reset(){if(this._state===2)for(let p=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;p>=0;--p)this._active[p].end(!1);this._stack.paused=!1,this._active=l,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||l,this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].start();else this._handlerFb(this._id,"START")}_put(p,y,C){if(this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].put(p,y,C);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(p,y,C))}start(){this.reset(),this._state=1}put(p,y,C){if(this._state!==3){if(this._state===1)for(;y<C;){let v=p[y++];if(v===59){this._state=2,this._start();break}if(v<48||57<v)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+v-48}this._state===2&&C-y>0&&this._put(p,y,C)}}end(p,y=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let C=!1,v=this._active.length-1,c=!1;if(this._stack.paused&&(v=this._stack.loopPosition-1,C=y,c=this._stack.fallThrough,this._stack.paused=!1),!c&&C===!1){for(;v>=0&&(C=this._active[v].end(p),C!==!0);v--)if(C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!1,C;v--}for(;v>=0;v--)if(C=this._active[v].end(!1),C instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=v,this._stack.fallThrough=!0,C}else this._handlerFb(this._id,"END",p);this._active=l,this._id=-1,this._state=0}}},r.OscHandler=class{constructor(p){this._handler=p,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(p,y,C){this._hitLimit||(this._data+=(0,f.utf32ToString)(p,y,C),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(p){let y=!1;if(this._hitLimit)y=!1;else if(p&&(y=this._handler(this._data),y instanceof Promise))return y.then(C=>(this._data="",this._hitLimit=!1,C));return this._data="",this._hitLimit=!1,y}}},8742:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Params=void 0;let s=2147483647;class a{static fromArray(l){let p=new a;if(!l.length)return p;for(let y=Array.isArray(l[0])?1:0;y<l.length;++y){let C=l[y];if(Array.isArray(C))for(let v=0;v<C.length;++v)p.addSubParam(C[v]);else p.addParam(C)}return p}constructor(l=32,p=32){if(this.maxLength=l,this.maxSubParamsLength=p,p>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(l),this.length=0,this._subParams=new Int32Array(p),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(l),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){let l=new a(this.maxLength,this.maxSubParamsLength);return l.params.set(this.params),l.length=this.length,l._subParams.set(this._subParams),l._subParamsLength=this._subParamsLength,l._subParamsIdx.set(this._subParamsIdx),l._rejectDigits=this._rejectDigits,l._rejectSubDigits=this._rejectSubDigits,l._digitIsSub=this._digitIsSub,l}toArray(){let l=[];for(let p=0;p<this.length;++p){l.push(this.params[p]);let y=this._subParamsIdx[p]>>8,C=255&this._subParamsIdx[p];C-y>0&&l.push(Array.prototype.slice.call(this._subParams,y,C))}return l}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(l){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=l>s?s:l}}addSubParam(l){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(l<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=l>s?s:l,this._subParamsIdx[this.length-1]++}}hasSubParams(l){return(255&this._subParamsIdx[l])-(this._subParamsIdx[l]>>8)>0}getSubParams(l){let p=this._subParamsIdx[l]>>8,y=255&this._subParamsIdx[l];return y-p>0?this._subParams.subarray(p,y):null}getSubParamsAll(){let l={};for(let p=0;p<this.length;++p){let y=this._subParamsIdx[p]>>8,C=255&this._subParamsIdx[p];C-y>0&&(l[p]=this._subParams.slice(y,C))}return l}addDigit(l){let p;if(this._rejectDigits||!(p=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let y=this._digitIsSub?this._subParams:this.params,C=y[p-1];y[p-1]=~C?Math.min(10*C+l,s):l}}r.Params=a},5741:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AddonManager=void 0,r.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let s=this._addons.length-1;s>=0;s--)this._addons[s].instance.dispose()}loadAddon(s,a){let f={instance:a,dispose:a.dispose,isDisposed:!1};this._addons.push(f),a.dispose=()=>this._wrappedAddonDispose(f),a.activate(s)}_wrappedAddonDispose(s){if(s.isDisposed)return;let a=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===s){a=f;break}if(a===-1)throw new Error("Could not dispose an addon that has not been loaded");s.isDisposed=!0,s.dispose.apply(s.instance),this._addons.splice(a,1)}}},8771:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferApiView=void 0;let a=s(3785),f=s(511);r.BufferApiView=class{constructor(l,p){this._buffer=l,this.type=p}init(l){return this._buffer=l,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(l){let p=this._buffer.lines.get(l);if(p)return new a.BufferLineApiView(p)}getNullCell(){return new f.CellData}}},3785:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLineApiView=void 0;let a=s(511);r.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,l){if(!(f<0||f>=this._line.length))return l?(this._line.loadCell(f,l),l):this._line.loadCell(f,new a.CellData)}translateToString(f,l,p){return this._line.translateToString(f,l,p)}}},8285:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferNamespaceApi=void 0;let a=s(8771),f=s(8460),l=s(844);class p extends l.Disposable{constructor(C){super(),this._core=C,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new a.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new a.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}r.BufferNamespaceApi=p},7975:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ParserApi=void 0,r.ParserApi=class{constructor(s){this._core=s}registerCsiHandler(s,a){return this._core.registerCsiHandler(s,f=>a(f.toArray()))}addCsiHandler(s,a){return this.registerCsiHandler(s,a)}registerDcsHandler(s,a){return this._core.registerDcsHandler(s,(f,l)=>a(f,l.toArray()))}addDcsHandler(s,a){return this.registerDcsHandler(s,a)}registerEscHandler(s,a){return this._core.registerEscHandler(s,a)}addEscHandler(s,a){return this.registerEscHandler(s,a)}registerOscHandler(s,a){return this._core.registerOscHandler(s,a)}addOscHandler(s,a){return this.registerOscHandler(s,a)}}},7090:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeApi=void 0,r.UnicodeApi=class{constructor(s){this._core=s}register(s){this._core.unicodeService.register(s)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(s){this._core.unicodeService.activeVersion=s}}},744:function(o,r,s){var a=this&&this.__decorate||function(c,d,u,h){var g,_=arguments.length,S=_<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,d,u,h);else for(var w=c.length-1;w>=0;w--)(g=c[w])&&(S=(_<3?g(S):_>3?g(d,u,S):g(d,u))||S);return _>3&&S&&Object.defineProperty(d,u,S),S},f=this&&this.__param||function(c,d){return function(u,h){d(u,h,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferService=r.MINIMUM_ROWS=r.MINIMUM_COLS=void 0;let l=s(8460),p=s(844),y=s(5295),C=s(2585);r.MINIMUM_COLS=2,r.MINIMUM_ROWS=1;let v=r.BufferService=class extends p.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,r.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,r.MINIMUM_ROWS),this.buffers=this.register(new y.BufferSet(c,this))}resize(c,d){this.cols=c,this.rows=d,this.buffers.resize(c,d),this._onResize.fire({cols:c,rows:d})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,d=!1){let u=this.buffer,h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===c.fg&&h.getBg(0)===c.bg||(h=u.getBlankLine(c,d),this._cachedBlankLine=h),h.isWrapped=d;let g=u.ybase+u.scrollTop,_=u.ybase+u.scrollBottom;if(u.scrollTop===0){let S=u.lines.isFull;_===u.lines.length-1?S?u.lines.recycle().copyFrom(h):u.lines.push(h.clone()):u.lines.splice(_+1,0,h.clone()),S?this.isUserScrolling&&(u.ydisp=Math.max(u.ydisp-1,0)):(u.ybase++,this.isUserScrolling||u.ydisp++)}else{let S=_-g+1;u.lines.shiftElements(g+1,S-1,-1),u.lines.set(_,h.clone())}this.isUserScrolling||(u.ydisp=u.ybase),this._onScroll.fire(u.ydisp)}scrollLines(c,d,u){let h=this.buffer;if(c<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else c+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);let g=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+c,h.ybase),0),g!==h.ydisp&&(d||this._onScroll.fire(h.ydisp))}};r.BufferService=v=a([f(0,C.IOptionsService)],v)},7994:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CharsetService=void 0,r.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(s){this.glevel=s,this.charset=this._charsets[s]}setgCharset(s,a){this._charsets[s]=a,this.glevel===s&&(this.charset=a)}}},1753:function(o,r,s){var a=this&&this.__decorate||function(h,g,_,S){var w,m=arguments.length,D=m<3?g:S===null?S=Object.getOwnPropertyDescriptor(g,_):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(h,g,_,S);else for(var I=h.length-1;I>=0;I--)(w=h[I])&&(D=(m<3?w(D):m>3?w(g,_,D):w(g,_))||D);return m>3&&D&&Object.defineProperty(g,_,D),D},f=this&&this.__param||function(h,g){return function(_,S){g(_,S,h)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreMouseService=void 0;let l=s(2585),p=s(8460),y=s(844),C={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function v(h,g){let _=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(_|=64,_|=h.action):(_|=3&h.button,4&h.button&&(_|=64),8&h.button&&(_|=128),h.action===32?_|=32:h.action!==0||g||(_|=3)),_}let c=String.fromCharCode,d={DEFAULT:h=>{let g=[v(h,!1)+32,h.col+32,h.row+32];return g[0]>255||g[1]>255||g[2]>255?"":`\x1B[M${c(g[0])}${c(g[1])}${c(g[2])}`},SGR:h=>{let g=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${v(h,!0)};${h.col};${h.row}${g}`},SGR_PIXELS:h=>{let g=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${v(h,!0)};${h.x};${h.y}${g}`}},u=r.CoreMouseService=class extends y.Disposable{constructor(h,g){super(),this._bufferService=h,this._coreService=g,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new p.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let _ of Object.keys(C))this.addProtocol(_,C[_]);for(let _ of Object.keys(d))this.addEncoding(_,d[_]);this.reset()}addProtocol(h,g){this._protocols[h]=g}addEncoding(h,g){this._encodings[h]=g}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;let g=this._encodings[this._activeEncoding](h);return g&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(g):this._coreService.triggerDataEvent(g,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,g,_){if(_){if(h.x!==g.x||h.y!==g.y)return!1}else if(h.col!==g.col||h.row!==g.row)return!1;return h.button===g.button&&h.action===g.action&&h.ctrl===g.ctrl&&h.alt===g.alt&&h.shift===g.shift}};r.CoreMouseService=u=a([f(0,l.IBufferService),f(1,l.ICoreService)],u)},6975:function(o,r,s){var a=this&&this.__decorate||function(u,h,g,_){var S,w=arguments.length,m=w<3?h:_===null?_=Object.getOwnPropertyDescriptor(h,g):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(u,h,g,_);else for(var D=u.length-1;D>=0;D--)(S=u[D])&&(m=(w<3?S(m):w>3?S(h,g,m):S(h,g))||m);return w>3&&m&&Object.defineProperty(h,g,m),m},f=this&&this.__param||function(u,h){return function(g,_){h(g,_,u)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreService=void 0;let l=s(1439),p=s(8460),y=s(844),C=s(2585),v=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),d=r.CoreService=class extends y.Disposable{constructor(u,h,g){super(),this._bufferService=u,this._logService=h,this._optionsService=g,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new p.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new p.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new p.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new p.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,l.clone)(v),this.decPrivateModes=(0,l.clone)(c)}reset(){this.modes=(0,l.clone)(v),this.decPrivateModes=(0,l.clone)(c)}triggerDataEvent(u,h=!1){if(this._optionsService.rawOptions.disableStdin)return;let g=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&g.ybase!==g.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${u}"`,()=>u.split("").map(_=>_.charCodeAt(0))),this._onData.fire(u)}triggerBinaryEvent(u){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${u}"`,()=>u.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(u))}};r.CoreService=d=a([f(0,C.IBufferService),f(1,C.ILogService),f(2,C.IOptionsService)],d)},9074:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DecorationService=void 0;let a=s(8055),f=s(8460),l=s(844),p=s(6106),y=0,C=0;class v extends l.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new p.SortedList(u=>u?.marker.line),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,l.toDisposable)(()=>this.reset()))}registerDecoration(u){if(u.marker.isDisposed)return;let h=new c(u);if(h){let g=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),g.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(let u of this._decorations.values())u.dispose();this._decorations.clear()}*getDecorationsAtCell(u,h,g){var _,S,w;let m=0,D=0;for(let I of this._decorations.getKeyIterator(h))m=(_=I.options.x)!==null&&_!==void 0?_:0,D=m+((S=I.options.width)!==null&&S!==void 0?S:1),u>=m&&u<D&&(!g||((w=I.options.layer)!==null&&w!==void 0?w:"bottom")===g)&&(yield I)}forEachDecorationAtCell(u,h,g,_){this._decorations.forEachByKey(h,S=>{var w,m,D;y=(w=S.options.x)!==null&&w!==void 0?w:0,C=y+((m=S.options.width)!==null&&m!==void 0?m:1),u>=y&&u<C&&(!g||((D=S.options.layer)!==null&&D!==void 0?D:"bottom")===g)&&_(S)})}}r.DecorationService=v;class c extends l.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=a.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=a.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(u){super(),this.options=u,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=u.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InstantiationService=r.ServiceCollection=void 0;let a=s(2585),f=s(8343);class l{constructor(...y){this._entries=new Map;for(let[C,v]of y)this.set(C,v)}set(y,C){let v=this._entries.get(y);return this._entries.set(y,C),v}forEach(y){for(let[C,v]of this._entries.entries())y(C,v)}has(y){return this._entries.has(y)}get(y){return this._entries.get(y)}}r.ServiceCollection=l,r.InstantiationService=class{constructor(){this._services=new l,this._services.set(a.IInstantiationService,this)}setService(p,y){this._services.set(p,y)}getService(p){return this._services.get(p)}createInstance(p,...y){let C=(0,f.getServiceDependencies)(p).sort((d,u)=>d.index-u.index),v=[];for(let d of C){let u=this._services.get(d.id);if(!u)throw new Error(`[createInstance] ${p.name} depends on UNKNOWN service ${d.id}.`);v.push(u)}let c=C.length>0?C[0].index:y.length;if(y.length!==c)throw new Error(`[createInstance] First service dependency of ${p.name} at position ${c+1} conflicts with ${y.length} static arguments`);return new p(...y,...v)}}},7866:function(o,r,s){var a=this&&this.__decorate||function(c,d,u,h){var g,_=arguments.length,S=_<3?d:h===null?h=Object.getOwnPropertyDescriptor(d,u):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(c,d,u,h);else for(var w=c.length-1;w>=0;w--)(g=c[w])&&(S=(_<3?g(S):_>3?g(d,u,S):g(d,u))||S);return _>3&&S&&Object.defineProperty(d,u,S),S},f=this&&this.__param||function(c,d){return function(u,h){d(u,h,c)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;let l=s(844),p=s(2585),y={trace:p.LogLevelEnum.TRACE,debug:p.LogLevelEnum.DEBUG,info:p.LogLevelEnum.INFO,warn:p.LogLevelEnum.WARN,error:p.LogLevelEnum.ERROR,off:p.LogLevelEnum.OFF},C,v=r.LogService=class extends l.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=p.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),C=this}_updateLogLevel(){this._logLevel=y[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let d=0;d<c.length;d++)typeof c[d]=="function"&&(c[d]=c[d]())}_log(c,d,u){this._evalLazyOptionalParams(u),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+d,...u)}trace(c,...d){var u,h;this._logLevel<=p.LogLevelEnum.TRACE&&this._log((h=(u=this._optionsService.options.logger)===null||u===void 0?void 0:u.trace.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,c,d)}debug(c,...d){var u,h;this._logLevel<=p.LogLevelEnum.DEBUG&&this._log((h=(u=this._optionsService.options.logger)===null||u===void 0?void 0:u.debug.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,c,d)}info(c,...d){var u,h;this._logLevel<=p.LogLevelEnum.INFO&&this._log((h=(u=this._optionsService.options.logger)===null||u===void 0?void 0:u.info.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.info,c,d)}warn(c,...d){var u,h;this._logLevel<=p.LogLevelEnum.WARN&&this._log((h=(u=this._optionsService.options.logger)===null||u===void 0?void 0:u.warn.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.warn,c,d)}error(c,...d){var u,h;this._logLevel<=p.LogLevelEnum.ERROR&&this._log((h=(u=this._optionsService.options.logger)===null||u===void 0?void 0:u.error.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.error,c,d)}};r.LogService=v=a([f(0,p.IOptionsService)],v),r.setTraceLogger=function(c){C=c},r.traceCall=function(c,d,u){if(typeof u.value!="function")throw new Error("not supported");let h=u.value;u.value=function(...g){if(C.logLevel!==p.LogLevelEnum.TRACE)return h.apply(this,g);C.trace(`GlyphRenderer#${h.name}(${g.map(S=>JSON.stringify(S)).join(", ")})`);let _=h.apply(this,g);return C.trace(`GlyphRenderer#${h.name} return`,_),_}}},7302:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OptionsService=r.DEFAULT_OPTIONS=void 0;let a=s(8460),f=s(844),l=s(6114);r.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:l.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let p=["normal","bold","100","200","300","400","500","600","700","800","900"];class y extends f.Disposable{constructor(v){super(),this._onOptionChange=this.register(new a.EventEmitter),this.onOptionChange=this._onOptionChange.event;let c=Object.assign({},r.DEFAULT_OPTIONS);for(let d in v)if(d in c)try{let u=v[d];c[d]=this._sanitizeAndValidateOption(d,u)}catch(u){console.error(u)}this.rawOptions=c,this.options=Object.assign({},c),this._setupOptions()}onSpecificOptionChange(v,c){return this.onOptionChange(d=>{d===v&&c(this.rawOptions[v])})}onMultipleOptionChange(v,c){return this.onOptionChange(d=>{v.indexOf(d)!==-1&&c()})}_setupOptions(){let v=d=>{if(!(d in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);return this.rawOptions[d]},c=(d,u)=>{if(!(d in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${d}"`);u=this._sanitizeAndValidateOption(d,u),this.rawOptions[d]!==u&&(this.rawOptions[d]=u,this._onOptionChange.fire(d))};for(let d in this.rawOptions){let u={get:v.bind(this,d),set:c.bind(this,d)};Object.defineProperty(this.options,d,u)}}_sanitizeAndValidateOption(v,c){switch(v){case"cursorStyle":if(c||(c=r.DEFAULT_OPTIONS[v]),!function(d){return d==="block"||d==="underline"||d==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${v}`);break;case"wordSeparator":c||(c=r.DEFAULT_OPTIONS[v]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=p.includes(c)?c:r.DEFAULT_OPTIONS[v];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${v} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${v} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${v} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${v} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}r.OptionsService=y},2660:function(o,r,s){var a=this&&this.__decorate||function(y,C,v,c){var d,u=arguments.length,h=u<3?C:c===null?c=Object.getOwnPropertyDescriptor(C,v):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(y,C,v,c);else for(var g=y.length-1;g>=0;g--)(d=y[g])&&(h=(u<3?d(h):u>3?d(C,v,h):d(C,v))||h);return u>3&&h&&Object.defineProperty(C,v,h),h},f=this&&this.__param||function(y,C){return function(v,c){C(v,c,y)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkService=void 0;let l=s(2585),p=r.OscLinkService=class{constructor(y){this._bufferService=y,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(y){let C=this._bufferService.buffer;if(y.id===void 0){let g=C.addMarker(C.ybase+C.y),_={data:y,id:this._nextId++,lines:[g]};return g.onDispose(()=>this._removeMarkerFromLink(_,g)),this._dataByLinkId.set(_.id,_),_.id}let v=y,c=this._getEntryIdKey(v),d=this._entriesWithId.get(c);if(d)return this.addLineToLink(d.id,C.ybase+C.y),d.id;let u=C.addMarker(C.ybase+C.y),h={id:this._nextId++,key:this._getEntryIdKey(v),data:v,lines:[u]};return u.onDispose(()=>this._removeMarkerFromLink(h,u)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(y,C){let v=this._dataByLinkId.get(y);if(v&&v.lines.every(c=>c.line!==C)){let c=this._bufferService.buffer.addMarker(C);v.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(v,c))}}getLinkData(y){var C;return(C=this._dataByLinkId.get(y))===null||C===void 0?void 0:C.data}_getEntryIdKey(y){return`${y.id};;${y.uri}`}_removeMarkerFromLink(y,C){let v=y.lines.indexOf(C);v!==-1&&(y.lines.splice(v,1),y.lines.length===0&&(y.data.id!==void 0&&this._entriesWithId.delete(y.key),this._dataByLinkId.delete(y.id)))}};r.OscLinkService=p=a([f(0,l.IBufferService)],p)},8343:(o,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;let s="di$target",a="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(f){return f[a]||[]},r.createDecorator=function(f){if(r.serviceRegistry.has(f))return r.serviceRegistry.get(f);let l=function(p,y,C){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(v,c,d){c[s]===c?c[a].push({id:v,index:d}):(c[a]=[{id:v,index:d}],c[s]=c)})(l,p,C)};return l.toString=()=>f,r.serviceRegistry.set(f,l),l}},2585:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;let a=s(8343);var f;r.IBufferService=(0,a.createDecorator)("BufferService"),r.ICoreMouseService=(0,a.createDecorator)("CoreMouseService"),r.ICoreService=(0,a.createDecorator)("CoreService"),r.ICharsetService=(0,a.createDecorator)("CharsetService"),r.IInstantiationService=(0,a.createDecorator)("InstantiationService"),function(l){l[l.TRACE=0]="TRACE",l[l.DEBUG=1]="DEBUG",l[l.INFO=2]="INFO",l[l.WARN=3]="WARN",l[l.ERROR=4]="ERROR",l[l.OFF=5]="OFF"}(f||(r.LogLevelEnum=f={})),r.ILogService=(0,a.createDecorator)("LogService"),r.IOptionsService=(0,a.createDecorator)("OptionsService"),r.IOscLinkService=(0,a.createDecorator)("OscLinkService"),r.IUnicodeService=(0,a.createDecorator)("UnicodeService"),r.IDecorationService=(0,a.createDecorator)("DecorationService")},1480:(o,r,s)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeService=void 0;let a=s(8460),f=s(225);r.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new a.EventEmitter,this.onChange=this._onChange.event;let l=new f.UnicodeV6;this.register(l),this._active=l.version,this._activeProvider=l}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(l){if(!this._providers[l])throw new Error(`unknown Unicode version "${l}"`);this._active=l,this._activeProvider=this._providers[l],this._onChange.fire(l)}register(l){this._providers[l.version]=l}wcwidth(l){return this._activeProvider.wcwidth(l)}getStringCellWidth(l){let p=0,y=l.length;for(let C=0;C<y;++C){let v=l.charCodeAt(C);if(55296<=v&&v<=56319){if(++C>=y)return p+this.wcwidth(v);let c=l.charCodeAt(C);56320<=c&&c<=57343?v=1024*(v-55296)+c-56320+65536:p+=this.wcwidth(c)}p+=this.wcwidth(v)}return p}}}},t={};function n(o){var r=t[o];if(r!==void 0)return r.exports;var s=t[o]={exports:{}};return e[o].call(s.exports,s,s.exports,n),s.exports}var i={};return(()=>{var o=i;Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;let r=n(9042),s=n(3236),a=n(844),f=n(5741),l=n(8285),p=n(7975),y=n(7090),C=["cols","rows"];class v extends a.Disposable{constructor(d){super(),this._core=this.register(new s.Terminal(d)),this._addonManager=this.register(new f.AddonManager),this._publicOptions=Object.assign({},this._core.options);let u=g=>this._core.options[g],h=(g,_)=>{this._checkReadonlyOptions(g),this._core.options[g]=_};for(let g in this._core.options){let _={get:u.bind(this,g),set:h.bind(this,g)};Object.defineProperty(this._publicOptions,g,_)}}_checkReadonlyOptions(d){if(C.includes(d))throw new Error(`Option "${d}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new p.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new y.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new l.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let d=this._core.coreService.decPrivateModes,u="none";switch(this._core.coreMouseService.activeProtocol){case"X10":u="x10";break;case"VT200":u="vt200";break;case"DRAG":u="drag";break;case"ANY":u="any"}return{applicationCursorKeysMode:d.applicationCursorKeys,applicationKeypadMode:d.applicationKeypad,bracketedPasteMode:d.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:u,originMode:d.origin,reverseWraparoundMode:d.reverseWraparound,sendFocusMode:d.sendFocus,wraparoundMode:d.wraparound}}get options(){return this._publicOptions}set options(d){for(let u in d)this._publicOptions[u]=d[u]}blur(){this._core.blur()}focus(){this._core.focus()}resize(d,u){this._verifyIntegers(d,u),this._core.resize(d,u)}open(d){this._core.open(d)}attachCustomKeyEventHandler(d){this._core.attachCustomKeyEventHandler(d)}registerLinkProvider(d){return this._core.registerLinkProvider(d)}registerCharacterJoiner(d){return this._checkProposedApi(),this._core.registerCharacterJoiner(d)}deregisterCharacterJoiner(d){this._checkProposedApi(),this._core.deregisterCharacterJoiner(d)}registerMarker(d=0){return this._verifyIntegers(d),this._core.registerMarker(d)}registerDecoration(d){var u,h,g;return this._checkProposedApi(),this._verifyPositiveIntegers((u=d.x)!==null&&u!==void 0?u:0,(h=d.width)!==null&&h!==void 0?h:0,(g=d.height)!==null&&g!==void 0?g:0),this._core.registerDecoration(d)}hasSelection(){return this._core.hasSelection()}select(d,u,h){this._verifyIntegers(d,u,h),this._core.select(d,u,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(d,u){this._verifyIntegers(d,u),this._core.selectLines(d,u)}dispose(){super.dispose()}scrollLines(d){this._verifyIntegers(d),this._core.scrollLines(d)}scrollPages(d){this._verifyIntegers(d),this._core.scrollPages(d)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(d){this._verifyIntegers(d),this._core.scrollToLine(d)}clear(){this._core.clear()}write(d,u){this._core.write(d,u)}writeln(d,u){this._core.write(d),this._core.write(`\r
`,u)}paste(d){this._core.paste(d)}refresh(d,u){this._verifyIntegers(d,u),this._core.refresh(d,u)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(d){this._addonManager.loadAddon(this,d)}static get strings(){return r}_verifyIntegers(...d){for(let u of d)if(u===1/0||isNaN(u)||u%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...d){for(let u of d)if(u&&(u===1/0||isNaN(u)||u%1!=0||u<0))throw new Error("This API only accepts positive integers")}}o.Terminal=v})(),i})())});var vl=Bs((Cr,Os)=>{"use strict";(function(e,t){typeof Cr=="object"&&typeof Os=="object"?Os.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Cr=="object"?Cr.FitAddon=t():e.FitAddon=t()})(self,()=>(()=>{"use strict";var e={};return(()=>{var t=e;Object.defineProperty(t,"__esModule",{value:!0}),t.FitAddon=void 0,t.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){let n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;let i=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(i._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let n=this._terminal._core,i=n._renderService.dimensions;if(i.css.cell.width===0||i.css.cell.height===0)return;let o=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,r=window.getComputedStyle(this._terminal.element.parentElement),s=parseInt(r.getPropertyValue("height")),a=Math.max(0,parseInt(r.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),l=s-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),p=a-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-o;return{cols:Math.max(2,Math.floor(p/i.css.cell.width)),rows:Math.max(1,Math.floor(l/i.css.cell.height))}}}})(),e})())});var xr=null;var Mr=1,js=Symbol("SIGNAL");function J(e){let t=xr;return xr=e,t}function Vs(){return xr}var Tr={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ol(e){if(!(Or(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Mr)){if(!e.producerMustRecompute(e)&&!Rr(e)){e.dirty=!1,e.lastCleanEpoch=Mr;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=Mr}}function Ar(e){return e&&(e.nextProducerIndex=0),J(e)}function $s(e,t){if(J(t),!(!e||e.producerNode===void 0||e.producerIndexOfThis===void 0||e.producerLastReadVersion===void 0)){if(Or(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Nr(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Rr(e){Lr(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],i=e.producerLastReadVersion[t];if(i!==n.version||(Ol(n),i!==n.version))return!0}return!1}function kr(e){if(Lr(e),Or(e))for(let t=0;t<e.producerNode.length;t++)Nr(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Nr(e,t){if(Ll(e),e.liveConsumerNode.length===1&&Pl(e))for(let i=0;i<e.producerNode.length;i++)Nr(e.producerNode[i],e.producerIndexOfThis[i]);let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let i=e.liveConsumerIndexOfThis[t],o=e.liveConsumerNode[t];Lr(o),o.producerIndexOfThis[i]=t}}function Or(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Lr(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function Ll(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function Pl(e){return e.producerNode!==void 0}function Fl(){throw new Error}var Bl=Fl;function Us(e){Bl=e}function fe(e){return typeof e=="function"}function vn(e){let n=e(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var yn=vn(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,o)=>`${o+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function zt(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var de=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let r of n)r.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(fe(i))try{i()}catch(r){t=r instanceof yn?r.errors:[r]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let r of o)try{Ws(r)}catch(s){t=t??[],s instanceof yn?t=[...t,...s.errors]:t.push(s)}}if(t)throw new yn(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Ws(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&zt(n,t)}remove(t){let{_finalizers:n}=this;n&&zt(n,t),t instanceof e&&t._removeParent(this)}};de.EMPTY=(()=>{let e=new de;return e.closed=!0,e})();var Pr=de.EMPTY;function Cn(e){return e instanceof de||e&&"closed"in e&&fe(e.remove)&&fe(e.add)&&fe(e.unsubscribe)}function Ws(e){fe(e)?e():e.unsubscribe()}var Ce={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var _t={setTimeout(e,t,...n){let{delegate:i}=_t;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=_t;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function zs(e){_t.setTimeout(()=>{let{onUnhandledError:t}=Ce;if(t)t(e);else throw e})}function Fr(){}var qs=Br("C",void 0,void 0);function Gs(e){return Br("E",void 0,e)}function Ks(e){return Br("N",e,void 0)}function Br(e,t,n){return{kind:e,value:t,error:n}}var tt=null;function vt(e){if(Ce.useDeprecatedSynchronousErrorHandling){let t=!tt;if(t&&(tt={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:i}=tt;if(tt=null,n)throw i}}else e()}function Zs(e){Ce.useDeprecatedSynchronousErrorHandling&&tt&&(tt.errorThrown=!0,tt.error=e)}var nt=class extends de{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Cn(t)&&t.add(this)):this.destination=Vl}static create(t,n,i){return new yt(t,n,i)}next(t){this.isStopped?jr(Ks(t),this):this._next(t)}error(t){this.isStopped?jr(Gs(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?jr(qs,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Hl=Function.prototype.bind;function Hr(e,t){return Hl.call(e,t)}var Vr=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){Sn(i)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){Sn(i)}else Sn(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Sn(n)}}},yt=class extends nt{constructor(t,n,i){super();let o;if(fe(t)||!t)o={next:t??void 0,error:n??void 0,complete:i??void 0};else{let r;this&&Ce.useDeprecatedNextContext?(r=Object.create(t),r.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&Hr(t.next,r),error:t.error&&Hr(t.error,r),complete:t.complete&&Hr(t.complete,r)}):o=t}this.destination=new Vr(o)}};function Sn(e){Ce.useDeprecatedSynchronousErrorHandling?Zs(e):zs(e)}function jl(e){throw e}function jr(e,t){let{onStoppedNotification:n}=Ce;n&&_t.setTimeout(()=>n(e,t))}var Vl={closed:!0,next:Fr,error:jl,complete:Fr};var Ys=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Qs(e){return e}function Xs(e){return e.length===0?Qs:e.length===1?e[0]:function(n){return e.reduce((i,o)=>o(i),n)}}var $r=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,o){let r=Ul(n)?n:new yt(n,i,o);return vt(()=>{let{operator:s,source:a}=this;r.add(s?s.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=Js(i),new i((o,r)=>{let s=new yt({next:a=>{try{n(a)}catch(f){r(f),s.unsubscribe()}},error:r,complete:o});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Ys](){return this}pipe(...n){return Xs(n)(this)}toPromise(n){return n=Js(n),new n((i,o)=>{let r;this.subscribe(s=>r=s,s=>o(s),()=>i(r))})}}return e.create=t=>new e(t),e})();function Js(e){var t;return(t=e??Ce.Promise)!==null&&t!==void 0?t:Promise}function $l(e){return e&&fe(e.next)&&fe(e.error)&&fe(e.complete)}function Ul(e){return e&&e instanceof nt||$l(e)&&Cn(e)}function Wl(e){return fe(e?.lift)}function eo(e){return t=>{if(Wl(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function to(e,t,n,i,o){return new Ur(e,t,n,i,o)}var Ur=class extends nt{constructor(t,n,i,o,r,s){super(t),this.onFinalize=r,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(f){t.error(f)}}:super._next,this._error=o?function(a){try{o(a)}catch(f){t.error(f)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var no=vn(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ge=(()=>{class e extends $r{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new Dn(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new no}next(n){vt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){vt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){vt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:o,observers:r}=this;return i||o?Pr:(this.currentObservers=null,r.push(n),new de(()=>{this.currentObservers=null,zt(r,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:o,isStopped:r}=this;i?n.error(o):r&&n.complete()}asObservable(){let n=new $r;return n.source=this,n}}return e.create=(t,n)=>new Dn(t,n),e})(),Dn=class extends Ge{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)}error(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:Pr}};var qt=class extends Ge{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};function Wr(e,t){return eo((n,i)=>{let o=0;n.subscribe(to(i,r=>{i.next(e.call(t,r,o++))}))})}var zl="https://g.co/ng/security#xss",Y=class extends Error{constructor(t,n){super($i(t,n)),this.code=t}};function $i(e,t){return`${`NG0${Math.abs(e)}`}${t?": "+t:""}`}function Wo(e){return{toString:e}.toString()}var $e=globalThis;function re(e){for(let t in e)if(e[t]===re)return t;throw Error("Could not find renamed property on target object.")}function pe(e){if(typeof e=="string")return e;if(Array.isArray(e))return"["+e.map(pe).join(", ")+"]";if(e==null)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;let t=e.toString();if(t==null)return""+t;let n=t.indexOf(`
`);return n===-1?t:t.substring(0,n)}function ro(e,t){return e==null||e===""?t===null?"":t:t==null||t===""?e:e+" "+t}var ql=re({__forward_ref__:re});function zo(e){return e.__forward_ref__=zo,e.toString=function(){return pe(this())},e}function De(e){return Gl(e)?e():e}function Gl(e){return typeof e=="function"&&e.hasOwnProperty(ql)&&e.__forward_ref__===zo}function ie(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function ht(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ui(e){return io(e,qo)||io(e,Go)}function io(e,t){return e.hasOwnProperty(t)?e[t]:null}function Kl(e){let t=e&&(e[qo]||e[Go]);return t||null}function so(e){return e&&(e.hasOwnProperty(oo)||e.hasOwnProperty(Zl))?e[oo]:null}var qo=re({\u0275prov:re}),oo=re({\u0275inj:re}),Go=re({ngInjectableDef:re}),Zl=re({ngInjectorDef:re}),X=class{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ie({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ko(e){return e&&!!e.\u0275providers}var Yl=re({\u0275cmp:re}),Ql=re({\u0275dir:re}),Xl=re({\u0275pipe:re}),Jl=re({\u0275mod:re}),ao=re({\u0275fac:re}),Zt=re({__NG_ELEMENT_ID__:re}),co=re({__NG_ENV_ID__:re});function eu(e){return typeof e=="string"?e:e==null?"":String(e)}function tu(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():eu(e)}function nu(e,t){let n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new Y(-200,e)}function Wi(e,t){throw new Y(-201,!1)}var Z=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(Z||{}),ni;function Zo(){return ni}function xe(e){let t=ni;return ni=e,t}function Yo(e,t,n){let i=Ui(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&Z.Optional)return null;if(t!==void 0)return t;Wi(e,"Injector")}var ru={},Qt=ru,iu="__NG_DI_FLAG__",Rn="ngTempTokenPath",su="ngTokenPath",ou=/\n/gm,au="\u0275",lo="__source",bt;function cu(){return bt}function Ct(e){let t=bt;return bt=e,t}function lu(e,t=Z.Default){if(bt===void 0)throw new Y(-203,!1);return bt===null?Yo(e,void 0,t):bt.get(e,t&Z.Optional?null:void 0,t)}function Q(e,t=Z.Default){return(Zo()||lu)(De(e),t)}function ne(e,t=Z.Default){return Q(e,er(t))}function er(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ri(e){let t=[];for(let n=0;n<e.length;n++){let i=De(e[n]);if(Array.isArray(i)){if(i.length===0)throw new Y(900,!1);let o,r=Z.Default;for(let s=0;s<i.length;s++){let a=i[s],f=uu(a);typeof f=="number"?f===-1?o=a.token:r|=f:o=a}t.push(Q(o,r))}else t.push(Q(i))}return t}function uu(e){return e[iu]}function du(e,t,n,i){let o=e[Rn];throw t[lo]&&o.unshift(t[lo]),e.message=hu(`
`+e.message,o,n,i),e[su]=o,e[Rn]=null,e}function hu(e,t,n,i=null){e=e&&e.charAt(0)===`
`&&e.charAt(1)==au?e.slice(2):e;let o=pe(t);if(Array.isArray(t))o=t.map(pe).join(" -> ");else if(typeof t=="object"){let r=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];r.push(s+":"+(typeof a=="string"?JSON.stringify(a):pe(a)))}o=`{${r.join(", ")}}`}return`${n}${i?"("+i+")":""}[${o}]: ${e.replace(ou,`
  `)}`}function Xt(e,t){let n=e.hasOwnProperty(ao);return n?e[ao]:null}function fu(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let o=e[i],r=t[i];if(n&&(o=n(o),r=n(r)),r!==o)return!1}return!0}function pu(e){return e.flat(Number.POSITIVE_INFINITY)}function zi(e,t){e.forEach(n=>Array.isArray(n)?zi(n,t):t(n))}function Qo(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function kn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function gu(e,t,n,i){let o=e.length;if(o==t)e.push(n,i);else if(o===1)e.push(i,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;){let r=o-2;e[o]=e[r],o--}e[t]=n,e[t+1]=i}}function mu(e,t,n){let i=an(e,t);return i>=0?e[i|1]=n:(i=~i,gu(e,i,t,n)),i}function zr(e,t){let n=an(e,t);if(n>=0)return e[n|1]}function an(e,t){return _u(e,t,1)}function _u(e,t,n){let i=0,o=e.length>>n;for(;o!==i;){let r=i+(o-i>>1),s=e[r<<n];if(t===s)return r<<n;s>t?o=r:i=r+1}return~(o<<n)}var Jt={},we=[],en=new X(""),Xo=new X("",-1),Jo=new X(""),Nn=class{get(t,n=Qt){if(n===Qt){let i=new Error(`NullInjectorError: No provider for ${pe(t)}!`);throw i.name="NullInjectorError",i}return n}},ea=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(ea||{}),ke=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(ke||{}),Ze=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Ze||{});function vu(e,t,n){let i=e.length;for(;;){let o=e.indexOf(t,n);if(o===-1)return o;if(o===0||e.charCodeAt(o-1)<=32){let r=t.length;if(o+r===i||e.charCodeAt(o+r)<=32)return o}n=o+1}}function ii(e,t,n){let i=0;for(;i<n.length;){let o=n[i];if(typeof o=="number"){if(o!==0)break;i++;let r=n[i++],s=n[i++],a=n[i++];e.setAttribute(t,s,a,r)}else{let r=o,s=n[++i];Cu(r)?e.setProperty(t,r,s):e.setAttribute(t,r,s),i++}}return i}function yu(e){return e===3||e===4||e===6}function Cu(e){return e.charCodeAt(0)===64}function qi(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){let o=t[i];typeof o=="number"?n=o:n===0||(n===-1||n===2?uo(e,n,o,null,t[++i]):uo(e,n,o,null,null))}}return e}function uo(e,t,n,i,o){let r=0,s=e.length;if(t===-1)s=-1;else for(;r<e.length;){let a=e[r++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=r-1;break}}}for(;r<e.length;){let a=e[r];if(typeof a=="number")break;if(a===n){if(i===null){o!==null&&(e[r+1]=o);return}else if(i===e[r+1]){e[r+2]=o;return}}r++,i!==null&&r++,o!==null&&r++}s!==-1&&(e.splice(s,0,t),r=s+1),e.splice(r++,0,n),i!==null&&e.splice(r++,0,i),o!==null&&e.splice(r++,0,o)}var ta="ng-template";function Su(e,t,n,i){let o=0;if(i){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&vu(t[o+1].toLowerCase(),n,0)!==-1)return!0}else if(Gi(e))return!1;if(o=t.indexOf(1,o),o>-1){let r;for(;++o<t.length&&typeof(r=t[o])=="string";)if(r.toLowerCase()===n)return!0}return!1}function Gi(e){return e.type===4&&e.value!==ta}function Du(e,t,n){let i=e.type===4&&!n?ta:e.value;return t===i}function wu(e,t,n){let i=4,o=e.attrs,r=o!==null?Iu(o):0,s=!1;for(let a=0;a<t.length;a++){let f=t[a];if(typeof f=="number"){if(!s&&!Se(i)&&!Se(f))return!1;if(s&&Se(f))continue;s=!1,i=f|i&1;continue}if(!s)if(i&4){if(i=2|i&1,f!==""&&!Du(e,f,n)||f===""&&t.length===1){if(Se(i))return!1;s=!0}}else if(i&8){if(o===null||!Su(e,o,f,n)){if(Se(i))return!1;s=!0}}else{let l=t[++a],p=bu(f,o,Gi(e),n);if(p===-1){if(Se(i))return!1;s=!0;continue}if(l!==""){let y;if(p>r?y="":y=o[p+1].toLowerCase(),i&2&&l!==y){if(Se(i))return!1;s=!0}}}}return Se(i)||s}function Se(e){return(e&1)===0}function bu(e,t,n,i){if(t===null)return-1;let o=0;if(i||!n){let r=!1;for(;o<t.length;){let s=t[o];if(s===e)return o;if(s===3||s===6)r=!0;else if(s===1||s===2){let a=t[++o];for(;typeof a=="string";)a=t[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=r?1:2}return-1}else return Mu(t,e)}function Eu(e,t,n=!1){for(let i=0;i<t.length;i++)if(wu(e,t[i],n))return!0;return!1}function Iu(e){for(let t=0;t<e.length;t++){let n=e[t];if(yu(n))return t}return e.length}function Mu(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let i=e[n];if(typeof i=="number")return-1;if(i===t)return n;n++}return-1}function ho(e,t){return e?":not("+t.trim()+")":t}function xu(e){let t=e[0],n=1,i=2,o="",r=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(i&2){let a=e[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?o+="."+s:i&4&&(o+=" "+s);else o!==""&&!Se(s)&&(t+=ho(r,o),o=""),i=s,r=r||!Se(i);n++}return o!==""&&(t+=ho(r,o)),t}function Tu(e){return e.map(xu).join(",")}function Au(e){let t=[],n=[],i=1,o=2;for(;i<e.length;){let r=e[i];if(typeof r=="string")o===2?r!==""&&t.push(r,e[++i]):o===8&&n.push(r);else{if(!Se(o))break;o=r}i++}return{attrs:t,classes:n}}function Lt(e){return Wo(()=>{let t=Lu(e),n=Me(_e({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===ea.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||ke.Emulated,styles:e.styles||we,_:null,schemas:e.schemas||null,tView:null,id:""});Pu(n);let i=e.dependencies;return n.directiveDefs=po(i,!1),n.pipeDefs=po(i,!0),n.id=Fu(n),n})}function Ru(e){return It(e)||na(e)}function ku(e){return e!==null}function ft(e){return Wo(()=>({type:e.type,bootstrap:e.bootstrap||we,declarations:e.declarations||we,imports:e.imports||we,exports:e.exports||we,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function fo(e,t){if(e==null)return Jt;let n={};for(let i in e)if(e.hasOwnProperty(i)){let o=e[i],r,s,a=Ze.None;Array.isArray(o)?(a=o[0],r=o[1],s=o[2]??r):(r=o,s=o),t?(n[r]=a!==Ze.None?[i,a]:i,t[r]=s):n[r]=i}return n}function It(e){return e[Yl]||null}function na(e){return e[Ql]||null}function ra(e){return e[Xl]||null}function Nu(e){let t=It(e)||na(e)||ra(e);return t!==null?t.standalone:!1}function Ou(e,t){let n=e[Jl]||null;if(!n&&t===!0)throw new Error(`Type ${pe(e)} does not have '\u0275mod' property.`);return n}function Lu(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Jt,exportAs:e.exportAs||null,standalone:e.standalone===!0,signals:e.signals===!0,selectors:e.selectors||we,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fo(e.inputs,t),outputs:fo(e.outputs),debugInfo:null}}function Pu(e){e.features?.forEach(t=>t(e))}function po(e,t){if(!e)return null;let n=t?ra:Ru;return()=>(typeof e=="function"?e():e).map(i=>n(i)).filter(ku)}function Fu(e){let t=0,n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(let o of n)t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Bu(...e){return{\u0275providers:ia(!0,e),\u0275fromNgModule:!0}}function ia(e,...t){let n=[],i=new Set,o,r=s=>{n.push(s)};return zi(t,s=>{let a=s;si(a,r,[],i)&&(o||=[],o.push(a))}),o!==void 0&&sa(o,r),n}function sa(e,t){for(let n=0;n<e.length;n++){let{ngModule:i,providers:o}=e[n];Ki(o,r=>{t(r,i)})}}function si(e,t,n,i){if(e=De(e),!e)return!1;let o=null,r=so(e),s=!r&&It(e);if(!r&&!s){let f=e.ngModule;if(r=so(f),r)o=f;else return!1}else{if(s&&!s.standalone)return!1;o=e}let a=i.has(o);if(s){if(a)return!1;if(i.add(o),s.dependencies){let f=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of f)si(l,t,n,i)}}else if(r){if(r.imports!=null&&!a){i.add(o);let l;try{zi(r.imports,p=>{si(p,t,n,i)&&(l||=[],l.push(p))})}finally{}l!==void 0&&sa(l,t)}if(!a){let l=Xt(o)||(()=>new o);t({provide:o,useFactory:l,deps:we},o),t({provide:Jo,useValue:o,multi:!0},o),t({provide:en,useValue:()=>Q(o),multi:!0},o)}let f=r.providers;if(f!=null&&!a){let l=e;Ki(f,p=>{t(p,l)})}}else return!1;return o!==e&&e.providers!==void 0}function Ki(e,t){for(let n of e)Ko(n)&&(n=n.\u0275providers),Array.isArray(n)?Ki(n,t):t(n)}var Hu=re({provide:String,useValue:re});function oa(e){return e!==null&&typeof e=="object"&&Hu in e}function ju(e){return!!(e&&e.useExisting)}function Vu(e){return!!(e&&e.useFactory)}function oi(e){return typeof e=="function"}var tr=new X(""),In={},$u={},qr;function Zi(){return qr===void 0&&(qr=new Nn),qr}var Ye=class{},On=class extends Ye{get destroyed(){return this._destroyed}constructor(t,n,i,o){super(),this.parent=n,this.source=i,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ci(t,s=>this.processProvider(s)),this.records.set(Xo,St(void 0,this)),o.has("environment")&&this.records.set(Ye,St(void 0,this));let r=this.records.get(tr);r!=null&&typeof r.value=="string"&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(Jo,we,Z.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=J(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let n=Ct(this),i=xe(void 0),o;try{return t()}finally{Ct(n),xe(i)}}get(t,n=Qt,i=Z.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(co))return t[co](this);i=er(i);let o,r=Ct(this),s=xe(void 0);try{if(!(i&Z.SkipSelf)){let f=this.records.get(t);if(f===void 0){let l=Ku(t)&&Ui(t);l&&this.injectableDefInScope(l)?f=St(ai(t),In):f=null,this.records.set(t,f)}if(f!=null)return this.hydrate(t,f)}let a=i&Z.Self?Zi():this.parent;return n=i&Z.Optional&&n===Qt?null:n,a.get(t,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Rn]=a[Rn]||[]).unshift(pe(t)),r)throw a;return du(a,t,"R3InjectorError",this.source)}else throw a}finally{xe(s),Ct(r)}}resolveInjectorInitializers(){let t=J(null),n=Ct(this),i=xe(void 0),o;try{let r=this.get(en,we,Z.Self);for(let s of r)s()}finally{Ct(n),xe(i),J(t)}}toString(){let t=[],n=this.records;for(let i of n.keys())t.push(pe(i));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(t){t=De(t);let n=oi(t)?t:De(t&&t.provide),i=Wu(t);if(!oi(t)&&t.multi===!0){let o=this.records.get(n);o||(o=St(void 0,In,!0),o.factory=()=>ri(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,i)}hydrate(t,n){let i=J(null);try{return n.value===In&&(n.value=$u,n.value=n.factory()),typeof n.value=="object"&&n.value&&Gu(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{J(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=De(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ai(e){let t=Ui(e),n=t!==null?t.factory:Xt(e);if(n!==null)return n;if(e instanceof X)throw new Y(204,!1);if(e instanceof Function)return Uu(e);throw new Y(204,!1)}function Uu(e){if(e.length>0)throw new Y(204,!1);let n=Kl(e);return n!==null?()=>n.factory(e):()=>new e}function Wu(e){if(oa(e))return St(void 0,e.useValue);{let t=zu(e);return St(t,In)}}function zu(e,t,n){let i;if(oi(e)){let o=De(e);return Xt(o)||ai(o)}else if(oa(e))i=()=>De(e.useValue);else if(Vu(e))i=()=>e.useFactory(...ri(e.deps||[]));else if(ju(e))i=()=>Q(De(e.useExisting));else{let o=De(e&&(e.useClass||e.provide));if(qu(e))i=()=>new o(...ri(e.deps));else return Xt(o)||ai(o)}return i}function St(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function qu(e){return!!e.deps}function Gu(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function Ku(e){return typeof e=="function"||typeof e=="object"&&e instanceof X}function ci(e,t){for(let n of e)Array.isArray(n)?ci(n,t):n&&Ko(n)?ci(n.\u0275providers,t):t(n)}function Zu(){return Zo()!==void 0||cu()!=null}function Yu(e){let t=$e.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function Qu(e){return typeof e=="function"}var Ue=0,G=1,z=2,ue=3,be=4,Ee=5,Ln=6,Pn=7,Pe=8,Mt=9,Fe=10,ye=11,tn=12,go=13,cn=14,Be=15,st=16,Dt=17,He=18,nr=19,aa=20,Ke=21,Gr=22,ve=23,ot=25,ca=1;var at=7,Fn=8,xt=9,ge=10,Bn=function(e){return e[e.None=0]="None",e[e.HasTransplantedViews=2]="HasTransplantedViews",e}(Bn||{});function rt(e){return Array.isArray(e)&&typeof e[ca]=="object"}function We(e){return Array.isArray(e)&&e[ca]===!0}function la(e){return(e.flags&4)!==0}function ua(e){return e.componentOffset>-1}function da(e){return(e.flags&1)===1}function ln(e){return!!e.template}function li(e){return(e[z]&512)!==0}var ui=class{constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function ha(e,t,n,i){t!==null?t.applyValueToInputSignal(t,i):e[n]=i}function fa(){return pa}function pa(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ju),Xu}fa.ngInherit=!0;function Xu(){let e=ma(this),t=e?.current;if(t){let n=e.previous;if(n===Jt)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function Ju(e,t,n,i,o){let r=this.declaredInputs[i],s=ma(e)||ed(e,{previous:Jt,current:null}),a=s.current||(s.current={}),f=s.previous,l=f[r];a[r]=new ui(l&&l.currentValue,n,f===Jt),ha(e,t,o,n)}var ga="__ngSimpleChanges__";function ma(e){return e[ga]||null}function ed(e,t){return e[ga]=t}var mo=null;var Te=function(e,t,n){mo?.(e,t,n)},td="svg",nd="math";function Ne(e){for(;Array.isArray(e);)e=e[Ue];return e}function rd(e,t){return Ne(t[e])}function Oe(e,t){return Ne(t[e.index])}function id(e,t){return e.data[t]}function un(e,t){let n=t[e];return rt(n)?n:n[Ue]}function sd(e){return(e[z]&4)===4}function Yi(e){return(e[z]&128)===128}function od(e){return We(e[ue])}function _o(e,t){return t==null?null:e[t]}function _a(e){e[Dt]=0}function va(e){e[z]&1024||(e[z]|=1024,Yi(e)&&ir(e))}function rr(e){return!!(e[z]&9216||e[ve]?.dirty)}function di(e){e[Fe].changeDetectionScheduler?.notify(8),e[z]&64&&(e[z]|=1024),rr(e)&&ir(e)}function ir(e){e[Fe].changeDetectionScheduler?.notify(0);let t=ct(e);for(;t!==null&&!(t[z]&8192||(t[z]|=8192,!Yi(t)));)t=ct(t)}function ya(e,t){if((e[z]&256)===256)throw new Y(911,!1);e[Ke]===null&&(e[Ke]=[]),e[Ke].push(t)}function ad(e,t){if(e[Ke]===null)return;let n=e[Ke].indexOf(t);n!==-1&&e[Ke].splice(n,1)}function ct(e){let t=e[ue];return We(t)?t[ue]:t}var ee={lFrame:xa(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ca=!1;function cd(){return ee.lFrame.elementDepthCount}function ld(){ee.lFrame.elementDepthCount++}function ud(){ee.lFrame.elementDepthCount--}function Sa(){return ee.bindingsEnabled}function dd(){return ee.skipHydrationRootTNode!==null}function hd(e){return ee.skipHydrationRootTNode===e}function fd(){ee.skipHydrationRootTNode=null}function le(){return ee.lFrame.lView}function Xe(){return ee.lFrame.tView}function Le(){let e=Da();for(;e!==null&&e.type===64;)e=e.parent;return e}function Da(){return ee.lFrame.currentTNode}function pd(){let e=ee.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function sr(e,t){let n=ee.lFrame;n.currentTNode=e,n.isParent=t}function wa(){return ee.lFrame.isParent}function gd(){ee.lFrame.isParent=!1}function ba(){return Ca}function vo(e){Ca=e}function md(e){return ee.lFrame.bindingIndex=e}function _d(e){let t=ee.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function vd(){return ee.lFrame.inI18n}function yd(e,t){let n=ee.lFrame;n.bindingIndex=n.bindingRootIndex=e,hi(t)}function Cd(){return ee.lFrame.currentDirectiveIndex}function hi(e){ee.lFrame.currentDirectiveIndex=e}function Sd(e){let t=ee.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Ea(){return ee.lFrame.currentQueryIndex}function Qi(e){ee.lFrame.currentQueryIndex=e}function Dd(e){let t=e[G];return t.type===2?t.declTNode:t.type===1?e[Ee]:null}function Ia(e,t,n){if(n&Z.SkipSelf){let o=t,r=e;for(;o=o.parent,o===null&&!(n&Z.Host);)if(o=Dd(r),o===null||(r=r[cn],o.type&10))break;if(o===null)return!1;t=o,e=r}let i=ee.lFrame=Ma();return i.currentTNode=t,i.lView=e,!0}function Xi(e){let t=Ma(),n=e[G];ee.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Ma(){let e=ee.lFrame,t=e===null?null:e.child;return t===null?xa(e):t}function xa(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Ta(){let e=ee.lFrame;return ee.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Aa=Ta;function Ji(){let e=Ta();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function dn(){return ee.lFrame.selectedIndex}function lt(e){ee.lFrame.selectedIndex=e}function wd(){return ee.lFrame.currentNamespace}var Ra=!0;function ka(){return Ra}function Na(e){Ra=e}function bd(e,t,n){let{ngOnChanges:i,ngOnInit:o,ngDoCheck:r}=t.type.prototype;if(i){let s=pa(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),r&&((n.preOrderHooks??=[]).push(e,r),(n.preOrderCheckHooks??=[]).push(e,r))}function Oa(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){let r=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:f,ngAfterViewChecked:l,ngOnDestroy:p}=r;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),f&&(e.viewHooks??=[]).push(-n,f),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),p!=null&&(e.destroyHooks??=[]).push(n,p)}}function Mn(e,t,n){La(e,t,3,n)}function xn(e,t,n,i){(e[z]&3)===n&&La(e,t,n,i)}function Kr(e,t){let n=e[z];(n&3)===t&&(n&=16383,n+=1,e[z]=n)}function La(e,t,n,i){let o=i!==void 0?e[Dt]&65535:0,r=i??-1,s=t.length-1,a=0;for(let f=o;f<s;f++)if(typeof t[f+1]=="number"){if(a=t[f],i!=null&&a>=i)break}else t[f]<0&&(e[Dt]+=65536),(a<r||r==-1)&&(Ed(e,n,t,f),e[Dt]=(e[Dt]&4294901760)+f+2),f++}function yo(e,t){Te(4,e,t);let n=J(null);try{t.call(e)}finally{J(n),Te(5,e,t)}}function Ed(e,t,n,i){let o=n[i]<0,r=n[i+1],s=o?-n[i]:n[i],a=e[s];o?e[z]>>14<e[Dt]>>16&&(e[z]&3)===t&&(e[z]+=16384,yo(a,r)):yo(a,r)}var Et=-1,nn=class{constructor(t,n,i){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function Id(e){return e instanceof nn}function Md(e){return(e.flags&8)!==0}function xd(e){return(e.flags&16)!==0}var Zr={},fi=class{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){i=er(i);let o=this.injector.get(t,Zr,i);return o!==Zr||n===Zr?o:this.parentInjector.get(t,n,i)}};function Pa(e){return e!==Et}function Hn(e){return e&32767}function Td(e){return e>>16}function jn(e,t){let n=Td(e),i=t;for(;n>0;)i=i[cn],n--;return i}var pi=!0;function Co(e){let t=pi;return pi=e,t}var Ad=256,Fa=Ad-1,Ba=5,Rd=0,Ae={};function kd(e,t,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Zt)&&(i=n[Zt]),i==null&&(i=n[Zt]=Rd++);let o=i&Fa,r=1<<o;t.data[e+(o>>Ba)]|=r}function Ha(e,t){let n=ja(e,t);if(n!==-1)return n;let i=t[G];i.firstCreatePass&&(e.injectorIndex=t.length,Yr(i.data,e),Yr(t,null),Yr(i.blueprint,null));let o=es(e,t),r=e.injectorIndex;if(Pa(o)){let s=Hn(o),a=jn(o,t),f=a[G].data;for(let l=0;l<8;l++)t[r+l]=a[s+l]|f[s+l]}return t[r+8]=o,r}function Yr(e,t){e.push(0,0,0,0,0,0,0,0,t)}function ja(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function es(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,i=null,o=t;for(;o!==null;){if(i=za(o),i===null)return Et;if(n++,o=o[cn],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Et}function Nd(e,t,n){kd(e,t,n)}function Va(e,t,n){if(n&Z.Optional||e!==void 0)return e;Wi(t,"NodeInjector")}function $a(e,t,n,i){if(n&Z.Optional&&i===void 0&&(i=null),!(n&(Z.Self|Z.Host))){let o=e[Mt],r=xe(void 0);try{return o?o.get(t,i,n&Z.Optional):Yo(t,i,n&Z.Optional)}finally{xe(r)}}return Va(i,t,n)}function Ua(e,t,n,i=Z.Default,o){if(e!==null){if(t[z]&2048&&!(i&Z.Self)){let s=Fd(e,t,n,i,Ae);if(s!==Ae)return s}let r=Wa(e,t,n,i,Ae);if(r!==Ae)return r}return $a(t,n,i,o)}function Wa(e,t,n,i,o){let r=Ld(n);if(typeof r=="function"){if(!Ia(t,e,i))return i&Z.Host?Va(o,n,i):$a(t,n,i,o);try{let s;if(s=r(i),s==null&&!(i&Z.Optional))Wi(n);else return s}finally{Aa()}}else if(typeof r=="number"){let s=null,a=ja(e,t),f=Et,l=i&Z.Host?t[Be][Ee]:null;for((a===-1||i&Z.SkipSelf)&&(f=a===-1?es(e,t):t[a+8],f===Et||!Do(i,!1)?a=-1:(s=t[G],a=Hn(f),t=jn(f,t)));a!==-1;){let p=t[G];if(So(r,a,p.data)){let y=Od(a,t,n,s,i,l);if(y!==Ae)return y}f=t[a+8],f!==Et&&Do(i,t[G].data[a+8]===l)&&So(r,a,t)?(s=p,a=Hn(f),t=jn(f,t)):a=-1}}return o}function Od(e,t,n,i,o,r){let s=t[G],a=s.data[e+8],f=i==null?ua(a)&&pi:i!=s&&(a.type&3)!==0,l=o&Z.Host&&r===a,p=Tn(a,s,n,f,l);return p!==null?Tt(t,s,p,a):Ae}function Tn(e,t,n,i,o){let r=e.providerIndexes,s=t.data,a=r&1048575,f=e.directiveStart,l=e.directiveEnd,p=r>>20,y=i?a:a+p,C=o?a+p:l;for(let v=y;v<C;v++){let c=s[v];if(v<f&&n===c||v>=f&&c.type===n)return v}if(o){let v=s[f];if(v&&ln(v)&&v.type===n)return f}return null}function Tt(e,t,n,i){let o=e[n],r=t.data;if(Id(o)){let s=o;s.resolving&&nu(tu(r[n]));let a=Co(s.canSeeViewProviders);s.resolving=!0;let f,l=s.injectImpl?xe(s.injectImpl):null,p=Ia(e,i,Z.Default);try{o=e[n]=s.factory(void 0,r,e,i),t.firstCreatePass&&n>=i.directiveStart&&bd(n,r[n],t)}finally{l!==null&&xe(l),Co(a),s.resolving=!1,Aa()}}return o}function Ld(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Zt)?e[Zt]:void 0;return typeof t=="number"?t>=0?t&Fa:Pd:t}function So(e,t,n){let i=1<<e;return!!(n[t+(e>>Ba)]&i)}function Do(e,t){return!(e&Z.Self)&&!(e&Z.Host&&t)}var it=class{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return Ua(this._tNode,this._lView,t,er(i),n)}};function Pd(){return new it(Le(),le())}function Fd(e,t,n,i,o){let r=e,s=t;for(;r!==null&&s!==null&&s[z]&2048&&!(s[z]&512);){let a=Wa(r,s,n,i|Z.Self,Ae);if(a!==Ae)return a;let f=r.parent;if(!f){let l=s[aa];if(l){let p=l.get(n,Ae,i);if(p!==Ae)return p}f=za(s),s=s[cn]}r=f}return o}function za(e){let t=e[G],n=t.type;return n===2?t.declTNode:n===1?e[Ee]:null}function wo(e,t=null,n=null,i){let o=qa(e,t,n,i);return o.resolveInjectorInitializers(),o}function qa(e,t=null,n=null,i,o=new Set){let r=[n||we,Bu(e)];return i=i||(typeof e=="object"?void 0:pe(e)),new On(r,t||Zi(),i||null,o)}var ut=class e{static{this.THROW_IF_NOT_FOUND=Qt}static{this.NULL=new Nn}static create(t,n){if(Array.isArray(t))return wo({name:""},n,t,"");{let i=t.name??"";return wo({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=ie({token:e,providedIn:"any",factory:()=>Q(Xo)})}static{this.__NG_ELEMENT_ID__=-1}};var Bd=new X("");Bd.__NG_ELEMENT_ID__=e=>{let t=Le();if(t===null)throw new Y(204,!1);if(t.type&2)return t.value;if(e&Z.Optional)return null;throw new Y(204,!1)};var Hd="ngOriginalError";function Qr(e){return e[Hd]}var Ga=!0,Ka=(()=>{class e{static{this.__NG_ELEMENT_ID__=jd}static{this.__NG_ENV_ID__=n=>n}}return e})(),gi=class extends Ka{constructor(t){super(),this._lView=t}onDestroy(t){return ya(this._lView,t),()=>ad(this._lView,t)}};function jd(){return new gi(le())}var or=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new qt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=ie({token:e,providedIn:"root",factory:()=>new e})}}return e})();var mi=class extends Ge{constructor(t=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=t,Zu()&&(this.destroyRef=ne(Ka,{optional:!0})??void 0,this.pendingTasks=ne(or,{optional:!0})??void 0)}emit(t){let n=J(null);try{super.next(t)}finally{J(n)}}subscribe(t,n,i){let o=t,r=n||(()=>null),s=i;if(t&&typeof t=="object"){let f=t;o=f.next?.bind(f),r=f.error?.bind(f),s=f.complete?.bind(f)}this.__isAsync&&(r=this.wrapInTimeout(r),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:r,complete:s});return t instanceof de&&t.add(a),a}wrapInTimeout(t){return n=>{let i=this.pendingTasks?.add();setTimeout(()=>{t(n),i!==void 0&&this.pendingTasks?.remove(i)})}}},Re=mi;function Vn(...e){}function Za(e){let t,n;function i(){e=Vn;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),i()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),i()})),()=>i()}function bo(e){return queueMicrotask(()=>e()),()=>{e=Vn}}var ts="isAngularZone",$n=ts+"_ID",Vd=0,ae=class e{constructor(t){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Re(!1),this.onMicrotaskEmpty=new Re(!1),this.onStable=new Re(!1),this.onError=new Re(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:r=Ga}=t;if(typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&i,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=r,Wd(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ts)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new Y(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,o){let r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+o,t,$d,Vn,Vn);try{return r.runTask(s,n,i)}finally{r.cancelTask(s)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}},$d={};function ns(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Ud(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){Za(()=>{e.callbackScheduled=!1,_i(e),e.isCheckStableRunning=!0,ns(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),_i(e)}function Wd(e){let t=()=>{Ud(e)},n=Vd++;e._inner=e._inner.fork({name:"angular",properties:{[ts]:!0,[$n]:n,[$n+n]:!0},onInvokeTask:(i,o,r,s,a,f)=>{if(zd(f))return i.invokeTask(r,s,a,f);try{return Eo(e),i.invokeTask(r,s,a,f)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Io(e)}},onInvoke:(i,o,r,s,a,f,l)=>{try{return Eo(e),i.invoke(r,s,a,f,l)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!qd(f)&&t(),Io(e)}},onHasTask:(i,o,r,s)=>{i.hasTask(r,s),o===r&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,_i(e),ns(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,o,r,s)=>(i.handleError(r,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function _i(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function Eo(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Io(e){e._nesting--,ns(e)}var Un=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Re,this.onMicrotaskEmpty=new Re,this.onStable=new Re,this.onError=new Re}run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,o){return t.apply(n,i)}};function zd(e){return Ya(e,"__ignore_ng_zone__")}function qd(e){return Ya(e,"__scheduler_tick__")}function Ya(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}function Gd(e="zone.js",t){return e==="noop"?new Un:e==="zone.js"?new ae(t):e}var je=class{constructor(){this._console=console}handleError(t){let n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Qr(t);for(;n&&Qr(n);)n=Qr(n);return n||null}},Kd=new X("",{providedIn:"root",factory:()=>{let e=ne(ae),t=ne(je);return n=>e.runOutsideAngular(()=>t.handleError(n))}});function Zd(){return Pt(Le(),le())}function Pt(e,t){return new Ft(Oe(e,t))}var Ft=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=Zd}}return e})();function Yd(e){return e instanceof Ft?e.nativeElement:e}function Qd(){return this._results[Symbol.iterator]()}var vi=class e{get changes(){return this._changes??=new Re}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=e.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Qd)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let i=pu(t);(this._changesDetected=!fu(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Qa(e){return(e.flags&128)===128}var Xa=new Map,Xd=0;function Jd(){return Xd++}function eh(e){Xa.set(e[nr],e)}function yi(e){Xa.delete(e[nr])}var Mo="__ngContext__";function At(e,t){rt(t)?(e[Mo]=t[nr],eh(t)):e[Mo]=t}function Ja(e){return tc(e[tn])}function ec(e){return tc(e[be])}function tc(e){for(;e!==null&&!We(e);)e=e[be];return e}var Ci;function nc(e){Ci=e}function th(){if(Ci!==void 0)return Ci;if(typeof document<"u")return document;throw new Y(210,!1)}var ar=new X("",{providedIn:"root",factory:()=>nh}),nh="ng",rs=new X(""),Bt=new X("",{providedIn:"platform",factory:()=>"unknown"});var is=new X("",{providedIn:"root",factory:()=>th().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var rh="h",ih="b";var sh=()=>null;function ss(e,t,n=!1){return sh(e,t,n)}var rc=!1,oh=new X("",{providedIn:"root",factory:()=>rc});var Si=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${zl})`}};function os(e){return e instanceof Si?e.changingThisBreaksApplicationSecurity:e}function ah(e){return e instanceof Function?e():e}var Ve=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Ve||{}),ch;function as(e,t){return ch(e,t)}function wt(e,t,n,i,o){if(i!=null){let r,s=!1;We(i)?r=i:rt(i)&&(s=!0,i=i[Ue]);let a=Ne(i);e===0&&n!==null?o==null?cc(t,n,a):Wn(t,n,a,o||null,!0):e===1&&n!==null?Wn(t,n,a,o||null,!0):e===2?Dh(t,a,s):e===3&&t.destroyNode(a),r!=null&&bh(t,e,r,n,o)}}function lh(e,t){return e.createText(t)}function ic(e,t,n){return e.createElement(t,n)}function uh(e,t){sc(e,t),t[Ue]=null,t[Ee]=null}function dh(e,t,n,i,o,r){i[Ue]=o,i[Ee]=t,cr(e,i,n,1,o,r)}function sc(e,t){t[Fe].changeDetectionScheduler?.notify(9),cr(e,t,t[ye],2,null,null)}function hh(e){let t=e[tn];if(!t)return Xr(e[G],e);for(;t;){let n=null;if(rt(t))n=t[tn];else{let i=t[ge];i&&(n=i)}if(!n){for(;t&&!t[be]&&t!==e;)rt(t)&&Xr(t[G],t),t=t[ue];t===null&&(t=e),rt(t)&&Xr(t[G],t),n=t&&t[be]}t=n}}function fh(e,t,n,i){let o=ge+i,r=n.length;i>0&&(n[o-1][be]=t),i<r-ge?(t[be]=n[o],Qo(n,ge+i,t)):(n.push(t),t[be]=null),t[ue]=n;let s=t[st];s!==null&&n!==s&&oc(s,t);let a=t[He];a!==null&&a.insertView(e),di(t),t[z]|=128}function oc(e,t){let n=e[xt],i=t[ue];if(rt(i))e[z]|=Bn.HasTransplantedViews;else{let o=i[ue][Be];t[Be]!==o&&(e[z]|=Bn.HasTransplantedViews)}n===null?e[xt]=[t]:n.push(t)}function cs(e,t){let n=e[xt],i=n.indexOf(t);n.splice(i,1)}function Di(e,t){if(e.length<=ge)return;let n=ge+t,i=e[n];if(i){let o=i[st];o!==null&&o!==e&&cs(o,i),t>0&&(e[n-1][be]=i[be]);let r=kn(e,ge+t);uh(i[G],i);let s=r[He];s!==null&&s.detachView(r[G]),i[ue]=null,i[be]=null,i[z]&=-129}return i}function ac(e,t){if(!(t[z]&256)){let n=t[ye];n.destroyNode&&cr(e,t,n,3,null,null),hh(t)}}function Xr(e,t){if(t[z]&256)return;let n=J(null);try{t[z]&=-129,t[z]|=256,t[ve]&&kr(t[ve]),gh(e,t),ph(e,t),t[G].type===1&&t[ye].destroy();let i=t[st];if(i!==null&&We(t[ue])){i!==t[ue]&&cs(i,t);let o=t[He];o!==null&&o.detachView(e)}yi(t)}finally{J(n)}}function ph(e,t){let n=e.cleanup,i=t[Pn];if(n!==null)for(let r=0;r<n.length-1;r+=2)if(typeof n[r]=="string"){let s=n[r+3];s>=0?i[s]():i[-s].unsubscribe(),r+=2}else{let s=i[n[r+1]];n[r].call(s)}i!==null&&(t[Pn]=null);let o=t[Ke];if(o!==null){t[Ke]=null;for(let r=0;r<o.length;r++){let s=o[r];s()}}}function gh(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let o=t[n[i]];if(!(o instanceof nn)){let r=n[i+1];if(Array.isArray(r))for(let s=0;s<r.length;s+=2){let a=o[r[s]],f=r[s+1];Te(4,a,f);try{f.call(a)}finally{Te(5,a,f)}}else{Te(4,o,r);try{r.call(o)}finally{Te(5,o,r)}}}}}function mh(e,t,n){return _h(e,t.parent,n)}function _h(e,t,n){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return n[Ue];{let{componentOffset:o}=i;if(o>-1){let{encapsulation:r}=e.data[i.directiveStart+o];if(r===ke.None||r===ke.Emulated)return null}return Oe(i,n)}}function Wn(e,t,n,i,o){e.insertBefore(t,n,i,o)}function cc(e,t,n){e.appendChild(t,n)}function xo(e,t,n,i,o){i!==null?Wn(e,t,n,i,o):cc(e,t,n)}function lc(e,t){return e.parentNode(t)}function vh(e,t){return e.nextSibling(t)}function yh(e,t,n){return Sh(e,t,n)}function Ch(e,t,n){return e.type&40?Oe(e,n):null}var Sh=Ch,To;function uc(e,t,n,i){let o=mh(e,i,t),r=t[ye],s=i.parent||t[Ee],a=yh(s,i,t);if(o!=null)if(Array.isArray(n))for(let f=0;f<n.length;f++)xo(r,o,n[f],a,!1);else xo(r,o,n,a,!1);To!==void 0&&To(r,i,t,n,o)}function Gt(e,t){if(t!==null){let n=t.type;if(n&3)return Oe(t,e);if(n&4)return wi(-1,e[t.index]);if(n&8){let i=t.child;if(i!==null)return Gt(e,i);{let o=e[t.index];return We(o)?wi(-1,o):Ne(o)}}else{if(n&128)return Gt(e,t.next);if(n&32)return as(t,e)()||Ne(e[t.index]);{let i=dc(e,t);if(i!==null){if(Array.isArray(i))return i[0];let o=ct(e[Be]);return Gt(o,i)}else return Gt(e,t.next)}}}return null}function dc(e,t){if(t!==null){let i=e[Be][Ee],o=t.projection;return i.projection[o]}return null}function wi(e,t){let n=ge+e+1;if(n<t.length){let i=t[n],o=i[G].firstChild;if(o!==null)return Gt(i,o)}return t[at]}function Dh(e,t,n){e.removeChild(null,t,n)}function ls(e,t,n,i,o,r,s){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=i[n.index],f=n.type;if(s&&t===0&&(a&&At(Ne(a),i),n.flags|=2),(n.flags&32)!==32)if(f&8)ls(e,t,n.child,i,o,r,!1),wt(t,e,o,a,r);else if(f&32){let l=as(n,i),p;for(;p=l();)wt(t,e,o,p,r);wt(t,e,o,a,r)}else f&16?wh(e,t,i,n,o,r):wt(t,e,o,a,r);n=s?n.projectionNext:n.next}}function cr(e,t,n,i,o,r){ls(n,i,e.firstChild,t,o,r,!1)}function wh(e,t,n,i,o,r){let s=n[Be],f=s[Ee].projection[i.projection];if(Array.isArray(f))for(let l=0;l<f.length;l++){let p=f[l];wt(t,e,o,p,r)}else{let l=f,p=s[ue];Qa(i)&&(l.flags|=128),ls(e,t,l,p,o,r,!0)}}function bh(e,t,n,i,o){let r=n[at],s=Ne(n);r!==s&&wt(t,e,i,r,o);for(let a=ge;a<n.length;a++){let f=n[a];cr(f[G],f,e,t,i,r)}}function Eh(e,t,n,i,o){if(t)o?e.addClass(n,i):e.removeClass(n,i);else{let r=i.indexOf("-")===-1?void 0:Ve.DashCase;o==null?e.removeStyle(n,i,r):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),r|=Ve.Important),e.setStyle(n,i,o,r))}}function Ih(e,t,n){e.setAttribute(t,"style",n)}function hc(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function fc(e,t,n){let{mergedAttrs:i,classes:o,styles:r}=n;i!==null&&ii(e,t,i),o!==null&&hc(e,t,o),r!==null&&Ih(e,t,r)}var lr={};function pc(e=1){gc(Xe(),le(),dn()+e,!1)}function gc(e,t,n,i){if(!i)if((t[z]&3)===3){let r=e.preOrderCheckHooks;r!==null&&Mn(t,r,n)}else{let r=e.preOrderHooks;r!==null&&xn(t,r,0,n)}lt(n)}function mc(e,t=Z.Default){let n=le();if(n===null)return Q(e,t);let i=Le();return Ua(i,n,De(e),t)}function _c(e,t,n,i,o,r){let s=J(null);try{let a=null;o&Ze.SignalBased&&(a=t[i][js]),a!==null&&a.transformFn!==void 0&&(r=a.transformFn(r)),o&Ze.HasDecoratorInputTransform&&(r=e.inputTransforms[i].call(t,r)),e.setInput!==null?e.setInput(t,a,r,n,i):ha(t,a,i,r)}finally{J(s)}}function Mh(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let o=n[i];if(o<0)lt(~o);else{let r=o,s=n[++i],a=n[++i];yd(s,r);let f=t[r];a(2,f)}}}finally{lt(-1)}}function ur(e,t,n,i,o,r,s,a,f,l,p){let y=t.blueprint.slice();return y[Ue]=o,y[z]=i|4|128|8|64,(l!==null||e&&e[z]&2048)&&(y[z]|=2048),_a(y),y[ue]=y[cn]=e,y[Pe]=n,y[Fe]=s||e&&e[Fe],y[ye]=a||e&&e[ye],y[Mt]=f||e&&e[Mt]||null,y[Ee]=r,y[nr]=Jd(),y[Ln]=p,y[aa]=l,y[Be]=t.type==2?e[Be]:y,y}function us(e,t,n,i,o){let r=e.data[t];if(r===null)r=xh(e,t,n,i,o),vd()&&(r.flags|=32);else if(r.type&64){r.type=n,r.value=i,r.attrs=o;let s=pd();r.injectorIndex=s===null?-1:s.injectorIndex}return sr(r,!0),r}function xh(e,t,n,i,o){let r=Da(),s=wa(),a=s?r:r&&r.parent,f=e.data[t]=Ph(e,a,n,t,i,o);return e.firstChild===null&&(e.firstChild=f),r!==null&&(s?r.child==null&&f.parent!==null&&(r.child=f):r.next===null&&(r.next=f,f.prev=r)),f}function vc(e,t,n,i){if(n===0)return-1;let o=t.length;for(let r=0;r<n;r++)t.push(i),e.blueprint.push(i),e.data.push(null);return o}function yc(e,t,n,i,o){let r=dn(),s=i&2;try{lt(-1),s&&t.length>ot&&gc(e,t,ot,!1),Te(s?2:0,o),n(i,o)}finally{lt(r),Te(s?3:1,o)}}function Cc(e,t,n){if(la(t)){let i=J(null);try{let o=t.directiveStart,r=t.directiveEnd;for(let s=o;s<r;s++){let a=e.data[s];if(a.contentQueries){let f=n[s];a.contentQueries(1,f,s)}}}finally{J(i)}}}function Th(e,t,n){Sa()&&(Vh(e,t,n,Oe(n,t)),(n.flags&64)===64&&bc(e,t,n))}function Ah(e,t,n=Oe){let i=t.localNames;if(i!==null){let o=t.index+1;for(let r=0;r<i.length;r+=2){let s=i[r+1],a=s===-1?n(t,e):e[s];e[o++]=a}}}function Sc(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Dc(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Dc(e,t,n,i,o,r,s,a,f,l,p){let y=ot+i,C=y+o,v=Rh(y,C),c=typeof l=="function"?l():l;return v[G]={type:e,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:t,data:v.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:C,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof r=="function"?r():r,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:f,consts:c,incompleteFirstPass:!1,ssrId:p}}function Rh(e,t){let n=[];for(let i=0;i<t;i++)n.push(i<e?null:lr);return n}function kh(e,t,n,i){let r=i.get(oh,rc)||n===ke.ShadowDom,s=e.selectRootElement(t,r);return Nh(s),s}function Nh(e){Oh(e)}var Oh=()=>null;function Lh(e,t,n,i){let o=Ic(t);o.push(n),e.firstCreatePass&&Mc(e).push(i,o.length-1)}function Ph(e,t,n,i,o,r){let s=t?t.injectorIndex:-1,a=0;return dd()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Ao(e,t,n,i,o){for(let r in t){if(!t.hasOwnProperty(r))continue;let s=t[r];if(s===void 0)continue;i??={};let a,f=Ze.None;Array.isArray(s)?(a=s[0],f=s[1]):a=s;let l=r;if(o!==null){if(!o.hasOwnProperty(r))continue;l=o[r]}e===0?Ro(i,n,l,a,f):Ro(i,n,l,a)}return i}function Ro(e,t,n,i,o){let r;e.hasOwnProperty(n)?(r=e[n]).push(t,i):r=e[n]=[t,i],o!==void 0&&r.push(o)}function Fh(e,t,n){let i=t.directiveStart,o=t.directiveEnd,r=e.data,s=t.attrs,a=[],f=null,l=null;for(let p=i;p<o;p++){let y=r[p],C=n?n.get(y):null,v=C?C.inputs:null,c=C?C.outputs:null;f=Ao(0,y.inputs,p,f,v),l=Ao(1,y.outputs,p,l,c);let d=f!==null&&s!==null&&!Gi(t)?Yh(f,p,s):null;a.push(d)}f!==null&&(f.hasOwnProperty("class")&&(t.flags|=8),f.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=f,t.outputs=l}function Bh(e,t,n,i){if(Sa()){let o=i===null?null:{"":-1},r=Uh(e,n),s,a;r===null?s=a=null:[s,a]=r,s!==null&&wc(e,t,n,s,o,a),o&&Wh(n,i,o)}n.mergedAttrs=qi(n.mergedAttrs,n.attrs)}function wc(e,t,n,i,o,r){for(let l=0;l<i.length;l++)Nd(Ha(n,t),e,i[l].type);qh(n,e.data.length,i.length);for(let l=0;l<i.length;l++){let p=i[l];p.providersResolver&&p.providersResolver(p)}let s=!1,a=!1,f=vc(e,t,i.length,null);for(let l=0;l<i.length;l++){let p=i[l];n.mergedAttrs=qi(n.mergedAttrs,p.hostAttrs),Gh(e,n,t,f,p),zh(f,p,o),p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let y=p.type.prototype;!s&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(y.ngOnChanges||y.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),f++}Fh(e,n,r)}function Hh(e,t,n,i,o){let r=o.hostBindings;if(r){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;jh(s)!=a&&s.push(a),s.push(n,i,r)}}function jh(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function Vh(e,t,n,i){let o=n.directiveStart,r=n.directiveEnd;ua(n)&&Kh(t,n,e.data[o+n.componentOffset]),e.firstCreatePass||Ha(n,t),At(i,t);let s=n.initialInputs;for(let a=o;a<r;a++){let f=e.data[a],l=Tt(t,e,a,n);if(At(l,t),s!==null&&Zh(t,a-o,l,f,n,s),ln(f)){let p=un(n.index,t);p[Pe]=Tt(t,e,a,n)}}}function bc(e,t,n){let i=n.directiveStart,o=n.directiveEnd,r=n.index,s=Cd();try{lt(r);for(let a=i;a<o;a++){let f=e.data[a],l=t[a];hi(a),(f.hostBindings!==null||f.hostVars!==0||f.hostAttrs!==null)&&$h(f,l)}}finally{lt(-1),hi(s)}}function $h(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Uh(e,t){let n=e.directiveRegistry,i=null,o=null;if(n)for(let r=0;r<n.length;r++){let s=n[r];if(Eu(t,s.selectors,!1))if(i||(i=[]),ln(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),i.unshift(...a,s);let f=a.length;bi(e,t,f)}else i.unshift(s),bi(e,t,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,i,o),i.push(s)}return i===null?null:[i,o]}function bi(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function Wh(e,t,n){if(t){let i=e.localNames=[];for(let o=0;o<t.length;o+=2){let r=n[t[o+1]];if(r==null)throw new Y(-301,!1);i.push(t[o],r)}}}function zh(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;ln(t)&&(n[""]=e)}}function qh(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Gh(e,t,n,i,o){e.data[i]=o;let r=o.factory||(o.factory=Xt(o.type,!0)),s=new nn(r,ln(o),mc);e.blueprint[i]=s,n[i]=s,Hh(e,t,i,vc(e,n,o.hostVars,lr),o)}function Kh(e,t,n){let i=Oe(t,e),o=Sc(n),r=e[Fe].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=ds(e,ur(e,o,null,s,i,t,null,r.createRenderer(i,n),null,null,null));e[t.index]=a}function Zh(e,t,n,i,o,r){let s=r[t];if(s!==null)for(let a=0;a<s.length;){let f=s[a++],l=s[a++],p=s[a++],y=s[a++];_c(i,n,f,l,p,y)}}function Yh(e,t,n){let i=null,o=0;for(;o<n.length;){let r=n[o];if(r===0){o+=4;continue}else if(r===5){o+=2;continue}if(typeof r=="number")break;if(e.hasOwnProperty(r)){i===null&&(i=[]);let s=e[r];for(let a=0;a<s.length;a+=3)if(s[a]===t){i.push(r,s[a+1],s[a+2],n[o+1]);break}}o+=2}return i}function Qh(e,t,n,i){return[e,!0,0,t,null,i,null,n,null,null]}function Ec(e,t){let n=e.contentQueries;if(n!==null){let i=J(null);try{for(let o=0;o<n.length;o+=2){let r=n[o],s=n[o+1];if(s!==-1){let a=e.data[s];Qi(r),a.contentQueries(2,t[s],s)}}}finally{J(i)}}}function ds(e,t){return e[tn]?e[go][be]=t:e[tn]=t,e[go]=t,t}function Ei(e,t,n){Qi(0);let i=J(null);try{t(e,n)}finally{J(i)}}function Ic(e){return e[Pn]??=[]}function Mc(e){return e.cleanup??=[]}function xc(e,t){let n=e[Mt],i=n?n.get(je,null):null;i&&i.handleError(t)}function Tc(e,t,n,i,o){for(let r=0;r<n.length;){let s=n[r++],a=n[r++],f=n[r++],l=t[s],p=e.data[s];_c(p,l,i,a,f,o)}}function Xh(e,t){let n=un(t,e),i=n[G];Jh(i,n);let o=n[Ue];o!==null&&n[Ln]===null&&(n[Ln]=ss(o,n[Mt])),hs(i,n,n[Pe])}function Jh(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function hs(e,t,n){Xi(t);try{let i=e.viewQuery;i!==null&&Ei(1,i,n);let o=e.template;o!==null&&yc(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[He]?.finishViewCreation(e),e.staticContentQueries&&Ec(e,t),e.staticViewQueries&&Ei(2,e.viewQuery,n);let r=e.components;r!==null&&ef(t,r)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[z]&=-5,Ji()}}function ef(e,t){for(let n=0;n<t.length;n++)Xh(e,t[n])}function tf(e,t,n,i){let o=J(null);try{let r=t.tView,a=e[z]&4096?4096:16,f=ur(e,r,n,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),l=e[t.index];f[st]=l;let p=e[He];return p!==null&&(f[He]=p.createEmbeddedView(r)),hs(r,f,n),f}finally{J(o)}}function ko(e,t){return!t||t.firstChild===null||Qa(e)}function nf(e,t,n,i=!0){let o=t[G];if(fh(o,t,e,n),i){let s=wi(n,e),a=t[ye],f=lc(a,e[at]);f!==null&&dh(o,e[Ee],a,t,f,s)}let r=t[Ln];r!==null&&r.firstChild!==null&&(r.firstChild=null)}function zn(e,t,n,i,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let r=t[n.index];r!==null&&i.push(Ne(r)),We(r)&&rf(r,i);let s=n.type;if(s&8)zn(e,t,n.child,i);else if(s&32){let a=as(n,t),f;for(;f=a();)i.push(f)}else if(s&16){let a=dc(t,n);if(Array.isArray(a))i.push(...a);else{let f=ct(t[Be]);zn(f[G],f,a,i,!0)}}n=o?n.projectionNext:n.next}return i}function rf(e,t){for(let n=ge;n<e.length;n++){let i=e[n],o=i[G].firstChild;o!==null&&zn(i[G],i,o,t)}e[at]!==e[Ue]&&t.push(e[at])}var Ac=[];function sf(e){return e[ve]??of(e)}function of(e){let t=Ac.pop()??Object.create(cf);return t.lView=e,t}function af(e){e.lView[ve]!==e&&(e.lView=null,Ac.push(e))}var cf=Me(_e({},Tr),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{ir(e.lView)},consumerOnSignalRead(){this.lView[ve]=this}});function lf(e){let t=e[ve]??Object.create(uf);return t.lView=e,t}var uf=Me(_e({},Tr),{consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{let t=ct(e.lView);for(;t&&!Rc(t[G]);)t=ct(t);t&&va(t)},consumerOnSignalRead(){this.lView[ve]=this}});function Rc(e){return e.type!==2}var df=100;function kc(e,t=!0,n=0){let i=e[Fe],o=i.rendererFactory,r=!1;r||o.begin?.();try{hf(e,n)}catch(s){throw t&&xc(e,s),s}finally{r||(o.end?.(),i.inlineEffectRunner?.flush())}}function hf(e,t){let n=ba();try{vo(!0),Ii(e,t);let i=0;for(;rr(e);){if(i===df)throw new Y(103,!1);i++,Ii(e,1)}}finally{vo(n)}}function ff(e,t,n,i){let o=t[z];if((o&256)===256)return;let r=!1,s=!1;!r&&t[Fe].inlineEffectRunner?.flush(),Xi(t);let a=!0,f=null,l=null;r||(Rc(e)?(l=sf(t),f=Ar(l)):Vs()===null?(a=!1,l=lf(t),f=Ar(l)):t[ve]&&(kr(t[ve]),t[ve]=null));try{_a(t),md(e.bindingStartIndex),n!==null&&yc(e,t,n,2,i);let p=(o&3)===3;if(!r)if(p){let v=e.preOrderCheckHooks;v!==null&&Mn(t,v,null)}else{let v=e.preOrderHooks;v!==null&&xn(t,v,0,null),Kr(t,0)}if(s||pf(t),Nc(t,0),e.contentQueries!==null&&Ec(e,t),!r)if(p){let v=e.contentCheckHooks;v!==null&&Mn(t,v)}else{let v=e.contentHooks;v!==null&&xn(t,v,1),Kr(t,1)}Mh(e,t);let y=e.components;y!==null&&Lc(t,y,0);let C=e.viewQuery;if(C!==null&&Ei(2,C,i),!r)if(p){let v=e.viewCheckHooks;v!==null&&Mn(t,v)}else{let v=e.viewHooks;v!==null&&xn(t,v,2),Kr(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Gr]){for(let v of t[Gr])v();t[Gr]=null}r||(t[z]&=-73)}catch(p){throw r||ir(t),p}finally{l!==null&&($s(l,f),a&&af(l)),Ji()}}function Nc(e,t){for(let n=Ja(e);n!==null;n=ec(n))for(let i=ge;i<n.length;i++){let o=n[i];Oc(o,t)}}function pf(e){for(let t=Ja(e);t!==null;t=ec(t)){if(!(t[z]&Bn.HasTransplantedViews))continue;let n=t[xt];for(let i=0;i<n.length;i++){let o=n[i];va(o)}}}function gf(e,t,n){let i=un(t,e);Oc(i,n)}function Oc(e,t){Yi(e)&&Ii(e,t)}function Ii(e,t){let i=e[G],o=e[z],r=e[ve],s=!!(t===0&&o&16);if(s||=!!(o&64&&t===0),s||=!!(o&1024),s||=!!(r?.dirty&&Rr(r)),s||=!1,r&&(r.dirty=!1),e[z]&=-9217,s)ff(i,e,i.template,e[Pe]);else if(o&8192){Nc(e,1);let a=i.components;a!==null&&Lc(e,a,1)}}function Lc(e,t,n){for(let i=0;i<t.length;i++)gf(e,t[i],n)}function fs(e,t){let n=ba()?64:1088;for(e[Fe].changeDetectionScheduler?.notify(t);e;){e[z]|=n;let i=ct(e);if(li(e)&&!i)return e;e=i}return null}var rn=class{get rootNodes(){let t=this._lView,n=t[G];return zn(n,t,n.firstChild,[])}constructor(t,n,i=!0){this._lView=t,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Pe]}set context(t){this._lView[Pe]=t}get destroyed(){return(this._lView[z]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ue];if(We(t)){let n=t[Fn],i=n?n.indexOf(this):-1;i>-1&&(Di(t,i),kn(n,i))}this._attachedToViewContainer=!1}ac(this._lView[G],this._lView)}onDestroy(t){ya(this._lView,t)}markForCheck(){fs(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[z]&=-129}reattach(){di(this._lView),this._lView[z]|=128}detectChanges(){this._lView[z]|=1024,kc(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=li(this._lView),n=this._lView[st];n!==null&&!t&&cs(n,this._lView),sc(this._lView[G],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=t;let n=li(this._lView),i=this._lView[st];i!==null&&!n&&oc(i,this._lView),di(this._lView)}},sn=(()=>{class e{static{this.__NG_ELEMENT_ID__=vf}}return e})(),mf=sn,_f=class extends mf{constructor(t,n,i){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,i){let o=tf(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:n,dehydratedView:i});return new rn(o)}};function vf(){return ps(Le(),le())}function ps(e,t){return e.type&4?new _f(t,e,Pt(e,t)):null}var Zm=new RegExp(`^(\\d+)*(${ih}|${rh})*(.*)`);var yf=()=>null;function No(e,t){return yf(e,t)}var Rt=class{},gs=new X("",{providedIn:"root",factory:()=>!1});var Pc=new X(""),Fc=new X(""),Mi=class{},qn=class{};function Cf(e){let t=Error(`No component factory found for ${pe(e)}.`);return t[Sf]=e,t}var Sf="ngComponent";var xi=class{resolveComponentFactory(t){throw Cf(t)}},kt=class{static{this.NULL=new xi}},Nt=class{};var Df=(()=>{class e{static{this.\u0275prov=ie({token:e,providedIn:"root",factory:()=>null})}}return e})();function Ti(e,t,n){let i=n?e.styles:null,o=n?e.classes:null,r=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")r=a;else if(r==1)o=ro(o,a);else if(r==2){let f=a,l=t[++s];i=ro(i,f+": "+l+";")}}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=o:e.classesWithoutHost=o}var Gn=class extends kt{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=It(t);return new Kn(n,this.ngModule)}};function Oo(e,t){let n=[];for(let i in e){if(!e.hasOwnProperty(i))continue;let o=e[i];if(o===void 0)continue;let r=Array.isArray(o),s=r?o[0]:o,a=r?o[1]:Ze.None;t?n.push({propName:s,templateName:i,isSignal:(a&Ze.SignalBased)!==0}):n.push({propName:s,templateName:i})}return n}function wf(e){let t=e.toLowerCase();return t==="svg"?td:t==="math"?nd:null}var Kn=class extends qn{get inputs(){let t=this.componentDef,n=t.inputTransforms,i=Oo(t.inputs,!0);if(n!==null)for(let o of i)n.hasOwnProperty(o.propName)&&(o.transform=n[o.propName]);return i}get outputs(){return Oo(this.componentDef.outputs,!1)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=Tu(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,i,o){let r=J(null);try{o=o||this.ngModule;let s=o instanceof Ye?o:o?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new fi(t,s):t,f=a.get(Nt,null);if(f===null)throw new Y(407,!1);let l=a.get(Df,null),p=a.get(Rt,null),y={rendererFactory:f,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:p},C=f.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",c=i?kh(C,i,this.componentDef.encapsulation,a):ic(C,v,wf(v)),d=512;this.componentDef.signals?d|=4096:this.componentDef.onPush||(d|=16);let u=null;c!==null&&(u=ss(c,a,!0));let h=Dc(0,null,null,1,0,null,null,null,null,null,null),g=ur(null,h,null,d,null,null,y,C,a,null,u);Xi(g);let _,S,w=null;try{let m=this.componentDef,D,I=null;m.findHostDirectiveDefs?(D=[],I=new Map,m.findHostDirectiveDefs(m,D,I),D.push(m)):D=[m];let R=bf(g,c);w=Ef(R,c,m,D,g,y,C),S=id(h,ot),c&&xf(C,m,c,i),n!==void 0&&Tf(S,this.ngContentSelectors,n),_=Mf(w,m,D,I,g,[Af]),hs(h,g,null)}catch(m){throw w!==null&&yi(w),yi(g),m}finally{Ji()}return new Ai(this.componentType,_,Pt(S,g),g,S)}finally{J(r)}}},Ai=class extends Mi{constructor(t,n,i,o,r){super(),this.location=i,this._rootLView=o,this._tNode=r,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new rn(o,void 0,!1),this.componentType=t}setInput(t,n){let i=this._tNode.inputs,o;if(i!==null&&(o=i[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let r=this._rootLView;Tc(r[G],r,o,t,n),this.previousInputValues.set(t,n);let s=un(this._tNode.index,r);fs(s,1)}}get injector(){return new it(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function bf(e,t){let n=e[G],i=ot;return e[i]=t,us(n,i,2,"#host",null)}function Ef(e,t,n,i,o,r,s){let a=o[G];If(i,e,t,s);let f=null;t!==null&&(f=ss(t,o[Mt]));let l=r.rendererFactory.createRenderer(t,n),p=16;n.signals?p=4096:n.onPush&&(p=64);let y=ur(o,Sc(n),null,p,o[e.index],e,r,l,null,null,f);return a.firstCreatePass&&bi(a,e,i.length-1),ds(o,y),o[e.index]=y}function If(e,t,n,i){for(let o of e)t.mergedAttrs=qi(t.mergedAttrs,o.hostAttrs);t.mergedAttrs!==null&&(Ti(t,t.mergedAttrs,!0),n!==null&&fc(i,n,t))}function Mf(e,t,n,i,o,r){let s=Le(),a=o[G],f=Oe(s,o);wc(a,o,s,n,null,i);for(let p=0;p<n.length;p++){let y=s.directiveStart+p,C=Tt(o,a,y,s);At(C,o)}bc(a,o,s),f&&At(f,o);let l=Tt(o,a,s.directiveStart+s.componentOffset,s);if(e[Pe]=o[Pe]=l,r!==null)for(let p of r)p(l,t);return Cc(a,s,o),l}function xf(e,t,n,i){if(i)ii(e,n,["ng-version","18.2.13"]);else{let{attrs:o,classes:r}=Au(t.selectors[0]);o&&ii(e,n,o),r&&r.length>0&&hc(e,n,r.join(" "))}}function Tf(e,t,n){let i=e.projection=[];for(let o=0;o<t.length;o++){let r=n[o];i.push(r!=null?Array.from(r):null)}}function Af(){let e=Le();Oa(le()[G],e)}var dr=(()=>{class e{static{this.__NG_ELEMENT_ID__=Rf}}return e})();function Rf(){let e=Le();return Hc(e,le())}var kf=dr,Bc=class extends kf{constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return Pt(this._hostTNode,this._hostLView)}get injector(){return new it(this._hostTNode,this._hostLView)}get parentInjector(){let t=es(this._hostTNode,this._hostLView);if(Pa(t)){let n=jn(t,this._hostLView),i=Hn(t),o=n[G].data[i+8];return new it(o,n)}else return new it(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Lo(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-ge}createEmbeddedView(t,n,i){let o,r;typeof i=="number"?o=i:i!=null&&(o=i.index,r=i.injector);let s=No(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},r,s);return this.insertImpl(a,o,ko(this._hostTNode,s)),a}createComponent(t,n,i,o,r){let s=t&&!Qu(t),a;if(s)a=n;else{let c=n||{};a=c.index,i=c.injector,o=c.projectableNodes,r=c.environmentInjector||c.ngModuleRef}let f=s?t:new Kn(It(t)),l=i||this.parentInjector;if(!r&&f.ngModule==null){let d=(s?l:this.parentInjector).get(Ye,null);d&&(r=d)}let p=It(f.componentType??{}),y=No(this._lContainer,p?.id??null),C=y?.firstChild??null,v=f.create(l,o,C,r);return this.insertImpl(v.hostView,a,ko(this._hostTNode,y)),v}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,i){let o=t._lView;if(od(o)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let f=o[ue],l=new Bc(f,f[Ee],f[ue]);l.detach(l.indexOf(t))}}let r=this._adjustIndex(n),s=this._lContainer;return nf(s,o,r,i),t.attachToViewContainerRef(),Qo(Jr(s),r,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Lo(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),i=Di(this._lContainer,n);i&&(kn(Jr(this._lContainer),n),ac(i[G],i))}detach(t){let n=this._adjustIndex(t,-1),i=Di(this._lContainer,n);return i&&kn(Jr(this._lContainer),n)!=null?new rn(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function Lo(e){return e[Fn]}function Jr(e){return e[Fn]||(e[Fn]=[])}function Hc(e,t){let n,i=t[e.index];return We(i)?n=i:(n=Qh(i,t,null,e),t[e.index]=n,ds(t,n)),Of(n,t,e,i),new Bc(n,e,t)}function Nf(e,t){let n=e[ye],i=n.createComment(""),o=Oe(t,e),r=lc(n,o);return Wn(n,r,i,vh(n,o),!1),i}var Of=Lf;function Lf(e,t,n,i){if(e[at])return;let o;n.type&8?o=Ne(i):o=Nf(t,n),e[at]=o}var Ri=class e{constructor(t){this.queryList=t,this.matches=null}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},ki=class e{constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let i=t.contentQueries!==null?t.contentQueries[0]:n.length,o=[];for(let r=0;r<i;r++){let s=n.getByIndex(r),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new e(o)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)ms(t,n).matches!==null&&this.queries[n].setDirty()}},Ni=class{constructor(t,n,i=null){this.flags=n,this.read=i,typeof t=="string"?this.predicate=Uf(t):this.predicate=t}},Oi=class e{constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){let o=n!==null?n.length:0,r=this.getByIndex(i).embeddedTView(t,o);r&&(r.indexInDeclarationView=i,n!==null?n.push(r):n=[r])}return n!==null?new e(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Li=class e{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let o=0;o<i.length;o++){let r=i[o];this.matchTNodeWithReadOption(t,n,Pf(n,r)),this.matchTNodeWithReadOption(t,n,Tn(n,t,r,!1,!1))}else i===sn?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Tn(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(i!==null){let o=this.metadata.read;if(o!==null)if(o===Ft||o===dr||o===sn&&n.type&4)this.addMatch(n.index,-2);else{let r=Tn(n,t,o,!1,!1);r!==null&&this.addMatch(n.index,r)}else this.addMatch(n.index,i)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function Pf(e,t){let n=e.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1]}return null}function Ff(e,t){return e.type&11?Pt(e,t):e.type&4?ps(e,t):null}function Bf(e,t,n,i){return n===-1?Ff(t,e):n===-2?Hf(e,t,i):Tt(e,e[G],n,t)}function Hf(e,t,n){if(n===Ft)return Pt(t,e);if(n===sn)return ps(t,e);if(n===dr)return Hc(t,e)}function jc(e,t,n,i){let o=t[He].queries[i];if(o.matches===null){let r=e.data,s=n.matches,a=[];for(let f=0;s!==null&&f<s.length;f+=2){let l=s[f];if(l<0)a.push(null);else{let p=r[l];a.push(Bf(t,p,s[f+1],n.metadata.read))}}o.matches=a}return o.matches}function Pi(e,t,n,i){let o=e.queries.getByIndex(n),r=o.matches;if(r!==null){let s=jc(e,t,o,n);for(let a=0;a<r.length;a+=2){let f=r[a];if(f>0)i.push(s[a/2]);else{let l=r[a+1],p=t[-f];for(let y=ge;y<p.length;y++){let C=p[y];C[st]===C[ue]&&Pi(C[G],C,l,i)}if(p[xt]!==null){let y=p[xt];for(let C=0;C<y.length;C++){let v=y[C];Pi(v[G],v,l,i)}}}}}return i}function jf(e,t){return e[He].queries[t].queryList}function Vf(e,t,n){let i=new vi((n&4)===4);return Lh(e,t,i,i.destroy),(t[He]??=new ki).queries.push(new Ri(i))-1}function $f(e,t,n){let i=Xe();return i.firstCreatePass&&(Wf(i,new Ni(e,t,n),-1),(t&2)===2&&(i.staticViewQueries=!0)),Vf(i,le(),t)}function Uf(e){return e.split(",").map(t=>t.trim())}function Wf(e,t,n){e.queries===null&&(e.queries=new Oi),e.queries.track(new Li(t,n))}function ms(e,t){return e.queries.getByIndex(t)}function zf(e,t){let n=e[G],i=ms(n,t);return i.crossesNgTemplate?Pi(n,e,t,[]):jc(n,e,i,t)}var Po=new Set;function Vc(e){Po.has(e)||(Po.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}function qf(e){let t=[],n=new Map;function i(o){let r=n.get(o);if(!r){let s=e(o);n.set(o,r=s.then(Yf))}return r}return Zn.forEach((o,r)=>{let s=[];o.templateUrl&&s.push(i(o.templateUrl).then(l=>{o.template=l}));let a=typeof o.styles=="string"?[o.styles]:o.styles||[];if(o.styles=a,o.styleUrl&&o.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(o.styleUrls?.length){let l=o.styles.length,p=o.styleUrls;o.styleUrls.forEach((y,C)=>{a.push(""),s.push(i(y).then(v=>{a[l+C]=v,p.splice(p.indexOf(y),1),p.length==0&&(o.styleUrls=void 0)}))})}else o.styleUrl&&s.push(i(o.styleUrl).then(l=>{a.push(l),o.styleUrl=void 0}));let f=Promise.all(s).then(()=>Qf(r));t.push(f)}),Kf(),Promise.all(t).then(()=>{})}var Zn=new Map,Gf=new Set;function Kf(){let e=Zn;return Zn=new Map,e}function Zf(){return Zn.size===0}function Yf(e){return typeof e=="string"?e:e.text()}function Qf(e){Gf.delete(e)}var Qe=class{},Fi=class{};var Yn=class extends Qe{constructor(t,n,i,o=!0){super(),this.ngModuleType=t,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gn(this);let r=Ou(t);this._bootstrapComponents=ah(r.bootstrap),this._r3Injector=qa(t,n,[{provide:Qe,useValue:this},{provide:kt,useValue:this.componentFactoryResolver},...i],pe(t),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Bi=class extends Fi{constructor(t){super(),this.moduleType=t}create(t){return new Yn(this.moduleType,t,[])}};function Xf(e,t,n){return new Yn(e,t,n,!1)}var Hi=class extends Qe{constructor(t){super(),this.componentFactoryResolver=new Gn(this),this.instance=null;let n=new On([...t.providers,{provide:Qe,useValue:this},{provide:kt,useValue:this.componentFactoryResolver}],t.parent||Zi(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Jf(e,t,n=null){return new Hi({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}function ep(e,t,n){let i=e[t];return Object.is(i,n)?!1:(e[t]=n,!0)}function tp(e){return(e.flags&32)===32}var Kt=function(e){return e[e.EarlyRead=0]="EarlyRead",e[e.Write=1]="Write",e[e.MixedReadWrite=2]="MixedReadWrite",e[e.Read=3]="Read",e}(Kt||{}),np=(()=>{class e{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=ie({token:e,providedIn:"root",factory:()=>new e})}}return e})(),Fo=class e{constructor(){this.ngZone=ne(ae),this.scheduler=ne(Rt),this.errorHandler=ne(je,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Kt.EarlyRead,Kt.Write,Kt.MixedReadWrite,Kt.Read]}execute(){this.executing=!0;for(let t of e.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[t]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[t](n.pipelinedValue))}catch(i){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let t of this.sequences)t.afterRun(),t.once&&(this.sequences.delete(t),t.destroy());for(let t of this.deferredRegistrations)this.sequences.add(t);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(t){this.executing?this.deferredRegistrations.add(t):(this.sequences.add(t),this.scheduler.notify(6))}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}static{this.\u0275prov=ie({token:e,providedIn:"root",factory:()=>new e})}};function wn(e,t){return e<<17|t<<2}function dt(e){return e>>17&32767}function rp(e){return(e&2)==2}function ip(e,t){return e&131071|t<<17}function ji(e){return e|2}function Ot(e){return(e&131068)>>2}function ei(e,t){return e&-131069|t<<2}function sp(e){return(e&1)===1}function Vi(e){return e|1}function op(e,t,n,i,o,r){let s=r?t.classBindings:t.styleBindings,a=dt(s),f=Ot(s);e[i]=n;let l=!1,p;if(Array.isArray(n)){let y=n;p=y[1],(p===null||an(y,p)>0)&&(l=!0)}else p=n;if(o)if(f!==0){let C=dt(e[a+1]);e[i+1]=wn(C,a),C!==0&&(e[C+1]=ei(e[C+1],i)),e[a+1]=ip(e[a+1],i)}else e[i+1]=wn(a,0),a!==0&&(e[a+1]=ei(e[a+1],i)),a=i;else e[i+1]=wn(f,0),a===0?a=i:e[f+1]=ei(e[f+1],i),f=i;l&&(e[i+1]=ji(e[i+1])),Bo(e,p,i,!0),Bo(e,p,i,!1),ap(t,p,e,i,r),s=wn(a,f),r?t.classBindings=s:t.styleBindings=s}function ap(e,t,n,i,o){let r=o?e.residualClasses:e.residualStyles;r!=null&&typeof t=="string"&&an(r,t)>=0&&(n[i+1]=Vi(n[i+1]))}function Bo(e,t,n,i){let o=e[n+1],r=t===null,s=i?dt(o):Ot(o),a=!1;for(;s!==0&&(a===!1||r);){let f=e[s],l=e[s+1];cp(f,t)&&(a=!0,e[s+1]=i?Vi(l):ji(l)),s=i?dt(l):Ot(l)}a&&(e[n+1]=i?ji(o):Vi(o))}function cp(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?an(e,t)>=0:!1}function Ho(e,t,n,i,o){let r=t.inputs,s=o?"class":"style";Tc(e,n,r[s],s,i)}function _s(e,t){return lp(e,t,null,!0),_s}function lp(e,t,n,i){let o=le(),r=Xe(),s=_d(2);if(r.firstUpdatePass&&dp(r,e,s,i),t!==lr&&ep(o,s,t)){let a=r.data[dn()];mp(r,a,o,o[ye],e,o[s+1]=_p(t,n),i,s)}}function up(e,t){return t>=e.expandoStartIndex}function dp(e,t,n,i){let o=e.data;if(o[n+1]===null){let r=o[dn()],s=up(e,n);vp(r,i)&&t===null&&!s&&(t=!1),t=hp(o,r,t,i),op(o,r,t,n,s,i)}}function hp(e,t,n,i){let o=Sd(e),r=i?t.residualClasses:t.residualStyles;if(o===null)(i?t.classBindings:t.styleBindings)===0&&(n=ti(null,e,t,n,i),n=on(n,t.attrs,i),r=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==o)if(n=ti(o,e,t,n,i),r===null){let f=fp(e,t,i);f!==void 0&&Array.isArray(f)&&(f=ti(null,e,t,f[1],i),f=on(f,t.attrs,i),pp(e,t,i,f))}else r=gp(e,t,i)}return r!==void 0&&(i?t.residualClasses=r:t.residualStyles=r),n}function fp(e,t,n){let i=n?t.classBindings:t.styleBindings;if(Ot(i)!==0)return e[dt(i)]}function pp(e,t,n,i){let o=n?t.classBindings:t.styleBindings;e[dt(o)]=i}function gp(e,t,n){let i,o=t.directiveEnd;for(let r=1+t.directiveStylingLast;r<o;r++){let s=e[r].hostAttrs;i=on(i,s,n)}return on(i,t.attrs,n)}function ti(e,t,n,i,o){let r=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(r=t[a],i=on(i,r.hostAttrs,o),r!==e);)a++;return e!==null&&(n.directiveStylingLast=a),i}function on(e,t,n){let i=n?1:2,o=-1;if(t!==null)for(let r=0;r<t.length;r++){let s=t[r];typeof s=="number"?o=s:o===i&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),mu(e,s,n?!0:t[++r]))}return e===void 0?null:e}function mp(e,t,n,i,o,r,s,a){if(!(t.type&3))return;let f=e.data,l=f[a+1],p=sp(l)?jo(f,t,n,o,Ot(l),s):void 0;if(!Qn(p)){Qn(r)||rp(l)&&(r=jo(f,null,n,o,a,s));let y=rd(dn(),n);Eh(i,s,y,o,r)}}function jo(e,t,n,i,o,r){let s=t===null,a;for(;o>0;){let f=e[o],l=Array.isArray(f),p=l?f[1]:f,y=p===null,C=n[o+1];C===lr&&(C=y?we:void 0);let v=y?zr(C,i):p===i?C:void 0;if(l&&!Qn(v)&&(v=zr(f,i)),Qn(v)&&(a=v,s))return a;let c=e[o+1];o=s?dt(c):Ot(c)}if(t!==null){let f=r?t.residualClasses:t.residualStyles;f!=null&&(a=zr(f,i))}return a}function Qn(e){return e!==void 0}function _p(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=pe(os(e)))),e}function vp(e,t){return(e.flags&(t?8:16))!==0}function yp(e,t,n,i,o,r){let s=t.consts,a=_o(s,o),f=us(t,e,2,i,a);return Bh(t,n,f,_o(s,r)),f.attrs!==null&&Ti(f,f.attrs,!1),f.mergedAttrs!==null&&Ti(f,f.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,f),f}function Je(e,t,n,i){let o=le(),r=Xe(),s=ot+e,a=o[ye],f=r.firstCreatePass?yp(s,r,o,t,n,i):r.data[s],l=Cp(r,o,f,a,t,e);o[s]=l;let p=da(f);return sr(f,!0),fc(a,l,f),!tp(f)&&ka()&&uc(r,o,l,f),cd()===0&&At(l,o),ld(),p&&(Th(r,o,f),Cc(r,f,o)),i!==null&&Ah(o,f),Je}function pt(){let e=Le();wa()?gd():(e=e.parent,sr(e,!1));let t=e;hd(t)&&fd(),ud();let n=Xe();return n.firstCreatePass&&(Oa(n,e),la(e)&&n.queries.elementEnd(e)),t.classesWithoutHost!=null&&Md(t)&&Ho(n,t,le(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&xd(t)&&Ho(n,t,le(),t.stylesWithoutHost,!1),pt}function gt(e,t,n,i){return Je(e,t,n,i),pt(),gt}var Cp=(e,t,n,i,o,r)=>(Na(!0),ic(i,o,wd()));var Xn="en-US";var Sp=Xn;function Dp(e){typeof e=="string"&&(Sp=e.toLowerCase().replace(/_/g,"-"))}var wp=(e,t,n)=>{};function vs(e,t,n,i){let o=le(),r=Xe(),s=Le();return Ep(r,o,o[ye],s,e,t,i),vs}function bp(e,t,n,i){let o=e.cleanup;if(o!=null)for(let r=0;r<o.length-1;r+=2){let s=o[r];if(s===n&&o[r+1]===i){let a=t[Pn],f=o[r+2];return a.length>f?a[f]:null}typeof s=="string"&&(r+=2)}return null}function Ep(e,t,n,i,o,r,s){let a=da(i),l=e.firstCreatePass&&Mc(e),p=t[Pe],y=Ic(t),C=!0;if(i.type&3||s){let d=Oe(i,t),u=s?s(d):d,h=y.length,g=s?S=>s(Ne(S[i.index])):i.index,_=null;if(!s&&a&&(_=bp(e,t,o,i.index)),_!==null){let S=_.__ngLastListenerFn__||_;S.__ngNextListenerFn__=r,_.__ngLastListenerFn__=r,C=!1}else{r=$o(i,t,p,r),wp(d,o,r);let S=n.listen(u,o,r);y.push(r,S),l&&l.push(o,g,h,h+1)}}else r=$o(i,t,p,r);let v=i.outputs,c;if(C&&v!==null&&(c=v[o])){let d=c.length;if(d)for(let u=0;u<d;u+=2){let h=c[u],g=c[u+1],w=t[h][g].subscribe(r),m=y.length;y.push(r,w),l&&l.push(o,i.index,m,-(m+1))}}}function Vo(e,t,n,i){let o=J(null);try{return Te(6,t,n),n(i)!==!1}catch(r){return xc(e,r),!1}finally{Te(7,t,n),J(o)}}function $o(e,t,n,i){return function o(r){if(r===Function)return i;let s=e.componentOffset>-1?un(e.index,t):t;fs(s,5);let a=Vo(t,n,i,r),f=o.__ngNextListenerFn__;for(;f;)a=Vo(t,n,f,r)&&a,f=f.__ngNextListenerFn__;return a}}function $c(e,t,n){$f(e,t,n)}function Uc(e){let t=le(),n=Xe(),i=Ea();Qi(i+1);let o=ms(n,i);if(e.dirty&&sd(t)===((o.metadata.flags&2)===2)){if(o.matches===null)e.reset([]);else{let r=zf(t,i);e.reset(r,Yd),e.notifyOnChanges()}return!0}return!1}function Wc(){return jf(le(),Ea())}function hn(e,t=""){let n=le(),i=Xe(),o=e+ot,r=i.firstCreatePass?us(i,o,1,t,null):i.data[o],s=Ip(i,n,r,t,e);n[o]=s,ka()&&uc(i,n,s,r),sr(r,!1)}var Ip=(e,t,n,i,o)=>(Na(!0),lh(t[ye],i));var Mp=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let i=ia(!1,n.type),o=i.length>0?Jf([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=ie({token:e,providedIn:"environment",factory:()=>new e(Q(Ye))})}}return e})();function zc(e){Vc("NgStandalone"),e.getStandaloneInjector=t=>t.get(Mp).getOrCreateStandaloneInjector(e)}var bn=null;function xp(e){bn!==null&&(e.defaultEncapsulation!==bn.defaultEncapsulation||e.preserveWhitespaces!==bn.preserveWhitespaces)||(bn=e)}var ys=new X(""),fn=new X(""),hr=(()=>{class e{constructor(n,i,o){this._ngZone=n,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Cs||(Tp(o),o.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ae.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(n)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,o){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==r),n()},i)),this._callbacks.push({doneCb:n,timeoutId:r,updateCb:o})}whenStable(n,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,o),this._runCallbacksIfReady()}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,o){return[]}static{this.\u0275fac=function(i){return new(i||e)(Q(ae),Q(fr),Q(fn))}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac})}}return e})(),fr=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return Cs?.findTestabilityInTree(this,n,i)??null}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function Tp(e){Cs=e}var Cs;function Ss(e){return!!e&&typeof e.then=="function"}function qc(e){return!!e&&typeof e.subscribe=="function"}var Ap=new X(""),Gc=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i}),this.appInits=ne(Ap,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let r=o();if(Ss(r))n.push(r);else if(qc(r)){let s=new Promise((a,f)=>{r.subscribe({complete:a,error:f})});n.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(o=>{this.reject(o)}),n.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),Rp=new X("");function kp(){Us(()=>{throw new Y(600,!1)})}function Np(e){return e.isBoundToModule}var Op=10;function Lp(e,t,n){try{let i=n();return Ss(i)?i.catch(o=>{throw t.runOutsideAngular(()=>e.handleError(o)),o}):i}catch(i){throw t.runOutsideAngular(()=>e.handleError(i)),i}}function Kc(e,t){return Array.isArray(t)?t.reduce(Kc,e):_e(_e({},e),t)}var Ht=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ne(Kd),this.afterRenderManager=ne(np),this.zonelessEnabled=ne(gs),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ge,this.afterTick=new Ge,this.componentTypes=[],this.components=[],this.isStable=ne(or).hasPendingTasks.pipe(Wr(n=>!n)),this._injector=ne(Ye)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(i=>{n=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,i){let o=n instanceof qn;if(!this._injector.get(Gc).done){let C=!o&&Nu(n),v=!1;throw new Y(405,v)}let s;o?s=n:s=this._injector.get(kt).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let a=Np(s)?void 0:this._injector.get(Qe),f=i||s.selector,l=s.create(ut.NULL,[],f,a),p=l.location.nativeElement,y=l.injector.get(ys,null);return y?.registerApplication(p),l.onDestroy(()=>{this.detachView(l.hostView),An(this.components,l),y?.unregisterApplication(p)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Y(101,!1);let n=J(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,J(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Nt,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<Op;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:o,notifyErrorHandler:r}of this._views)Pp(o,r,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>rr(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){let i=n;An(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let i=this._injector.get(Rp,[]);[...this._bootstrapListeners,...i].forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>An(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Y(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function An(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Pp(e,t,n,i){if(!n&&!rr(e))return;kc(e,t,n&&!i?0:1)}var Fp=new X("");function Bp(e,t,n){let i=new Bi(n);return Promise.resolve(i)}function Uo(e){for(let t=e.length-1;t>=0;t--)if(e[t]!==void 0)return e[t]}var Hp=(()=>{class e{constructor(){this.zone=ne(ae),this.changeDetectionScheduler=ne(Rt),this.applicationRef=ne(Ht)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function jp({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new ae(Me(_e({},Zc()),{scheduleInRootZone:n})),[{provide:ae,useFactory:e},{provide:en,multi:!0,useFactory:()=>{let i=ne(Hp,{optional:!0});return()=>i.initialize()}},{provide:en,multi:!0,useFactory:()=>{let i=ne(Vp);return()=>{i.initialize()}}},t===!0?{provide:Pc,useValue:!0}:[],{provide:Fc,useValue:n??Ga}]}function Zc(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var Vp=(()=>{class e{constructor(){this.subscription=new de,this.initialized=!1,this.zone=ne(ae),this.pendingTasks=ne(or)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ae.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ae.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var $p=(()=>{class e{constructor(){this.appRef=ne(Ht),this.taskService=ne(or),this.ngZone=ne(ae),this.zonelessEnabled=ne(gs),this.disableScheduling=ne(Pc,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new de,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($n):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(ne(Fc,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Un||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?bo:Za;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($n+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(n),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,bo(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Up(){return typeof $localize<"u"&&$localize.locale||Xn}var Ds=new X("",{providedIn:"root",factory:()=>ne(Ds,Z.Optional|Z.SkipSelf)||Up()});var Jn=new X("");function En(e){return!e.moduleRef}function Wp(e){let t=En(e)?e.r3Injector:e.moduleRef.injector,n=t.get(ae);return n.run(()=>{En(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let i=t.get(je,null),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:r=>{i.handleError(r)}})}),En(e)){let r=()=>t.destroy(),s=e.platformInjector.get(Jn);s.add(r),t.onDestroy(()=>{o.unsubscribe(),s.delete(r)})}else{let r=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Jn);s.add(r),e.moduleRef.onDestroy(()=>{An(e.allPlatformModules,e.moduleRef),o.unsubscribe(),s.delete(r)})}return Lp(i,n,()=>{let r=t.get(Gc);return r.runInitializers(),r.donePromise.then(()=>{let s=t.get(Ds,Xn);if(Dp(s||Xn),En(e)){let a=t.get(Ht);return e.rootComponent!==void 0&&a.bootstrap(e.rootComponent),a}else return zp(e.moduleRef,e.allPlatformModules),e.moduleRef})})})}function zp(e,t){let n=e.injector.get(Ht);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(i=>n.bootstrap(i));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new Y(-403,!1);t.push(e)}var Yc=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){let o=i?.scheduleInRootZone,r=()=>Gd(i?.ngZone,Me(_e({},Zc({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:o})),s=i?.ignoreChangesOutsideZone,a=[jp({ngZoneFactory:r,ignoreChangesOutsideZone:s}),{provide:Rt,useExisting:$p}],f=Xf(n.moduleType,this.injector,a);return Wp({moduleRef:f,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(n,i=[]){let o=Kc({},i);return Bp(this.injector,o,n).then(r=>this.bootstrapModuleFactory(r,o))}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Y(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let n=this._injector.get(Jn,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(i){return new(i||e)(Q(ut))}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})(),Yt=null,Qc=new X("");function qp(e){if(Yt&&!Yt.get(Qc,!1))throw new Y(400,!1);kp(),Yt=e;let t=e.get(Yc);return Zp(e),t}function ws(e,t,n=[]){let i=`Platform: ${t}`,o=new X(i);return(r=[])=>{let s=Xc();if(!s||s.injector.get(Qc,!1)){let a=[...n,...r,{provide:o,useValue:!0}];e?e(a):qp(Gp(a,i))}return Kp(o)}}function Gp(e=[],t){return ut.create({name:t,providers:[{provide:tr,useValue:"platform"},{provide:Jn,useValue:new Set([()=>Yt=null])},...e]})}function Kp(e){let t=Xc();if(!t)throw new Y(401,!1);return t}function Xc(){return Yt?.get(Yc)??null}function Zp(e){e.get(rs,null)?.forEach(n=>n())}var Jc=ws(null,"core",[]),el=(()=>{class e{constructor(n){}static{this.\u0275fac=function(i){return new(i||e)(Q(Ht))}}static{this.\u0275mod=ft({type:e})}static{this.\u0275inj=ht({})}}return e})();var tl=null;function mr(){return tl}function nl(e){tl??=e}var pr=class{};var et=new X("");function rl(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let i=n.indexOf("="),[o,r]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(o.trim()===t)return decodeURIComponent(r)}return null}var il=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=ft({type:e})}static{this.\u0275inj=ht({})}}return e})(),sl="browser",Jp="server";function bs(e){return e===Jp}var gr=class{};var Ms=class extends pr{constructor(){super(...arguments),this.supportsDOMEvents=!0}},xs=class e extends Ms{static makeCurrent(){nl(new e)}onAndCancel(t,n,i){return t.addEventListener(n,i),()=>{t.removeEventListener(n,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=tg();return n==null?null:ng(n)}resetBaseElement(){pn=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return rl(document.cookie,t)}},pn=null;function tg(){return pn=pn||document.querySelector("base"),pn?pn.getAttribute("href"):null}function ng(e){return new URL(e,document.baseURI).pathname}var Ts=class{addToWindow(t){$e.getAngularTestability=(i,o=!0)=>{let r=t.findTestabilityInTree(i,o);if(r==null)throw new Y(5103,!1);return r},$e.getAllAngularTestabilities=()=>t.getAllTestabilities(),$e.getAllAngularRootElements=()=>t.getAllRootElements();let n=i=>{let o=$e.getAllAngularTestabilities(),r=o.length,s=function(){r--,r==0&&i()};o.forEach(a=>{a.whenStable(s)})};$e.frameworkStabilizers||($e.frameworkStabilizers=[]),$e.frameworkStabilizers.push(n)}findTestabilityInTree(t,n,i){if(n==null)return null;let o=t.getTestability(n);return o??(i?mr().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},rg=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac})}}return e})(),As=new X(""),ll=(()=>{class e{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(o=>{o.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,o){return this._findPluginFor(i).addEventListener(n,i,o)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(r=>r.supports(n)),!i)throw new Y(5101,!1);return this._eventNameToPlugin.set(n,i),i}static{this.\u0275fac=function(i){return new(i||e)(Q(As),Q(ae))}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac})}}return e})(),_r=class{constructor(t){this._doc=t}},Es="ng-app-id",ul=(()=>{class e{constructor(n,i,o,r={}){this.doc=n,this.appId=i,this.nonce=o,this.platformId=r,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=bs(r),this.resetHostNodes()}addStyles(n){for(let i of n)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(n){for(let i of n)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(i=>i.remove()),n.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let i of this.getAllStyles())this.addStyleToHost(n,i)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let i of this.hostNodes)this.addStyleToHost(i,n)}onStyleRemoved(n){let i=this.styleRef;i.get(n)?.elements?.forEach(o=>o.remove()),i.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Es}="${this.appId}"]`);if(n?.length){let i=new Map;return n.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(n,i){let o=this.styleRef;if(o.has(n)){let r=o.get(n);return r.usage+=i,r.usage}return o.set(n,{usage:i,elements:[]}),i}getStyleElement(n,i){let o=this.styleNodesInDOM,r=o?.get(i);if(r?.parentNode===n)return o.delete(i),r.removeAttribute(Es),r;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(Es,this.appId),n.appendChild(s),s}}addStyleToHost(n,i){let o=this.getStyleElement(n,i),r=this.styleRef,s=r.get(i)?.elements;s?s.push(o):r.set(i,{elements:[o],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||e)(Q(et),Q(ar),Q(is,8),Q(Bt))}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac})}}return e})(),Is={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},ks=/%COMP%/g,dl="%COMP%",ig=`_nghost-${dl}`,sg=`_ngcontent-${dl}`,og=!0,ag=new X("",{providedIn:"root",factory:()=>og});function cg(e){return sg.replace(ks,e)}function lg(e){return ig.replace(ks,e)}function hl(e,t){return t.map(n=>n.replace(ks,e))}var ol=(()=>{class e{constructor(n,i,o,r,s,a,f,l=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=r,this.doc=s,this.platformId=a,this.ngZone=f,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=bs(a),this.defaultRenderer=new gn(n,s,f,this.platformIsServer)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ke.ShadowDom&&(i=Me(_e({},i),{encapsulation:ke.Emulated}));let o=this.getOrCreateRenderer(n,i);return o instanceof vr?o.applyToHost(n):o instanceof mn&&o.applyStyles(),o}getOrCreateRenderer(n,i){let o=this.rendererByCompId,r=o.get(i.id);if(!r){let s=this.doc,a=this.ngZone,f=this.eventManager,l=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(i.encapsulation){case ke.Emulated:r=new vr(f,l,i,this.appId,p,s,a,y);break;case ke.ShadowDom:return new Rs(f,l,n,i,s,a,this.nonce,y);default:r=new mn(f,l,i,p,s,a,y);break}o.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||e)(Q(ll),Q(ul),Q(ar),Q(ag),Q(et),Q(Bt),Q(ae),Q(is))}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac})}}return e})(),gn=class{constructor(t,n,i,o){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Is[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(al(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(al(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){n.remove()}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Y(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,o){if(o){n=o+":"+n;let r=Is[o];r?t.setAttributeNS(r,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let o=Is[i];o?t.removeAttributeNS(o,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,o){o&(Ve.DashCase|Ve.Important)?t.style.setProperty(n,i,o&Ve.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Ve.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i){if(typeof t=="string"&&(t=mr().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(i))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function al(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Rs=class extends gn{constructor(t,n,i,o,r,s,a,f){super(t,r,s,f),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=hl(o.id,o.styles);for(let p of l){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=p,this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},mn=class extends gn{constructor(t,n,i,o,r,s,a,f){super(t,r,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=f?hl(f,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},vr=class extends mn{constructor(t,n,i,o,r,s,a,f){let l=o+"-"+i.id;super(t,n,i,r,s,a,f,l),this.contentAttr=cg(l),this.hostAttr=lg(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}},ug=(()=>{class e extends _r{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,o){return n.addEventListener(i,o,!1),()=>this.removeEventListener(n,i,o)}removeEventListener(n,i,o){return n.removeEventListener(i,o)}static{this.\u0275fac=function(i){return new(i||e)(Q(et))}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac})}}return e})(),cl=["alt","control","meta","shift"],dg={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hg={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},fg=(()=>{class e extends _r{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,i,o){let r=e.parseEventName(i),s=e.eventCallback(r.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mr().onAndCancel(n,r.domEventName,s))}static parseEventName(n){let i=n.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let r=e._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),cl.forEach(l=>{let p=i.indexOf(l);p>-1&&(i.splice(p,1),s+=l+".")}),s+=r,i.length!=0||r.length===0)return null;let f={};return f.domEventName=o,f.fullKey=s,f}static matchEventFullKeyCode(n,i){let o=dg[n.key]||n.key,r="";return i.indexOf("code.")>-1&&(o=n.code,r="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),cl.forEach(s=>{if(s!==o){let a=hg[s];a(n)&&(r+=s+".")}}),r+=o,r===i)}static eventCallback(n,i,o){return r=>{e.matchEventFullKeyCode(r,n)&&o.runGuarded(()=>i(r))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(i){return new(i||e)(Q(et))}}static{this.\u0275prov=ie({token:e,factory:e.\u0275fac})}}return e})();function pg(){xs.makeCurrent()}function gg(){return new je}function mg(){return nc(document),document}var _g=[{provide:Bt,useValue:sl},{provide:rs,useValue:pg,multi:!0},{provide:et,useFactory:mg,deps:[]}],fl=ws(Jc,"browser",_g),vg=new X(""),yg=[{provide:fn,useClass:Ts,deps:[]},{provide:ys,useClass:hr,deps:[ae,fr,fn]},{provide:hr,useClass:hr,deps:[ae,fr,fn]}],Cg=[{provide:tr,useValue:"root"},{provide:je,useFactory:gg,deps:[]},{provide:As,useClass:ug,multi:!0,deps:[et,ae,Bt]},{provide:As,useClass:fg,multi:!0,deps:[et]},ol,ul,ll,{provide:Nt,useExisting:ol},{provide:gr,useClass:rg,deps:[]},[]],pl=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:ar,useValue:n.appId}]}}static{this.\u0275fac=function(i){return new(i||e)(Q(vg,12))}}static{this.\u0275mod=ft({type:e})}static{this.\u0275inj=ht({providers:[...Cg,...yg],imports:[il,el]})}}return e})();var gl=(()=>{class e{constructor(){this.menuOpen=!1}toggleMenu(){this.menuOpen=!this.menuOpen}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Lt({type:e,selectors:[["app-navbar"]],standalone:!0,features:[zc],decls:14,vars:2,consts:[[1,"navbar"],[1,"menu-toggle",3,"click"],[1,"logo"],["href","#"],[1,"nav-links"]],template:function(i,o){i&1&&(Je(0,"nav",0)(1,"button",1),vs("click",function(){return o.toggleMenu()}),hn(2,"\u2630"),pt(),Je(3,"div",2),hn(4,"< / >"),Je(5,"li"),gt(6,"a",3),pt()(),Je(7,"ul",4)(8,"li")(9,"a",3),hn(10,"FAQ"),pt()(),Je(11,"li")(12,"a",3),hn(13,"Log"),pt()()()()),i&2&&(pc(7),_s("active",o.menuOpen))},styles:[".navbar[_ngcontent-%COMP%]{width:100%;height:60px;background-color:#222;color:#fff;display:flex;align-items:center;justify-content:flex-start;padding:0 20px;gap:20px}.logo[_ngcontent-%COMP%]{font-size:20px;font-weight:700}.menu-toggle[_ngcontent-%COMP%]{display:none;background:none;border:none;color:#fff;font-size:24px;cursor:pointer;padding:10px}.nav-links[_ngcontent-%COMP%]{list-style:none;display:flex;gap:15px;flex-wrap:wrap;margin-left:0}.nav-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#fff;font-size:14px;padding:5px 10px}@media (max-width: 768px){.menu-toggle[_ngcontent-%COMP%]{display:block}.nav-links[_ngcontent-%COMP%]{display:none;position:absolute;top:60px;left:0;background:#222;flex-direction:column;width:100%;text-align:left;padding:10px 20px}.nav-links.active[_ngcontent-%COMP%]{display:flex}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0}}"]})}}return e})();var yl=Hs(_l()),Cl=Hs(vl());var wg=["terminal"],Sl=(()=>{class e{constructor(){this.commandBuffer=""}ngOnInit(){this.initializeTerminal()}initializeTerminal(){this.terminal=new yl.Terminal({cursorBlink:!0,fontSize:14,theme:{background:"#1e1e1e",foreground:"#ffffff"}}),this.fitAddon=new Cl.FitAddon,this.terminal.loadAddon(this.fitAddon),this.terminal.open(this.terminalDiv.nativeElement),this.fitAddon.fit(),this.terminal.writeln("Welcome to xterm.js in Angular!"),this.terminal.write("$ "),this.terminal.onData(n=>this.handleInput(n)),window.addEventListener("resize",()=>this.fitAddon.fit())}handleInput(n){if(n==="\r"){this.terminal.writeln(""),console.log("User Input:",this.commandBuffer),this.terminal.writeln(`You typed: ${this.commandBuffer}`),this.commandBuffer="",this.terminal.write("$ ");return}if(n==="\x7F"){this.commandBuffer.length>0&&(this.commandBuffer=this.commandBuffer.slice(0,-1),this.terminal.write("\b \b"));return}this.commandBuffer+=n,this.terminal.write(n)}ngOnDestroy(){this.terminal.dispose()}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Lt({type:e,selectors:[["app-terminal"]],viewQuery:function(i,o){if(i&1&&$c(wg,7),i&2){let r;Uc(r=Wc())&&(o.terminalDiv=r.first)}},decls:2,vars:0,consts:[["terminal",""],[1,"terminal-container"]],template:function(i,o){i&1&&gt(0,"div",1,0)},styles:[`.terminal-container{width:100%;height:calc(100vh - 60px);background-color:#000;display:flex;flex-direction:column;overflow:hidden}.xterm{cursor:text;position:relative;user-select:none;-ms-user-select:none;-webkit-user-select:none}.xterm.focus,.xterm:focus{outline:none}.xterm .xterm-helpers{position:absolute;top:0;z-index:5}.xterm .xterm-helper-textarea{padding:0;border:0;margin:0;position:absolute;opacity:0;left:-9999em;top:0;width:0;height:0;z-index:-5;white-space:nowrap;overflow:hidden;resize:none}.xterm .composition-view{background:#000;color:#fff;display:none;position:absolute;white-space:nowrap;z-index:1}.xterm .composition-view.active{display:block}.xterm .xterm-viewport{background-color:#000;overflow-y:scroll;cursor:default;position:absolute;inset:0}.xterm .xterm-screen{position:relative}.xterm .xterm-screen canvas{position:absolute;left:0;top:0}.xterm-char-measure-element{display:inline-block;visibility:hidden;position:absolute;top:0;left:-9999em;line-height:normal}.xterm.enable-mouse-events{cursor:default}.xterm.xterm-cursor-pointer,.xterm .xterm-cursor-pointer{cursor:pointer}.xterm.column-select.focus{cursor:crosshair}.xterm .xterm-accessibility:not(.debug),.xterm .xterm-message{position:absolute;inset:0;z-index:10;color:transparent;pointer-events:none}.xterm .xterm-accessibility-tree:not(.debug) *::selection{color:transparent}.xterm .xterm-accessibility-tree{font-family:monospace;-webkit-user-select:text;user-select:text;white-space:pre}.xterm .xterm-accessibility-tree>div{transform-origin:left;width:fit-content}.xterm .live-region{position:absolute;left:-9999px;width:1px;height:1px;overflow:hidden}.xterm-dim{opacity:1!important}.xterm-underline-1{text-decoration:underline}.xterm-underline-2{text-decoration:double underline}.xterm-underline-3{text-decoration:wavy underline}.xterm-underline-4{text-decoration:dotted underline}.xterm-underline-5{text-decoration:dashed underline}.xterm-overline{text-decoration:overline}.xterm-overline.xterm-underline-1{text-decoration:overline underline}.xterm-overline.xterm-underline-2{text-decoration:overline double underline}.xterm-overline.xterm-underline-3{text-decoration:overline wavy underline}.xterm-overline.xterm-underline-4{text-decoration:overline dotted underline}.xterm-overline.xterm-underline-5{text-decoration:overline dashed underline}.xterm-strikethrough{text-decoration:line-through}.xterm-screen .xterm-decoration-container .xterm-decoration{z-index:6;position:absolute}.xterm-screen .xterm-decoration-container .xterm-decoration.xterm-decoration-top-layer{z-index:7}.xterm-decoration-overview-ruler{z-index:8;position:absolute;top:0;right:0;pointer-events:none}.xterm-decoration-top{z-index:2;position:relative}.xterm .xterm-scrollable-element>.scrollbar{cursor:default}.xterm .xterm-scrollable-element>.scrollbar>.scra{cursor:pointer;font-size:11px!important}.xterm .xterm-scrollable-element>.visible{opacity:1;background:#0000;transition:opacity .1s linear;z-index:11}.xterm .xterm-scrollable-element>.invisible{opacity:0;pointer-events:none}.xterm .xterm-scrollable-element>.invisible.fade{transition:opacity .8s linear}.xterm .xterm-scrollable-element>.shadow{position:absolute;display:none}.xterm .xterm-scrollable-element>.shadow.top{display:block;top:0;left:3px;height:3px;width:100%;box-shadow:var(--vscode-scrollbar-shadow, #000) 0 6px 6px -6px inset}.xterm .xterm-scrollable-element>.shadow.left{display:block;top:3px;left:0;height:100%;width:3px;box-shadow:var(--vscode-scrollbar-shadow, #000) 6px 0 6px -6px inset}.xterm .xterm-scrollable-element>.shadow.top-left-corner{display:block;top:0;left:0;height:3px;width:3px}.xterm .xterm-scrollable-element>.shadow.top.left{box-shadow:var(--vscode-scrollbar-shadow, #000) 6px 0 6px -6px inset}
/**
 * Copyright (c) 2014 The xterm.js authors. All rights reserved.
 * Copyright (c) 2012-2013, Christopher Jeffrey (MIT License)
 * https://github.com/chjj/term.js
 * @license MIT
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * Originally forked from (with the author's permission):
 *   Fabrice Bellard's javascript vt100 for jslinux:
 *   http://bellard.org/jslinux/
 *   Copyright (c) 2011 Fabrice Bellard
 *   The original design remains. The terminal itself
 *   has been extended to include xterm CSI codes, among
 *   other features.
 */
`],encapsulation:2})}}return e})();var Dl=(()=>{class e{constructor(){this.title="costory-app"}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=Lt({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(i,o){i&1&&gt(0,"app-navbar")(1,"app-terminal")},dependencies:[gl,Sl],styles:["app-component[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;width:100vw;overflow:hidden}app-navbar[_ngcontent-%COMP%]{height:60px;flex-shrink:0}app-terminal[_ngcontent-%COMP%]{flex-grow:1;display:flex;width:100%}"]})}}return e})();var wl=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=ft({type:e,bootstrap:[Dl]})}static{this.\u0275inj=ht({imports:[pl]})}}return e})();var bl={production:!0};bl.production&&void 0;fl().bootstrapModule(wl).catch(e=>console.error(e));
